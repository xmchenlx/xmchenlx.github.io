(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app~c7395cee"],{"2b38":function(e,a,t){"use strict";t.r(a),t.d(a,"statusParam",function(){return n});var n={0:"正常",1:"停用"}},"3d4f":function(e,a,t){"use strict";t.r(a);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"data-set",attrs:{id:"dataSet"}},[n("c-query-form-table",{attrs:{searchParams:t.par,tableData:t.tableData,tableColumns:t.tableColumns,needTableCheckList:!0,loadingFlag:t.loadingFlag,selectTableKeys:t.selectTableKeys},on:{selectTableKeysChangeFromQFT:t.selectTableKeysChangeFromQFT,formQuery:t.formQuery,dbClick:t.dbClick,reloadData:t.reloadData},scopedSlots:t._u([{key:"status",fn:function(e){return[n("span",[t._v(t._s(t.statusParam[e.data.status]))])]}},{key:"tableActionBox",fn:function(a){return[n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:datasetsql:edit"],expression:"['content:datasetsql:edit']"}],attrs:{type:"link",size:"small"},on:{click:function(e){return t.handleEditDataSet(a.data.sid)}}},[t._v("修改")]),n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:datasetsql:delete"],expression:"['content:datasetsql:delete']"}],attrs:{type:"link",size:"small"},on:{click:function(e){return t.handleDeleteDataSet([a.data.sid])}}},[t._v("删除")])]}}])},[n("template",{staticClass:"btn-box",slot:"functionBtnBox"},[n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:datasetdef:add"],expression:"['content:datasetdef:add']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"plus"},on:{click:t.handleAddDataSet}},[t._v("新增")]),n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:datasetdef:edit"],expression:"['content:datasetdef:edit']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"edit",disabled:1!==t.selectTableKeys.length},on:{click:function(e){return t.handleEditDataSet(t.selectTableKeys[0])}}},[t._v("修改")]),n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:datasetdef:delete"],expression:"['content:datasetdef:delete']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"delete",disabled:t.selectTableKeys.length<1},on:{click:function(e){return t.handleDeleteDataSet(t.selectTableKeys)}}},[t._v("删除")]),n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:datasetsql:list"],expression:"['content:datasetsql:list']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"reload",loading:t.refreshRedisFlag,disabled:1!==t.selectTableKeys.length},on:{click:function(e){return t.handleOpenSqlManage(t.selectTableKeys[0])}}},[t._v("SQL关联")]),n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:datasetdef:getDataSetTree"],expression:"['content:datasetdef:getDataSetTree']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"edit",disabled:1!==t.selectTableKeys.length},on:{click:function(e){return t.handleOpenNodeChildren(t.selectTableKeys[0])}}},[t._v("查看子数据集")])],1)],2),n("modal-sql-manage",{ref:"modalSqlManage"}),n("modal-see-children-node",{ref:"ModalSeeChildrenNode"}),n("modal-data-set-detail",{ref:"modalDataSetDetail"})],1)},i=[],s=(t("c740"),t("d3b7"),t("25f0"),t("d81d"),t("7db0"),t("c41f")),l=t("79f3"),d=t("ed08"),o=t("2b38"),r=t("f5ef"),c=t("9b5b"),m=t("a817"),u={data:function(){return{statusParam:o["statusParam"],par:[{name:"sid",label:"编号",type:"input"},{name:"datasetNameCn",label:"数据集中文名称",type:"input"},{name:"datasetNameEn",label:"数据集英文名称",type:"input"},{name:"tableName",label:"数据集实体表名",type:"input"},{name:"isSonFlag",label:"是否含有子数据集",type:"select",selectList:[{key:"0",value:"否"},{key:"1",value:"是"}]},{name:"parentSid",label:"父数据集",type:"input"},{name:"accessMode",label:"取数方式",type:"input"},{name:"creatorSid",label:"创建者编号",type:"input"},{name:"createTime",label:"创建时间",type:"input"},{name:"editorSid",label:"修改者编号",type:"input"},{name:"updateTime",label:"修改时间",type:"input"},{name:"remark",label:"备注",type:"input"}],tableData:{content:[],pageSize:10,pageNum:1,totalPages:1,totalSize:1},tableColumns:[{key:"sid",dataIndex:"sid",title:"编号"},{key:"datasetNameCn",dataIndex:"datasetNameCn",title:"数据集中文名称"},{key:"datasetNameEn",dataIndex:"datasetNameEn",title:"数据集英文名称"},{key:"tableName",dataIndex:"tableName",title:"数据集实体表名"},{key:"isSonFlag",dataIndex:"isSonFlag",title:"是否含有子数据集",hasSlot:!0},{key:"parentNameCn",dataIndex:"parentNameCn",title:"父数据集中文名称"},{key:"parentNameEn",dataIndex:"parentNameEn",title:"父数据集英文名称"},{key:"accessMode",dataIndex:"accessMode",title:"取数方式"},{key:"creatorSid",dataIndex:"creatorSid",title:"创建者编号"},{key:"createTime",dataIndex:"createTime",title:"创建时间"},{key:"editorSid",dataIndex:"editorSid",title:"修改者编号"},{key:"updateTime",dataIndex:"updateTime",title:"修改时间"},{key:"remark",dataIndex:"remark",title:"备注"}],refreshRedisFlag:!1,selectTableKeys:[],loadingFlag:!1}},mounted:function(){var e=this,a=this.tableData,t=a.pageNum,n=a.pageSize;this.handleLoadData({pageNum:t,pageSize:n},{}),r["a"].$on("reloadTypeData",function(){e.reloadData({})})},methods:{handleOpenSqlManage:function(a){var e=this.tableData.content,t=e.findIndex(function(e){return a===e.sid});this.$refs.modalSqlManage.open(e[t])},reloadData:function(e){if("{}"!==JSON.stringify(e)){var a=e.pageNum,t=e.pageSize;this.tableData.pageNum=a,this.tableData.pageSize=t}this.handleLoadData({},null)},formQuery:function(e){this.handleLoadData({},e)},handleLoadData:function(e,a){var t=this;this.selectTableKeys=[],"{}"===JSON.stringify(e)&&(e.pageNum=this.tableData.pageNum,e.pageSize=this.tableData.pageSize),this.loadingFlag=!0,Object(s["c"])(e.pageNum,e.pageSize,a).then(function(e){if(!Object(d["l"])(e))throw new Error(e.msg);t.$nextTick(function(){t.tableData.content=e.rows,t.tableData.totalSize=e.total,t.tableData.totalPages=Math.ceil(t.tableData.totalSize/t.tableData.pageSize)})}).catch(function(e){t.$message.error("数据加载错误："+e)}).finally(function(){t.loadingFlag=!1})},dbClick:function(e){this.handleEditDataSet(e.sid)},handleAddDataSet:function(){this.$refs.modalDataSetDetail.open({mode:"insert"})},handleEditDataSet:function(e){this.$refs.modalDataSetDetail.open({mode:"edit",sid:e})},handleDeleteDataSet:function(a){this.$createElement;var t=this;this.$confirm({title:"数据集删除确认",content:function(e){return e("div",["此操作将",e("span",{class:"textRed"},["物理删除",a.length,"条"]),"数据集定义数据，确认删除？"])},okType:"danger",closable:!0,onOk:function(){var e={countNum:a.length,id:a.toString()};Object(s["b"])(e).then(function(e){t.selectTableKeys=[],t.$message.success("删除成功！"),t.reloadData({})})}})},selectTableKeysChangeFromQFT:function(e){this.selectTableKeys=e},handleOpenKeyData:function(e){this.$refs.modalSqlManage.open(e)},handleOpenNodeChildren:function(e){var a=this.findRowsInfo([e]);this.$refs.ModalSeeChildrenNode.open(a)},findRowsInfo:function(e){var t=this,n=[],i=[];return e.map(function(a){var e=t.tableData.content.find(function(e){return e.sid===a});n.push(e.datasetNameCn),i.push(e.sid)}),{itemsName:n,itemsSid:i}}},components:{modalSqlManage:c["default"],modalDataSetDetail:m["default"],ModalSeeChildrenNode:l["default"]}},p=u,f=(t("e370"),t("2877")),h=Object(f["a"])(p,n,i,!1,null,"13158fb1",null);a["default"]=h.exports},"5ade":function(e,a,t){},"9b5b":function(e,a,t){"use strict";t.r(a);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"codeDetail"}},[n("c-resizable-modal",{ref:"crm",attrs:{title:t.title,modalWidth:"70%",footer:null}},[n("c-query-form-table",{attrs:{searchParams:t.par,tableData:t.tableData,tableColumns:t.tableColumns,needTableCheckList:!0,selectTableKeys:t.selectTableKeys,loadingFlag:t.loadingFlag},on:{selectTableKeysChangeFromQFT:t.selectTableKeysChangeFromQFT,formQuery:t.formQuery,dbClick:t.dbClick,reloadData:t.reloadData},scopedSlots:t._u([{key:"statement",fn:function(e){return[t._v(" "+t._s(e.data.sqlList.map(function(e){return e.statement}).toString())+" ")]}},{key:"tableActionBox",fn:function(a){return[n("c-more-btn-collect",[n("span",{attrs:{slot:"content"},slot:"content"},[n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:datasetsql:edit"],expression:"['content:datasetsql:edit']"}],attrs:{type:"link",size:"small"},on:{click:function(e){return t.handleOpenKeyDataDetail("edit",a.data.sid)}}},[t._v("修改")]),n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:datasetsql:delete"],expression:"['content:datasetsql:delete']"}],attrs:{type:"link",size:"small"},on:{click:function(e){return t.handleDeleteDictType([a.data.sid])}}},[t._v("删除")])],1)])]}}])},[n("template",{staticClass:"btn-box",slot:"functionBtnBox"},[n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:datasetsql:add"],expression:"['content:datasetsql:add']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"plus"},on:{click:t.handleAdd}},[t._v("新增")]),n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:datasetsql:edit"],expression:"['content:datasetsql:edit']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"edit",disabled:t.selectTableKeys.length<1},on:{click:function(e){return t.handleEditDictData(t.selectTableKeys[0])}}},[t._v("修改")]),n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:datasetsql:delete"],expression:"['content:datasetsql:delete']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"delete",disabled:t.selectTableKeys.length<1},on:{click:function(e){return t.handleDeleteDictType(t.selectTableKeys)}}},[t._v("删除")]),n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:datasetsql:add"],expression:"['content:datasetsql:add']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"delete",disabled:t.selectTableKeys.length<1},on:{click:function(e){return t.handlePreviewSql(t.selectTableKeys[0])}}},[t._v("预览SQL")]),n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:datasetsql:add"],expression:"['content:datasetsql:add']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"plus"},on:{click:function(e){return t.handleOpenParamsModal()}}},[t._v("字段编辑")])],1)],2)],1),n("modalSqlDetail",{ref:"modalSqlDetail"}),n("modalParamsPane",{ref:"modalParamsPane"}),n("modalCodePreview",{ref:"modalCodePreview"})],1)},i=[],s=t("5530"),l=(t("99af"),t("d3b7"),t("d81d"),t("ac1f"),t("1276"),t("25f0"),t("fe40")),d=t("ed08"),o=t("d57f"),r=t("b415"),c=t("01f3"),m=t("f5ef"),u={data:function(){return{mode:"insert",dataSetItem:{},isModalVisible:!1,loadingFlag:!1,saveLoading:!1,par:[{name:"statement",label:"SQL内容",type:"input"},{name:"sqlType",label:"语句类型",type:"select",selectList:[{key:"1",value:"查询归档语句"},{key:"2",value:"查询原始语句"},{key:"3",value:"导出报文语句"},{key:"4",value:"关联表达式"}]},{name:"dataSource",label:"数据源类型",type:"select",selectList:[{key:"1",value:"MySQL"},{key:"2",value:"Oracle"},{key:"3",value:"db2"}]},{name:"sort ",label:"排序",type:"input"}],tableData:{content:[],pageSize:10,pageNum:1,totalPages:1,totalSize:1},tableColumns:[{key:"datasetSid",dataIndex:"datasetSid",title:"数据集SID"},{key:"statement",dataIndex:"statement",title:"SQL内容",hasSlot:!0},{key:"sqlType",dataIndex:"sqlType",title:"语句类型"},{key:"dataSource",dataIndex:"dataSource",title:"数据源类型"},{key:"sort ",dataIndex:"sort ",title:"排序"}],selectTableKeys:[]}},computed:{title:function(){var e=this.dataSetItem,a=e.datasetNameCn,t=e.datasetNameEn;return"".concat(a,"（").concat(t,"）数据集执行语句详情")}},mounted:function(){var e=this;m["a"].$on("reloadDictData",function(){e.reloadData({})})},methods:{handleOpenKeyDataDetail:function(e,a){this.$refs.modalSqlDetail.open({mode:e,sid:a})},selectTableKeysChangeFromQFT:function(e){this.selectTableKeys=e},open:function(e){this.addForm={},this.dataSetItem=e||{},this.$refs.crm.open(),this.handleLoadData({},{datasetSid:e.sid})},handleLoadData:function(e,a){var t=this;this.selectTableKeys=[],"{}"===JSON.stringify(e)&&(e.pageNum=this.tableData.pageNum,e.pageSize=this.tableData.pageSize),this.loadingFlag=!0,Object(l["c"])(e.pageNum,e.pageSize,a).then(function(e){if(!Object(d["l"])(e))throw new Error(e.msg);for(var a in e.rows)e.rows[a].sid="".concat(e.rows[a].datasetSid,"#").concat(e.rows[a].sqlType);t.$nextTick(function(){t.tableData.content=e.rows,t.tableData.totalSize=e.total,t.tableData.totalPages=Math.ceil(t.tableData.totalSize/t.tableData.pageSize)})}).catch(function(e){t.$message.error("数据加载错误："+e)}).finally(function(){t.loadingFlag=!1})},handleEditDictData:function(e){this.$refs.modalSqlDetail.open({mode:"edit",sid:e})},handleDeleteDictType:function(n){this.$createElement;var i=this;this.$confirm({title:"数据集语句信息删除确认",content:function(e){return e("div",["此操作将",e("span",{class:"textRed"},["物理删除",n.length,"项"]),"数据集语句信息，确认删除？"])},okType:"danger",closable:!0,onOk:function(){var a=this,e=n.map(function(e){return e.split("#")[1]}),t={countNum:n.length,id:n[0].split("#")[0],sqlType:e.toString()};Object(l["b"])(t).then(function(e){i.selectTableKeys=[],i.$message.success("删除成功！"),i.reloadData({})}).catch(function(e){a.$message.error("删除失败。".concat(e.message))})}})},dbClick:function(e){this.handleEditDictData(e.sid)},formQuery:function(e){this.handleLoadData({},Object(s["a"])(Object(s["a"])({},e),{},{datasetSid:this.dataSetItem.sid}))},reloadData:function(e){if("{}"!==JSON.stringify(e)){var a=e.pageNum,t=e.pageSize;this.tableData.pageNum=a,this.tableData.pageSize=t}this.handleLoadData({},{datasetSid:this.dataSetItem.sid})},handleAdd:function(){this.$refs.modalSqlDetail.open({mode:"insert",datasetSid:this.dataSetItem.sid})},handleOpenParamsModal:function(){this.$refs.modalParamsPane.open(this.dataSetItem)},handlePreviewSql:function(e){this.$refs.modalCodePreview.open(e)}},components:{modalSqlDetail:o["default"],modalParamsPane:r["default"],modalCodePreview:c["default"]}},p=u,f=t("2877"),h=Object(f["a"])(p,n,i,!1,null,null,null);a["default"]=h.exports},a817:function(e,a,t){"use strict";t.r(a);var n=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",[t("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"75%",title:("insert"==a.mode?"新增":"编辑")+"数据集定义"}},[t("a-spin",{attrs:{spinning:a.spin}},[t("a-form-model",{ref:"addForm",attrs:{model:a.addForm,labelCol:{span:6},wrapperCol:{span:18},rules:a.addFormRule}},[t("a-row",{attrs:{gutter:15}},[t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"数据集中文名称",prop:"datasetNameCn"}},[t("a-input",{model:{value:a.addForm.datasetNameCn,callback:function(e){a.$set(a.addForm,"datasetNameCn",e)},expression:"addForm.datasetNameCn"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"数据集英文名称",prop:"datasetNameEn"}},[t("a-input",{model:{value:a.addForm.datasetNameEn,callback:function(e){a.$set(a.addForm,"datasetNameEn",e)},expression:"addForm.datasetNameEn"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"数据集实体表名",prop:"tableName"}},[t("a-input",{model:{value:a.addForm.tableName,callback:function(e){a.$set(a.addForm,"tableName",e)},expression:"addForm.tableName"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"是否关联子数据集",prop:"isSonFlag"}},[t("a-radio-group",{attrs:{name:"isSonFlag"},model:{value:a.addForm.isSonFlag,callback:function(e){a.$set(a.addForm,"isSonFlag",e)},expression:"addForm.isSonFlag"}},[t("a-radio",{attrs:{value:"0"}},[a._v(" 否 ")]),t("a-radio",{attrs:{value:"1"}},[a._v(" 是 ")])],1)],1)],1),t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"父数据集",prop:"parentSid",labelCol:{span:3},wrapperCol:{span:21}}},[t("a-select",{attrs:{showSearch:"",defaultValue:a.addForm.parentSid,allowClear:"","filter-option":!1,placeholder:"下拉选择或输入关键字选择..."},on:{search:a.fetchData,change:a.onSelectChange},scopedSlots:a._u([{key:"dropdownRender",fn:function(e){return t("div",{},[t("a-spin",{attrs:{spinning:a.tableSpin}},[t("v-nodes",{attrs:{vnodes:e}}),t("div",{directives:[{name:"show",rawName:"v-show",value:a.tableData.totalPages>1,expression:"tableData.totalPages>1"}],staticStyle:{padding:"4px 8px",cursor:"pointer"},on:{mousedown:function(e){return e.preventDefault()}}},[t("a-divider",{staticStyle:{margin:"4px 0"}}),t("a-pagination",{attrs:{simple:"",defaultPageSize:a.tableData.pageSize,current:a.tableData.pageNum,total:a.tableData.totalSize},on:{change:a.onPaginationChange}})],1)],1)],1)}}]),model:{value:a.addForm.parentSid,callback:function(e){a.$set(a.addForm,"parentSid",e)},expression:"addForm.parentSid"}},a._l(a.tableData.content,function(e){return t("a-select-option",{key:e.sid},[a._v(" "+a._s(e.datasetNameCn)+"（"+a._s(e.datasetNameEn)+"） ")])}),1)],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"创建者编号",prop:"creatorSid"}},[t("a-input",{attrs:{disabled:""},model:{value:a.addForm.creatorSid,callback:function(e){a.$set(a.addForm,"creatorSid",e)},expression:"addForm.creatorSid"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"创建时间",prop:"createTime"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:{format:"HH:mm:ss"},allowClear:"",valueFormat:"YYYY-MM-DD HH:mm:ss",disabled:""},model:{value:a.addForm.createTime,callback:function(e){a.$set(a.addForm,"createTime",e)},expression:"addForm.createTime"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"修改者编号",prop:"editorSid"}},[t("a-input",{attrs:{disabled:""},model:{value:a.addForm.editorSid,callback:function(e){a.$set(a.addForm,"editorSid",e)},expression:"addForm.editorSid"}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-model-item",{attrs:{label:"修改时间",prop:"updateTime"}},[t("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:{format:"HH:mm:ss"},valueFormat:"YYYY-MM-DD HH:mm:ss",disabled:""},model:{value:a.addForm.updateTime,callback:function(e){a.$set(a.addForm,"updateTime",e)},expression:"addForm.updateTime"}})],1)],1),t("a-col",{attrs:{span:24}},[t("a-form-model-item",{attrs:{label:"备注",prop:"note",labelCol:{span:3},wrapperCol:{span:21}}},[t("a-input",{attrs:{type:"textarea"},model:{value:a.addForm.remark,callback:function(e){a.$set(a.addForm,"remark",e)},expression:"addForm.remark"}})],1)],1)],1)],1)],1),t("div",{attrs:{slot:"footer"},slot:"footer"},[t("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:a.handleCancel}},[a._v("取 消")]),t("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:a.saveLoading},on:{click:a.handleSave}},[a._v("保存")])],1)],1)],1)},i=[],s=(t("d3b7"),t("498a"),t("c41f")),l=(t("ed08"),t("b047")),d=t.n(l),o=t("f5ef"),r={data:function(){return this.fetchData=d()(this.fetchData,800),{mode:"read",tableSpin:!1,spin:!1,saveLoading:!1,addForm:{},tableData:{content:[],pageSize:10,pageNum:1,totalPages:1,totalSize:1},tableColumns:[{key:"sid",dataIndex:"sid",title:"编号"},{key:"datasetNameCn",dataIndex:"datasetNameCn",title:"数据集中文名称"},{key:"datasetNameEn",dataIndex:"datasetNameEn",title:"数据集英文名称"},{key:"isSonFlag",dataIndex:"isSonFlag",title:"是否含有子数据集",hasSlot:!0},{key:"parentSid",dataIndex:"parentSid",title:"父数据集"},{key:"accessMode",dataIndex:"accessMode",title:"取数方式"},{key:"creatorSid",dataIndex:"creatorSid",title:"创建者编号"},{key:"createTime",dataIndex:"createTime",title:"创建时间"},{key:"editorSid",dataIndex:"editorSid",title:"修改者编号"},{key:"updateTime",dataIndex:"updateTime",title:"修改时间"},{key:"remark",dataIndex:"remark",title:"备注"}],addFormRule:{datasetNameCn:[{required:!0,message:"不允许为空",trigger:"blur"}],datasetNameEn:[{required:!0,message:"不允许为空",trigger:"blur"}],isSonFlag:[{required:!0,message:"必须给定一个选择",trigger:"blur"}]}}},components:{VNodes:{functional:!0,render:function(e,a){return a.props.vnodes}}},mounted:function(){},methods:{open:function(e){this.addForm={sid:"",datasetNameCn:"",datasetNameEn:"",isSonFlag:"0",tableName:"",parentSid:void 0,creatorSid:"",createTime:"",editorSid:"",updateTime:"",remark:""};var a=this.tableData,t=a.pageNum,n=a.pageSize;this.mode=e.mode,this.$refs.crm.open(),"edit"==this.mode?this.getDataBySid(e.sid):this.handleLoadData({pageNum:t,pageSize:n},null)},onSelectChange:function(e){void 0===e&&this.fetchData(e)},onPaginationChange:function(e){this.handleLoadData({pageNum:e,pageSize:10},null)},getDataBySid:function(e){var a=this;this.spin=!0;var t={};Object(s["d"])(e).then(function(e){a.addForm=e.data,e.data.parentSid&&e.data.parentSid.length&&(t.sid=e.data.parentSid),a.$nextTick(function(){a.handleLoadData({},t)})}).finally(function(){a.spin=!1})},fetchData:function(e){var a=this;void 0===e&&(e=""),this.$nextTick(function(){a.handleLoadData({},{datasetName:e.trim()})})},handleLoadData:function(a,e){var t=this,n=this;"{}"===JSON.stringify(a)&&(a.pageNum=this.tableData.pageNum,a.pageSize=this.tableData.pageSize),this.tableSpin=!0,Object(s["c"])(a.pageNum,a.pageSize,e).then(function(e){n.$nextTick(function(){n.tableData.pageNum=a.pageNum,n.tableData.content=e.rows,n.tableData.totalSize=e.total,n.tableData.totalPages=Math.ceil(n.tableData.totalSize/n.tableData.pageSize)})}).catch(function(e){n.$message.error("数据加载错误："+e)}).finally(function(){t.tableSpin=!1,t.$forceUpdate()})},handleSave:function(){var a=this;this.$refs.addForm.validate(function(e){e&&(a.saveLoading=!0,"edit"===a.mode?a.updateRecord():a.createRecord())})},createRecord:function(){var a=this,t=this;Object(s["a"])(this.addForm).then(function(e){t.$message.success("已创建成功1条数据集"),o["a"].$emit("reloadTypeData"),a.$refs.crm.close()}).catch(function(e){a.$message.warning(e.message)}).finally(function(){t.saveLoading=!1})},updateRecord:function(){var a=this,t=this;Object(s["f"])(this.addForm).then(function(e){t.$message.success("已修改成功1条数据集"),o["a"].$emit("reloadTypeData"),a.$refs.crm.close()}).catch(function(e){a.$message.warning(e.message)}).finally(function(){t.saveLoading=!1})},handleCancel:function(){this.$refs.crm.close()}}},c=r,m=t("2877"),u=Object(m["a"])(c,n,i,!1,null,null,null);a["default"]=u.exports},e370:function(e,a,t){"use strict";t("5ade")}}]);