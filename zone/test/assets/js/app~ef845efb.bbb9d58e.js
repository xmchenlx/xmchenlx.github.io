(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app~ef845efb"],{"0327":function(t,e,a){"use strict";a.r(e);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"ModalReportAudit"}},[a("c-resizable-modal",{ref:"crm",attrs:{title:"报表审核1",modalWidth:"90%"}},[a("c-query-form-table",{attrs:{tableColumns:e.tableColumns,tableData:e.tableData,searchParams:e.searchParams,needTableCheckList:!0,selectTableKeys:e.selectTableKeys},on:{selectTableKeysChangeFromQFT:e.selectTableKeysChangeFromQFT,reloadData:e.reloadData},scopedSlots:e._u([{key:"rstatus",fn:function(t){return a("span",{class:0==t.data.rstatus?"text-green":"textRed"},[e._v(" ●"+e._s(0==t.data.rstatus?"校验通过":"校验不通过")+" ")])}},{key:"rnode",fn:function(t){return a("span",{class:0==t.data.rnode?"":"textRed"},[e._v(" ●"+e._s(0==t.data.rnode?"已处理":"待处理")+" ")])}}])},[a("div",{attrs:{slot:"functionBtnBox"},slot:"functionBtnBox"},[a("div",{attrs:{id:"btn-box"}},[a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:e.confirmLoading,disabled:e.selectTableKeys.length<1},on:{click:e.auditReportItem}},[e._v("审核")])],1)]),a("span",{attrs:{slot:"tableActionBox"},slot:"tableActionBox"},[a("a-button",{attrs:{type:"link",size:"small"}},[e._v("查看")]),a("a-button",{attrs:{type:"link",size:"small"}},[e._v("通过")]),a("a-button",{attrs:{type:"link",size:"small"}},[e._v("不通过")]),a("a-button",{attrs:{type:"link",size:"small"}},[e._v("流程")])],1)])],1)],1)},s=[],i={data:function(){return{isModalVisible:!1,confirmLoading:!1,tableData:{content:[{rdq:"20210101",rindex:1,rname:"NCRS1",rorg:"故宫路分行",rstatus:0,rnode:1},{rdq:"20210101",rindex:1,rname:"NCRS1",rorg:"故宫路分行",rstatus:1,rnode:2}],pageSize:10,pageNum:1,totalPages:1,totalSize:2},tableColumns:[{title:"档期",dataIndex:"rdq",key:"rdq"},{title:"报表编号",dataIndex:"rindex",key:"rindex"},{title:"报表名称",dataIndex:"rname",key:"rname"},{title:"机构",dataIndex:"rorg",key:"rorg"},{title:"状态",dataIndex:"rstatus",key:"rstatus",scopedSlots:{customRender:"rstatus"}},{title:"节点",dataIndex:"rnode",key:"rnode",scopedSlots:{customRender:"rnode"}}],searchParams:[{name:"rorg",label:"机构",type:"select",selectList:[{key:"a",value:"机构A"},{key:"b",value:"机构B"}]}],selectTableKeys:[]}},methods:{reloadData:function(t){},openModal:function(){this.$refs.crm.open()},handleCancel:function(){this.isModalVisible=!1},auditReportItem:function(){var t=this;this.confirmLoading=!0,setTimeout(function(){t.confirmLoading=!1},1e3)},selectTableKeysChangeFromQFT:function(t){this.selectTableKeys=t}}},r=i,o=a("2877"),l=Object(o["a"])(r,n,s,!1,null,null,null);e["default"]=l.exports},"0b5e":function(t,e,a){},1213:function(t,e,a){"use strict";a.r(e);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"report-detail"},[a("div",{staticClass:"detail-box general-box-shadow"},[e._m(0),a("c-query-form-table",{attrs:{tableColumns:e.tableColumns,tableData:e.tableData,searchParams:e.searchParams,needTableCheckList:!0,selectTableKeys:e.selectTableKeys},on:{selectTableKeysChangeFromQFT:e.selectTableKeysChangeFromQFT,reloadData:e.reloadData},scopedSlots:e._u([{key:"tableActionBox",fn:function(t){return a("span",{},[a("a-button",{attrs:{type:"link",size:"small"}},[e._v("查看详情")]),a("a-button",{attrs:{type:"link",size:"small"}},[e._v("修改")]),a("a-button",{attrs:{type:"link",size:"small"}},[e._v("删除")])],1)}}])},[a("div",{attrs:{slot:"functionBtnBox"},slot:"functionBtnBox"},[a("div",{attrs:{id:"btn-box"}},[a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check"}},[e._v("原始数据")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check"}},[e._v("查看发文")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"plus"}},[e._v("新增")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"edit"}},[e._v("修改")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"delete"}},[e._v("删除")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"fund"}},[e._v("数据沿用")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"slack"}},[e._v("校验")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"import"}},[e._v("报表报告")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"export"}},[e._v("导出")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"export"}},[e._v("导入")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"export"}},[e._v("提交")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"export"}},[e._v("批注信息")])],1),a("div",{staticClass:"table-head-action-box",attrs:{id:"tableHeadActionBox"}},[e._v(" 校验未通过： "),a("span",{staticClass:"stastic-span"},[e._v("10条")]),a("a-button",{attrs:{type:"primary",size:"small"},on:{click:e.openValidDetailPage}},[e._v("校验详情")])],1)])])],1)])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bread"},[a("span",[t._v("当前位置：中国银保监会 / 新版客户风险 / 报表详情")])])}],i=a("e8ac"),r=a("8b69"),o={data:function(){return{selectTableKeys:[],searchParams:[{name:"custname",label:"客户名称",type:"input"},{name:"custcode",label:"客户代码",type:"input"}],tableColumns:[{title:"客户名称",key:"custname",dataIndex:"custname"},{title:"客户代码",key:"custcode",dataIndex:"custcode"},{title:"p1",key:"p1",dataIndex:"p1"},{title:"p2",key:"p2",dataIndex:"p2"},{title:"p3",key:"p3",dataIndex:"p3"},{title:"p4",key:"p4",dataIndex:"p4"},{title:"p5",key:"p5",dataIndex:"p5"},{title:"p6",key:"p6",dataIndex:"p6"},{title:"p7",key:"p7",dataIndex:"p7"},{title:"p8",key:"p8",dataIndex:"p8"},{title:"p9",key:"p9",dataIndex:"p9"},{title:"p10",key:"p10",dataIndex:"p10"}],tableData:{content:[{id:0,custname:"名称",custcode:"代码",p1:"测试1",p2:"测试2",p3:"测试3"},{id:0,custname:"名称",custcode:"代码",p1:"测试1",p2:"测试2",p3:"测试3"},{id:0,custname:"名称",custcode:"代码",p1:"测试1",p2:"测试2",p3:"测试3"},{id:0,custname:"名称",custcode:"代码",p1:"测试1",p2:"测试2",p3:"测试3"},{id:0,custname:"名称",custcode:"代码",p1:"测试1",p2:"测试2",p3:"测试3"},{id:0,custname:"名称",custcode:"代码",p1:"测试1",p2:"测试2",p3:"测试3"},{id:0,custname:"名称",custcode:"代码",p1:"测试1",p2:"测试2",p3:"测试3"},{id:0,custname:"名称",custcode:"代码",p1:"测试1",p2:"测试2",p3:"测试3"},{id:0,custname:"名称",custcode:"代码",p1:"测试1",p2:"测试2",p3:"测试3"}],pageSize:10,pageNum:1,totalPages:1,totalSize:1},currentPathBread:[],isBreadbarShow:!1}},components:{BreadBar:i["a"]},methods:{reloadData:function(t){},selectTableKeysChangeFromQFT:function(t){this.selectTableKeys=t},loadGlobalSettings:function(){if(null!=localStorage.getItem("globalSettings")){var t=JSON.parse(localStorage.getItem("globalSettings"));Object(r["changeAntdTheme"])(t.proThemeColor)}},jointCustomRoute:function(t){var e=this.currentPathBread,a=[];for(var n in e)a.push({meta:{title:e[n]["meta"]["title"]},path:e[n].path});return a.push({meta:{title:t},path:"/cbrcReport/newCustomerRisk/detail/validDetailPage"}),a},openValidDetailPage:function(){var t="测试标题",e=this.jointCustomRoute(t),a=this.$router.resolve({name:"validDetailPageOfcbrsReportDetail"});localStorage.setItem("openValidPage",JSON.stringify(e)),window.open(a.href,"_blank")}},mounted:function(){var t=this;this.loadGlobalSettings(),this.currentPathBread=JSON.parse(localStorage.getItem("openCbrsRD")),this.$nextTick(function(){t.isBreadbarShow=!0})}},l=o,c=(a("f8c0"),a("2877")),d=Object(c["a"])(l,n,s,!1,null,"170b3ab6",null);e["default"]=d.exports},"136f":function(t,e,a){"use strict";a.r(e);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"modalExportStastic"}},[a("c-resizable-modal",{ref:"crm",attrs:{title:"导出统计"}},[a("a-form-model",{attrs:{model:e.form,layout:"inline"}},[a("a-form-model-item",{attrs:{label:"机构"}},[a("a-select",{staticClass:"formInput",attrs:{placeholder:"选择机构"},model:{value:e.form.org,callback:function(t){e.$set(e.form,"org",t)},expression:"form.org"}},[a("a-select-option",{attrs:{value:"总行"}},[e._v("总行 ")]),a("a-select-option",{attrs:{value:"分行"}},[e._v(" 分行 ")])],1)],1),a("a-form-model-item",{attrs:{label:"档期日期"}},[a("a-input",{staticClass:"formInput",model:{value:e.form.dq,callback:function(t){e.$set(e.form,"dq",t)},expression:"form.dq"}})],1),a("a-form-model-item",{attrs:{label:"对比日期"}},[a("a-input",{staticClass:"formInput",model:{value:e.form.db,callback:function(t){e.$set(e.form,"db",t)},expression:"form.db"}})],1),a("a-form-model-item",[a("a-button",{staticClass:"margin-btn",attrs:{type:"primary"}},[e._v("查询")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary"}},[e._v("重置")])],1)],1),a("div",{attrs:{id:"BoxActionArea"}},[a("div",{attrs:{id:"left"}},[a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"fund",size:"small"}},[e._v("统计")]),a("a-popconfirm",{attrs:{"ok-text":"确认","cancel-text":"取消"},on:{confirm:e.popConfirm,cancel:e.popCancel}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("p",[e._v("选择导出的类型")]),a("a-radio-group",{model:{value:e.exportType,callback:function(t){e.exportType=t},expression:"exportType"}},[a("a-radio",{attrs:{value:0}},[e._v(" 当前机构 ")]),a("a-radio",{attrs:{value:1}},[e._v(" 所有机构 ")])],1)],1),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"export",size:"small"}},[e._v("导出")])],1)],1),a("div",{attrs:{id:"right"}},[a("b",[e._v("状态：")]),a("span",{class:0==e.stasticStatus?"textRed":"text-green"},[a("a-icon",{attrs:{type:0==e.stasticStatus?"loading":"check-circle"}}),e._v(" "+e._s(0==e.stasticStatus?"统计中，请稍后查看":"统计完毕")+" ")],1)])]),a("div",{attrs:{id:"stasticBox"}},[a("div",{attrs:{id:"tableInfo"}},[a("c-muti-func-table",{attrs:{tableData:e.tabData.tab,tableColumns:e.tabColumn.tab,needCheckList:!1,needActionBox:!1},on:{reloadData:e.tabData.reload}})],1),a("div",{attrs:{id:"indicatorsInfo"}},[a("c-muti-func-table",{attrs:{tableData:e.tabData.indicators,tableColumns:e.tabColumn.indicators,needCheckList:!1,needActionBox:!1},on:{reloadData:e.tabData.reload}})],1)])],1)],1)},s=[],i={data:function(){return{stasticStatus:0,form:{org:"",dq:"",db:""},exportType:0,tabColumn:{tab:[{title:"表",key:"tabname",dataIndex:"tabname"},{title:"描述",key:"desc",dataIndex:"desc"},{title:"对比日期条数",key:"bd",dataIndex:"bd"},{title:"档期日期条数",key:"ts",dataIndex:"ts"}],indicators:[{title:"指标名称",key:"indiname",dataIndex:"indiname"},{title:"对比日期额度",key:"dbrqed",dataIndex:"dbrqed"},{title:"档期日期额度",key:"dqrqed",dataIndex:"dqrqed"},{title:"增长率",key:"zzl",dataIndex:"zzl"}]},tabData:{tab:[{tabname:"1.1",desc:"授信情况",bd:"",ts:""},{tabname:"1.2",desc:"集团客户授信拆分",bd:"",ts:""},{tabname:"1.3",desc:"贷款名称",bd:"",ts:""},{tabname:"1.4",desc:"持有企业债券名称",bd:"",ts:""},{tabname:"1.5",desc:"持有企业股权名称",bd:"",ts:""},{tabname:"1.6",desc:"表外业务明细",bd:"",ts:""},{tabname:"1.7",desc:"同业客户业务明细",bd:"",ts:""},{tabname:"2.1",desc:"集团基本情况",bd:"",ts:""},{tabname:"2.2",desc:"高管及重要关联人信息",bd:"",ts:""},{tabname:"2.3",desc:"成员名单",bd:"",ts:""},{tabname:"2.4",desc:"实际控制人",bd:"",ts:""},{tabname:"2.5",desc:"关联集团信息",bd:"",ts:""},{tabname:"3.1",desc:"单一法人基本情况",bd:"",ts:""},{tabname:"3.2",desc:"法定代表人、高管及重要关联人信息",bd:"",ts:""},{tabname:"3.3",desc:"重要股东及主要关联企业",bd:"",ts:""},{tabname:"4.1",desc:"对公客户担保情况统计",bd:"",ts:""},{tabname:"5.1",desc:"个人贷款违约情况统计",bd:"",ts:""},{tabname:"6.1",desc:"个人违约贷款担保统计",bd:"",ts:""}],indicators:[{indiname:"授信额度",dbrqed:"",dqrqed:"",zzl:""},{indiname:"贷款余额",dbrqed:"",dqrqed:"",zzl:""},{indiname:"持有债券余额",dbrqed:"",dqrqed:"",zzl:""},{indiname:"持有股份余额",dbrqed:"",dqrqed:"",zzl:""},{indiname:"其他表内信用风险资产余额",dbrqed:"",dqrqed:"",zzl:""},{indiname:"表外业务余额",dbrqed:"",dqrqed:"",zzl:""},{indiname:"现有业务余额占用授信额度",dbrqed:"",dqrqed:"",zzl:""},{indiname:"尚可使用授信额度",dbrqed:"",dqrqed:"",zzl:""},{indiname:"贷款减值准备余额",dbrqed:"",dqrqed:"",zzl:""},{indiname:"同业业务余额之和",dbrqed:"",dqrqed:"",zzl:""},{indiname:"集团客户资产总额",dbrqed:"",dqrqed:"",zzl:""},{indiname:"集团客户负债总额",dbrqed:"",dqrqed:"",zzl:""},{indiname:"单一法人客户资产总额",dbrqed:"",dqrqed:"",zzl:""},{indiname:"单一法人客户负债总额",dbrqed:"",dqrqed:"",zzl:""},{indiname:"押品评估价值（或保证金额）",dbrqed:"",dqrqed:"",zzl:""},{indiname:"保证人保证能力上限",dbrqed:"",dqrqed:"",zzl:""},{indiname:"个人违约贷款余额",dbrqed:"",dqrqed:"",zzl:""},{indiname:"个人违约贷款押品评估价值（或保证金额）",dbrqed:"",dqrqed:"",zzl:""},{indiname:"个人违约贷款保证人保证能力上限",dbrqed:"",dqrqed:"",zzl:""}]}}},methods:{open:function(){this.$refs.crm.open()},popConfirm:function(){this.$notification["success"]({message:"导出提示",description:"这里是导出状态提示。"})},popCancel:function(){}}},r=i,o=(a("62a7"),a("2877")),l=Object(o["a"])(r,n,s,!1,null,"63728d9d",null);e["default"]=l.exports},"161a":function(t,e,a){"use strict";a("c3ad")},"19dd":function(t,e,a){},"1f41":function(t,e,a){},"30da":function(t,e,a){},"33b8":function(t,e,a){"use strict";a("19dd")},"38fb":function(t,e,a){"use strict";a("8f1b")},"3ec5":function(t,e,a){"use strict";a.r(e),a.d(e,"unlockStatusDict",function(){return s}),a.d(e,"postAuditReport",function(){return i}),a.d(e,"postSubmitReport",function(){return r}),a.d(e,"postCancelSubmitReport",function(){return o}),a.d(e,"postUnlockReport",function(){return l});var n=a("ae75"),s=[{key:"5",label:"解锁至 提交成功待审核",checkArg0:[7],checkArg1:["febd:febdreportinst:unlockReport"]},{key:"7",label:"解锁至 审核成功待报送",checkArg0:[8,10],checkArg1:["febd:febdreportinst:unlockReport"]},{key:"9",label:"解锁至 报送成功",checkArg0:[10],checkArg1:["febd:febdreportinst:unlockReport"]}];function i(t,e){var s=this;Object(n["a"])(t,e).then(function(t){s.$message.success("审核操作结果：".concat(t.msg));var e=s.tableData,a=e.pageNum,n=e.pageSize;s.$refs.ModalReportStatusConfirm.successEmit(),s.reloadData({pageNum:a,pageSize:n},{})}).catch(function(t){s.$message.error("审核提交失败：".concat(t.message))})}function r(t,e){var s=this;Object(n["h"])(t,e).then(function(t){s.$message.success("提交操作结果：".concat(t.msg));var e=s.tableData,a=e.pageNum,n=e.pageSize;s.$refs.ModalReportStatusConfirm.successEmit(),s.reloadData({pageNum:a,pageSize:n},{})}).catch(function(t){s.$message.error("提交操作失败：".concat(t.message))})}function o(t,e){var s=this;Object(n["b"])(t,e).then(function(t){s.$message.success("取消提交的操作结果：".concat(t.msg));var e=s.tableData,a=e.pageNum,n=e.pageSize;s.$refs.ModalReportStatusConfirm.successEmit(),s.reloadData({pageNum:a,pageSize:n},{})}).catch(function(t){s.$message.error("取消提交操作失败：".concat(t.message))})}function l(t,e){var s=this;Object(n["i"])(t,e).then(function(t){s.$message.success("报表解锁操作结果：".concat(t.msg));var e=s.tableData,a=e.pageNum,n=e.pageSize;s.$refs.ModalReportStatusConfirm.successEmit(),s.reloadData({pageNum:a,pageSize:n},{})}).catch(function(t){s.$message.error("报表解锁操作执行失败：".concat(t.message))})}},4126:function(t,e,a){"use strict";a("aa40")},"4a97":function(t,e,a){"use strict";a.r(e);var n=function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("div",{attrs:{id:"ModalReportAudit"}},[n("div",{staticClass:"bread"},[n("span",[a._v("当前位置："+a._s(a.currentPath))]),n("a-divider",{attrs:{type:"vertical"}}),n("span",[a._v("查阅数据类型：")]),n("a-switch",{attrs:{"checked-children":"归档","un-checked-children":"原始",loading:a.switchLoad},on:{change:a.onSwitchChange},model:{value:a.dataViewIsPigeonhole,callback:function(t){a.dataViewIsPigeonhole=t},expression:"dataViewIsPigeonhole"}})],1),a.pageLoadFail?n("a-result",{attrs:{status:"500",title:"报表加载失败","sub-title":"请联系系统管理员或重新加载报表。错误原因："+a.errorText},scopedSlots:a._u([{key:"extra",fn:function(){return[n("a-button",{attrs:{type:"primary",icon:"redo"},on:{click:a.initTable}},[a._v("尝试重新加载")])]},proxy:!0}],null,!1,2479116154)}):n("a-spin",{attrs:{size:"large",spinning:a.loadingFlag,tip:"正在根据报表数据生成界面，请稍后......"}},[n("div",{staticClass:"drawer-tag",on:{click:a.handleOpenDrawer}},[a._v("校验批注")]),n("div",{staticClass:"main-content"},[a.tableKey.length?n("c-dynamic-query-form-table",{attrs:{loadingFlag:a.loadingFlag,searchParams:a.searchParams,needTableCheckList:!0,selectTableKeys:a.selectTableKeys,tableData:a.tableData,dataKeyName:a.tableKey,tableColumns:a.tableColumns},on:{selectTableKeysChangeFromQFT:a.selectTableKeysChangeFromQFT,formQuery:a.formQuery,reloadData:a.reloadData},scopedSlots:a._u([{key:"tableActionBox",fn:function(e){return n("span",{},[n("a-button",{staticClass:"margin-btn",attrs:{type:"link",icon:"edit"},on:{click:function(t){return a.handleEdit(e.data[a.tableKey])}}},[a._v(a._s(a.dataViewIsPigeonhole?"修 改":"查 阅"))]),a.dataViewIsPigeonhole?n("a-button",{staticClass:"margin-btn",attrs:{type:"link",icon:"delete"},on:{click:function(t){return a.handleDelete([e.data[a.tableKey]])}}},[a._v("删 除")]):a._e()],1)}}],null,!1,1710945346)},[n("div",{attrs:{slot:"functionBtnBox"},slot:"functionBtnBox"},[a.dataViewIsPigeonhole?n("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"plus"},on:{click:function(t){return a.handleCreate()}}},[a._v("新 增")]):a._e(),n("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"edit",disabled:1!==a.selectTableKeys.length},on:{click:function(t){return a.handleEdit(a.selectTableKeys[0],a.dataViewIsPigeonhole)}}},[a._v(a._s(a.dataViewIsPigeonhole?"修 改":"查 阅"))]),a.dataViewIsPigeonhole?n("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"delete",disabled:0===a.selectTableKeys.length},on:{click:function(t){return a.handleDelete(a.selectTableKeys)}}},[a._v("删 除")]):a._e(),a.dataViewIsPigeonhole?n("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"audit",disabled:a.checkBtnDisabled([5],["febd:febdreportinst:auditReport"])},on:{click:function(t){return a.handleAuditReport()}}},[a._v("审核")]):a._e(),a.dataViewIsPigeonhole?n("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",disabled:a.checkBtnDisabled([3,4,6],["febd:febdreportinst:submitReport"])},on:{click:function(t){return a.handleSubmitReport()}}},[a._v("提交")]):a._e(),a.dataViewIsPigeonhole?n("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"close",disabled:a.checkBtnDisabled([5],["febd:febdreportinst:cancelSubmitReport"])},on:{click:function(t){return a.handleCancelSubmitReport()}}},[a._v("取消提交")]):a._e(),a.dataViewIsPigeonhole?n("a-dropdown",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["febd:febdreportinst:unlockReport"],expression:"['febd:febdreportinst:unlockReport']"}],attrs:{disabled:a.checkBtnDisabled([4,5,7,9],["febd:febdreportinst:unlockReport"])}},[n("a-menu",{attrs:{slot:"overlay"},on:{click:a.handleUnlockReport},slot:"overlay"},a._l(a.unlockStatusDict,function(t){return n("a-menu-item",{key:t.key,attrs:{disabled:a.checkBtnDisabled(t.checkArg0,t.checkArg1)}},[a._v(" "+a._s(t.label)+" ")])}),1),n("a-button",{staticClass:"margin-btn",attrs:{type:"primary"}},[a._v(" 报表解锁 "),n("a-icon",{attrs:{type:"down"}})],1)],1):a._e(),n("a-dropdown",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["febd:febdreportinst:export"],expression:"['febd:febdreportinst:export']"}]},[n("a-menu",{attrs:{slot:"overlay"},on:{click:a.handleExportData},slot:"overlay"},[n("a-menu-item",{key:"2003",attrs:{disabled:!1}},[a._v(" 下载 xls文件（2003） ")]),n("a-menu-item",{key:"2007",attrs:{disabled:!1}},[a._v(" 下载 xlsx文件（2007） ")])],1),n("a-button",{staticClass:"margin-btn",attrs:{type:"primary",loading:a.isExportBtnLoad,icon:"export"}},[a._v("导出 "),n("a-icon",{attrs:{type:"down"}})],1)],1),a.dataViewIsPigeonhole?n("a-dropdown",[n("a-menu",{attrs:{slot:"overlay"},on:{click:a.handleExportTemplate},slot:"overlay"},[n("a-menu-item",{key:"2003",attrs:{disabled:!1}},[a._v(" 下载 xls文件（2003） ")]),n("a-menu-item",{key:"2007",attrs:{disabled:!1}},[a._v(" 下载 xlsx文件（2007） ")])],1),n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["febd:febdreportinst:exportTemplate"],expression:"['febd:febdreportinst:exportTemplate']"}],staticClass:"margin-btn",attrs:{type:"primary",loading:a.isExportTplBtnLoad,icon:"export"}},[a._v("导出模板 "),n("a-icon",{attrs:{type:"down"}})],1)],1):a._e(),a.dataViewIsPigeonhole?n("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"cloud-upload"},on:{click:a.handleImportFile}},[a._v("导入")]):a._e(),a.dataViewIsPigeonhole?n("a-button",{staticClass:"margin-btn",attrs:{type:"primary"},on:{click:a.handleBatchUpdate}},[a._v("批量修改")]):a._e(),a.dataViewIsPigeonhole?n("a-button",{staticClass:"margin-btn",attrs:{type:"primary"},on:{click:a.handleReInit}},[a._v("报表初始化")]):a._e()],1)]):a._e()],1)]),n("a-drawer",{attrs:{placement:"right",width:"30%",closable:!1,visible:a.drawerVisible},on:{close:a.onDrawerClose}},[n("a-tabs",{attrs:{"default-active-key":"1"}},[n("a-tab-pane",{key:"1",attrs:{tab:"批注"}},[n("notation",{attrs:{items:a.reportInstInfo.reportInstInfo}})],1),n("a-tab-pane",{key:"2",attrs:{tab:"校验信息","force-render":""}},[a._v(" Content of Tab Pane 2 ")])],1)],1),n("ModalReportInfoDetail",{ref:"ModalReportInfoDetail",on:{reloadData:a.reloadData}}),n("file-import-modal",{ref:"FileImportModal",on:{readToPostFile:a.readToPostFile,uploadSuccess:a.uploadSuccess}}),n("ModalReportStatusConfirm",{ref:"ModalReportStatusConfirm",on:{initRequest:a.initRequest}}),n("ModalBatchUpdate",{ref:"ModalBatchUpdate",attrs:{reportInstInfo:a.reportInstInfo}})],1)},s=[],r=a("1da1"),o=a("5530"),l=(a("96cf"),a("ac1f"),a("1276"),a("7db0"),a("d3b7"),a("d81d"),a("99af"),a("fb6a"),a("c740"),a("7558")),i=a("a3a1"),c=a("9bc4"),d=a("3ec5"),u=a("9e9f"),m=a("c28a"),p=a("e871"),f=a("ed08"),b={data:function(){return{errorText:"",unlockStatusDict:d["unlockStatusDict"],dataViewIsPigeonhole:!0,switchLoad:!1,isModalVisible:!1,confirmLoading:!1,currentPath:"",drawerVisible:!1,item:{sid:""},isExportBtnLoad:!1,isExportTplBtnLoad:!1,searchParams:[],pageLoadFail:!1,loadingFlag:!0,tableKey:[],reportInstInfo:{},tableData:{pageSize:30,pageNum:1,content:[],totalSize:0,totalPages:0},queryParam:{},selectTableKeys:[],tableColumns:[],originalData:[],rowSpanGroup:[],colSpanGroup:[]}},created:function(){var t=this.$route.path.split("/");t=t[t.length-1],this.item=JSON.parse(localStorage.getItem("reportInfo#".concat(t))),this.init()},methods:{handleReInit:function(){var s=this,t=this.reportInstInfo.reportInst.sid;Object(l["n"])(t).then(function(t){s.$message.success("初始化结果：初始化".concat(t.data,"项数据"));var e=s.tableData,a=e.pageNum,n=e.pageSize;s.reloadData({pageNum:a,pageSize:n},{})}).catch(function(t){s.$message.error("初始化失败。".concat(t.message))})},handleBatchUpdate:function(){var t=Object(o["a"])({},this.item);this.$refs.ModalBatchUpdate.open(t)},postAuditReport:function(t,e){var s=this;Object(l["b"])(t,e).then(function(t){s.$message.success("审核操作结果：".concat(t.msg));var e=s.tableData,a=e.pageNum,n=e.pageSize;s.$refs.ModalReportStatusConfirm.successEmit(),s.reloadData({pageNum:a,pageSize:n},{})}).catch(function(t){s.$refs.ModalReportStatusConfirm.statusInit(),s.$message.error("审核提交失败：".concat(t.message))})},postSubmitReport:function(t,e){var s=this;Object(l["o"])(t,e).then(function(t){s.$message.success("提交操作结果：".concat(t.msg));var e=s.tableData,a=e.pageNum,n=e.pageSize;s.$refs.ModalReportStatusConfirm.successEmit(),s.reloadData({pageNum:a,pageSize:n},{})}).catch(function(t){s.$refs.ModalReportStatusConfirm.statusInit(),s.$message.error("提交操作失败：".concat(t.message))})},postCancelSubmitReport:function(t,e){var s=this;Object(l["d"])(t,e).then(function(t){s.$message.success("取消提交的操作结果：".concat(t.msg));var e=s.tableData,a=e.pageNum,n=e.pageSize;s.$refs.ModalReportStatusConfirm.successEmit(),s.reloadData({pageNum:a,pageSize:n},{})}).catch(function(t){s.$refs.ModalReportStatusConfirm.statusInit(),s.$message.error("取消提交操作失败：".concat(t.message))})},postUnlockReport:function(t,e){var s=this;Object(l["p"])(t,e).then(function(t){s.$message.success("报表解锁操作结果：".concat(t.msg));var e=s.tableData,a=e.pageNum,n=e.pageSize;s.$refs.ModalReportStatusConfirm.successEmit(),s.reloadData({pageNum:a,pageSize:n},{})}).catch(function(t){s.$refs.ModalReportStatusConfirm.statusInit(),s.$message.error("报表解锁操作执行失败：".concat(t.message))})},initRequest:function(t,e,a){var n=this.reportInstInfo.reportInst.sid,s={msg:e,reportInstSid:[n],runStat:t},i=this.item.moduleSid;switch(a){case"audit":this.postAuditReport(i,s);break;case"submit":this.postSubmitReport(i,s);break;case"cancelSubmit":this.postCancelSubmitReport(i,s);break;case"unlock":this.postUnlockReport(i,s);break}},handleUnlockReport:function(e){var t={yes:{label:"确 定",stat:e.key},no:{hidden:!0}},a=this.unlockStatusDict.find(function(t){return t.key===e.key}),n=a.label;this.$refs.ModalReportStatusConfirm.open(this.item.reportNo,t,n,"unlock")},checkBtnDisabled:function(t,e){return Object(f["d"])(t,e,[this.item.sid],[this.reportInstInfo.reportInst])},handleAuditReport:function(){var t=this.checkBtnDisabled([5],["febd:febdreportinst:auditReport"]);if(t)return this.$message.error("您选择的数据里包含着无权限的报表信息，无法继续操作。"),!1;var e={yes:{label:"通 过",stat:"7"},no:{label:"驳 回",stat:"6"}};this.$refs.ModalReportStatusConfirm.open(this.item.reportNo,e,"审核","audit")},handleCancelSubmitReport:function(){var t=this.checkBtnDisabled([5],["febd:febdreportinst:cancelSubmitReport"]);if(t)return this.$message.error("您选择的数据里包含着无该按钮权限的报表，无法继续操作。"),!1;var e={yes:{label:"确认取消提交",stat:"4"},no:{hidden:!0}};this.$refs.ModalReportStatusConfirm.open(this.item.reportNo,e,"取消提交","cancelSubmit")},handleSubmitReport:function(){var t=this.checkBtnDisabled([3,4,6],["febd:febdreportinst:submitReport"]);if(t)return this.$message.error("您选择的数据里包含着无提交按钮权限的报表，无法继续操作。"),!1;var e={yes:{label:"提 交",stat:"5"},no:{hidden:!0}};this.$refs.ModalReportStatusConfirm.open(this.item.reportNo,e,"报表提交","submit")},readToPostFile:function(t){var a=this,e=this.item.moduleSid,n={moduleSid:e,reportInstSid:[this.reportInstInfo.reportInst.sid]};Object(l["m"])(n,t).then(function(t){var e=Object(f["l"])(t);a.$refs.FileImportModal.showImportResult(t,e)}).catch(function(t){a.$refs.FileImportModal.showImportResult(t.message,!1)})},uploadSuccess:function(){this.handleLoadData({},this.queryParam)},handleImportFile:function(){this.$refs.FileImportModal.open()},handleExportData:function(t){this.exportData(t.key)},handleExportTemplate:function(t){this.exportTemplate(t.key)},exportData:function(s){var i=this;return Object(r["a"])(regeneratorRuntime.mark(function t(){var e,a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e=i,i.isExportBtnLoad=!0,a=i.item.moduleSid,n={fileType:s,dataType:"field",moduleSid:a},Object(l["f"])(n,{reportInstSid:[i.reportInstInfo.reportInst.sid]}).then(function(t){Object(f["f"])(t)}).catch(function(t){e.$message.error("文件下载失败。".concat(t.message))}).finally(function(){e.isExportBtnLoad=!1});case 5:case"end":return t.stop()}},t)}))()},exportTemplate:function(t){var e=this,a=this.info.dataType;this.isExportTplBtnLoad=!0;var n=this.item.moduleSid,s={fileType:t,dataType:a,moduleSid:n};Object(l["g"])(s,{reportInstSid:[this.reportInstInfo.reportInst.sid]}).then(function(t){Object(f["f"])(t)}).catch(function(t){e.$message.error("文件下载失败。".concat(t.message))}).finally(function(){e.isExportTplBtnLoad=!1})},onSwitchChange:function(){this.initTable()},handleOpenDrawer:function(){this.drawerVisible=!0},onDrawerClose:function(){this.drawerVisible=!1},handleDelete:function(e){this.$createElement;0===e.length&&this.$message.warning("请选择1项及以上的数据项才能进行删除操作。");var t=this;this.$confirm({title:"报表数据项删除确认",content:function(t){return t("div",["即将以",t("span",{class:"textRed"},["不可恢复的物理删除方式"]),"删除",e.length,"项数据，确认删除？"])},onOk:function(){t.handleConfirmOk(e)}})},handleConfirmOk:function(e){var a=this,n=this.tableKey,s=this,i=[];e.map(function(t){t=t.split(",");var e={};for(var a in n)e[n[a]]=t[a];i.push(e)});var t=new FormData;t.append("DEL_KEY_FLAG",JSON.stringify(i)),Object(l["e"])(t,this.item.sid).then(function(t){s.reloadData({}),s.$message.success("选中".concat(e.length,"项数据，成功删除").concat(t.data,"项")),a.selectTableKeys=[]}).catch(function(t){a.$message.error("请求错误："+t.message)})},handleCreate:function(){var t=Object(o["a"])({},this.item);this.$refs.ModalReportInfoDetail.open({item:t,mode:"add",view:"field"})},handleEdit:function(t){var n=this,e={},a=this.tableData.content.find(function(e){var a=[];return n.tableKey.map(function(t){a.push(e[t])}),a.toString()===t}),s=this.tableKey;s.map(function(t){e[t]=a[t]});var i=Object(o["a"])(Object(o["a"])({},this.item),{},{keyParam:e,tableKey:s});this.$refs.ModalReportInfoDetail.open({item:i,mode:"edit",view:this.dataViewIsPigeonhole?"field":"fieldOriginal"})},init:function(){this.currentPath=this.item.logicPath,this.initTable()},setCol0AsSpecific:function(t){for(var e=t.slice(),a=0;a<e.length;a++){var n=e[a],s=n.hidden;s||("null"==n.title&&(n.title=""),n.key=n.dataIndex=n.sid,n.children&&n.children.length>0&&(n.children=this.setCol0AsSpecific(n.children)))}return e},initTable:function(){var n=this;return Object(r["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=n,t.prev=1,n.switchLoad=!0,n.loadingFlag=!0,t.next=6,[];case 6:return n.selectTableKeys=t.sent,t.next=9,[];case 9:return n.tableData.content=t.sent,t.next=12,[];case 12:return n.tableKey=t.sent,t.next=15,n.dataViewIsPigeonhole;case 15:if(!t.sent){t.next=19;break}t.t0="field",t.next=20;break;case 19:t.t0="fieldOriginal";case 20:return a=t.t0,t.next=23,{dataType:a,reportInstSid:n.item.sid};case 23:return n.info=t.sent,t.next=26,n.getReportInfo(n.item.sid);case 26:return t.next=28,Object(l["l"])(a,n.item.sid).then(function(t){t.data.map(function(t){t.keyFlag&&n.tableKey.push(t.key)}),e.tableColumns=t.data});case 28:return t.next=30,n.loadTableData({},{dataType:a,reportInstSid:n.item.sid});case 30:return t.next=32,Object(l["j"])(a,n.item.sid,n.item.moduleSid).then(function(t){e.searchParams=t.data});case 32:return t.next=34,n.$forceUpdate();case 34:n.loadingFlag=!1,n.switchLoad=!1,n.pageLoadFail=!1,t.next=43;break;case 39:t.prev=39,t.t1=t["catch"](1),n.errorText=t.t1.message,n.pageLoadFail=!0;case 43:case"end":return t.stop()}},t,null,[[1,39]])}))()},selectTableKeysChangeFromQFT:function(t){this.selectTableKeys=t},formQuery:function(t){this.queryParam=t,this.loadTableData({},t)},reloadData:function(t,e){if("undefined"!==typeof t&&null!==t&&"{}"!==JSON.stringify(t)){var a=t.pageNum,n=t.pageSize;this.tableData.pageNum=a,this.tableData.pageSize=n}var s=this.tableData,i=s.pageNum,r=s.pageSize;"undefined"!=typeof e&&null!=e&&"{}"!=JSON.stringify(e)||(e=this.queryParam),this.getReportInfo(this.item.sid),this.loadTableData({pageNum:i,pageSize:r},e)},convertCellStyle:function(e,t,a,n){var s=this.tableColumns.findIndex(function(t){return t.dataIndex===e}),i={};t.map(function(t){i[t.key]=t.value});var r=function(){return{style:i}};this.tableColumns[s]["customCell"]=r},convertCellMerge:function(s,t){var i=this,e=this.tableColumns.findIndex(function(t){return t.dataIndex===s});if(-1===e)return!1;var a=function(t,e,a){var n={children:t,attrs:{}};return i.rowSpanGroup[s].map(function(t){t.index===a&&(n.attrs.rowSpan=t.rowSpan)}),i.colSpanGroup[s].map(function(t){t.index===a&&(n.attrs.colSpan=t.colSpan)}),n};return this.tableColumns[e]["customRender"]=a,!0},loadTableData:function(t,e){var s=this;"{}"===JSON.stringify(t)&&(t.pageNum=this.tableData.pageNum,t.pageSize=this.tableData.pageSize),e.dataType||(e.dataType=this.info.dataType),e.reportInstSid||(e.reportInstSid=this.info.reportInstSid),this.selectTableKeys=[],this.loadingFlag=!0,Object(l["k"])(t.pageNum,t.pageSize,e).then(function(t){var e=s.tableData,a=e.totalSize,n=e.pageSize;s.$nextTick(function(){s.tableData.content=t.rows,s.tableData.totalSize=t.total,s.tableData.totalPages=Math.ceil(a/n)})}).finally(function(){s.loadingFlag=!1})},getReportInfo:function(n){var s=this;return new Promise(function(e,a){var t=s.item.moduleSid;Object(l["i"])(t,n).then(function(t){s.reportInstInfo=t.data,e()}).catch(function(t){a(t)})})}},components:{FileImportModal:m["default"],ModalReportInfoDetail:p["default"],ModalReportStatusConfirm:c["default"],notation:i["default"],ModalBatchUpdate:u["default"]}},h=b,g=(a("161a"),a("2877")),y=Object(g["a"])(h,n,s,!1,null,"018a3515",null);e["default"]=y.exports},"4bae":function(t,e,a){"use strict";a.r(e);var n=function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("div",{staticClass:"white-back-box ",attrs:{id:"newCustomerRisk"}},[a.pageLoadFlag?n("div",[n("a-skeleton"),n("a-skeleton"),n("a-skeleton"),n("a-skeleton")],1):n("c-tree-with-self",{attrs:{treeData:a.treeData,selectedKeys:a.selectedKeys,treeMenuList:a.treeMenuList},on:{rightClickMenuItem:a.rightClickMenuItem,onTreeSelect:a.onTreeSelect}},[n("div",{staticStyle:{width:"100%"},attrs:{slot:"selfContent"},slot:"selfContent"},[n("c-query-form-table",{attrs:{tableColumns:a.tableColumns,tableData:a.tableData,searchParams:a.searchParams,needTableCheckList:!0,selectTableKeys:a.selectTableKeys,loadingFlag:a.loadingFlag,qftHandleQuery:a.qftHandleQuery},on:{selectTableKeysChangeFromQFT:a.selectTableKeysChangeFromQFT,reloadData:a.reloadData,formQuery:a.formQuery},scopedSlots:a._u([{key:"tableActionBox",fn:function(e){return n("span",{},[n("a-button",{attrs:{type:"link",size:"small"},on:{click:function(t){return a.openReportDetail(e.data)}}},[a._v("查看")]),n("c-more-btn-collect",[n("span",{attrs:{slot:"content"},slot:"content"},[n("a-button",{attrs:{type:"link",size:"small"},on:{click:function(t){return a.openValidDetail(e.data)}}},[a._v("校验")]),n("a-divider",{attrs:{type:"vertical"}}),n("a-button",{attrs:{type:"link",size:"small"}},[a._v("流程")]),n("a-divider",{attrs:{type:"vertical"}}),n("a-button",{attrs:{type:"link",size:"small"}},[a._v("协办")]),n("a-divider",{attrs:{type:"vertical"}}),n("a-button",{attrs:{type:"link",size:"small"}},[a._v("转办")])],1)])],1)}}])},[n("div",{attrs:{slot:"functionBtnBox"},slot:"functionBtnBox"},[a.noticeList.length>0?n("div",{attrs:{id:"noticeBox"}},[n("text-merry-go-round",{staticStyle:{float:"left"},attrs:{lists:a.noticeList}})],1):a._e(),n("div",{attrs:{id:"btn-box"}},[n("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"audit",disabled:a.checkBtnDisabled([5],["febd:febdreportinst:auditReport"])},on:{click:function(t){return a.handleAuditReport(a.selectTableKeys)}}},[a._v("审核")]),n("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",disabled:a.checkBtnDisabled([3,4,6],["febd:febdreportinst:submitReport"])},on:{click:function(t){return a.handleSubmitReport(a.selectTableKeys)}}},[a._v("提交")]),n("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"close",disabled:a.checkBtnDisabled([5],["febd:febdreportinst:cancelSubmitReport"])},on:{click:function(t){return a.handleCancelSubmitReport(a.selectTableKeys)}}},[a._v("取消提交")]),n("a-dropdown",{attrs:{disabled:a.checkBtnDisabled([4,5,7,9],["febd:febdreportinst:unlockReport"])}},[n("a-menu",{attrs:{slot:"overlay"},on:{click:a.handleUnlockReport},slot:"overlay"},a._l(a.unlockStatusDict,function(t){return n("a-menu-item",{key:t.key,attrs:{disabled:a.checkBtnDisabled(t.checkArg0,t.checkArg1)}},[a._v(" "+a._s(t.label)+" ")])}),1),n("a-button",{staticClass:"margin-btn",attrs:{type:"primary"}},[a._v(" 报表解锁 "),n("a-icon",{attrs:{type:"down"}})],1)],1),n("a-dropdown",{attrs:{disabled:0===a.selectTableKeys.length}},[n("a-menu",{attrs:{slot:"overlay"},on:{click:a.handleExportData},slot:"overlay"},[n("a-menu-item",{key:"2003",attrs:{disabled:!1}},[a._v(" 下载 xls文件（2003） ")]),n("a-menu-item",{key:"2007",attrs:{disabled:!1}},[a._v(" 下载 xlsx文件（2007） ")])],1),n("a-button",{staticClass:"margin-btn",attrs:{type:"primary",loading:a.isExportBtnLoad,icon:"export"}},[a._v("导出 "),n("a-icon",{attrs:{type:"down"}})],1)],1),n("a-dropdown",{attrs:{disabled:0===a.selectTableKeys.length}},[n("a-menu",{attrs:{slot:"overlay"},on:{click:a.handleExportTemplate},slot:"overlay"},[n("a-menu-item",{key:"2003",attrs:{disabled:!1}},[a._v(" 下载 xls文件（2003） ")]),n("a-menu-item",{key:"2007",attrs:{disabled:!1}},[a._v(" 下载 xlsx文件（2007） ")])],1),n("a-button",{staticClass:"margin-btn",attrs:{type:"primary",loading:a.isExportTplBtnLoad,icon:"export"}},[a._v("导出模板 "),n("a-icon",{attrs:{type:"down"}})],1)],1),n("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"fund"},on:{click:a.openExportStasticModal}},[a._v("导出统计")])],1)])])],1)]),n("ModalReportAudit",{ref:"ModalReportAudit"}),n("ModalExportStastic",{ref:"ModalExportStastic"}),a._e(),n("ModalReportStatusConfirm",{ref:"ModalReportStatusConfirm",on:{initRequest:a.initRequest}})],1)},s=[],i=a("5530"),o=a("1da1"),r=(a("96cf"),a("d3b7"),a("d81d"),a("c740"),a("7db0"),a("160b")),l=a("0327"),c=a("136f"),d=a("9bc4"),u=a("ae75"),m=(a("3ec5"),a("ed08")),p=a("4a97"),f={components:{ModalReportAudit:l["default"],ModalExportStastic:c["default"],TextMerryGoRound:r["default"],ModalReportDetail:p["default"],ModalReportStatusConfirm:d["default"]},data:function(){return{issue:1,loadingFlag:!1,pageLoadFlag:!0,isExportBtnLoad:!1,moduleSid:"",orgInfo:{main_orgSid:"",orgTree:[]},unlockStatusDict:[{key:"5",label:"解锁至 提交成功待审核",checkArg0:[7],checkArg1:["febd:febdreportinst:unlockReport"]},{key:"7",label:"解锁至 审核成功待报送",checkArg0:[8,10],checkArg1:["febd:febdreportinst:unlockReport"]},{key:"9",label:"解锁至 报送成功",checkArg0:[10],checkArg1:["febd:febdreportinst:unlockReport"]}],tableColumns:[{dataIndex:"sid",key:"sid",title:"编号"},{dataIndex:"reportSid",key:"reportSid",title:"报表编号"},{dataIndex:"reportNo",key:"reportNo",title:"报表名称"},{dataIndex:"orgSid",key:"orgSid",title:"机构号"},{dataIndex:"freqCode",key:"freqCode",title:"报表频度"},{dataIndex:"issue",key:"issue",title:"实例化日期"},{dataIndex:"deleteType",key:"deleteType",title:"删除类型"},{dataIndex:"runStat",key:"runStat",title:"状态"},{dataIndex:"maker",key:"maker",title:"填表人"},{dataIndex:"checker",key:"checker",title:"复核人"},{dataIndex:"manager",key:"manager",title:"负责人"},{dataIndex:"parentSid",key:"parentSid",title:"父报表编号"},{dataIndex:"issueField",key:"issueField",title:"日期"},{dataIndex:"orgField",key:"orgField",title:"机构"},{dataIndex:"forcibleFlag",key:"forcibleFlag",title:"强制提交标记"},{dataIndex:"reportingFlag",key:"reportingFlag",title:"报送标记"}],tableData:{pageSize:10,pageNum:1,totalPages:1,totalSize:1,content:[]},routeParams:{},searchParams:[],treeData:[],selectedKeys:[],treeMenuList:[{menuKey:"insert",menuName:"新增",icon:"plus"},{menuKey:"edit",menuName:"修改",icon:"edit"},{menuKey:"delete",menuName:"删除",icon:"delete"}],isExportTplBtnLoad:!1,selectTableKeys:[],noticeList:["厦门银行厦门市故宫路支行的报表已提交，请你尽快审核！ ","XXX的报表已提交，请尽快查看！","最长字符最长字符最长字符最长字符最长字符最长字符最长字符最长字符最长字符最长字符最长字符最长字符最长字符最长字符最长字符最长字符最长字符最长字符"]}},mounted:function(){var t=this.routeParams=this.$route.query;if(!t.menuSid)return this.$message.error("模块进入失败，请从界面重新选择"),this.$router.push({path:"/peoplesBankOfChina"}),!1;this.init()},methods:{checkBtnDisabled:function(t,e){return Object(m["d"])(t,e,this.selectTableKeys,this.tableData.content)},handleExportData:function(t){0==this.selectTableKeys.length?this.$message.warning("该操作需要先选择表格数据！"):this.exportData(t.key)},handleExportTemplate:function(t){0==this.selectTableKeys.length?this.$message.warning("该操作需要先选择表格数据！"):this.exportTemplate(t.key)},exportData:function(t){var e=this;this.isExportBtnLoad=!0;var a=this.moduleSid,n={fileType:t,dataType:"field",moduleSid:a};Object(u["c"])(n,{reportInstSid:this.selectTableKeys}).then(function(t){Object(m["f"])(t)}).catch(function(t){e.$message.error("文件下载失败。".concat(t.message))}).finally(function(){e.isExportBtnLoad=!1})},getReportInstInfo:function(){},exportTemplate:function(t){var e=this;this.isExportTplBtnLoad=!0;var a=this.moduleSid,n={fileType:t,dataType:"field",moduleSid:a};Object(u["d"])(n,{reportInstSid:this.selectTableKeys}).then(function(t){Object(m["f"])(t)}).catch(function(t){e.$message.error("文件下载失败。".concat(t.message))}).finally(function(){e.isExportTplBtnLoad=!1})},init:function(){var l=this;return Object(o["a"])(regeneratorRuntime.mark(function t(){var e,a,n,s,i,r,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=l.routeParams,a=l.issue=e.issue?e.issue:"null",l.pageLoadFlag=!0,t.next=5,l.loadTreeData(a);case 5:return t.next=7,l.getOrgInfo();case 7:return n=l.orgInfo=t.sent,t.t0={name:"sid",label:"编号",type:"input"},t.t1={name:"reportSid",label:"报表编号",type:"input"},t.t2={name:"reportNo",label:"报表名称",type:"input"},t.next=13,n.orgTree;case 13:return t.t3=t.sent,t.next=16,n.main_orgSid;case 16:return t.t4=t.sent,t.t5={name:"orgSid",label:"机构号",type:"tree",treeData:t.t3,defaultValue:t.t4},t.t6={name:"freqCode",label:"报表频度",type:"select",selectList:[{key:"Y",value:"年"},{key:"H",value:"半年"},{key:"S",value:"季"},{key:"M",value:"月"},{key:"T",value:"旬"},{key:"W",value:"周"},{key:"D",value:"日"}]},t.t7={name:"issueField",label:"日期",type:"input"},t.t8={name:"orgField",label:"机构",type:"input"},t.t9={name:"issue",label:"实例化日期",type:"input",defaultValue:l.issue},t.t10={name:"runStat",label:"状态",type:"input"},t.t11={name:"maker",label:"填表人",type:"input"},t.t12={name:"checker",label:"复核人",type:"input"},t.t13={name:"manager",label:"负责人",type:"input"},t.t14={name:"parentSid",label:"父报表编号",type:"input"},t.t15={name:"deleteType",label:"删除类型",type:"select",selectList:[{key:"0",value:"物理删除"},{key:"0",value:"逻辑删除"}]},t.t16={name:"sort",label:"顺序号",type:"input"},t.t17={name:"forcibleFlag",label:"强制提交标记",type:"select",selectList:[{key:"0",value:"否"},{key:"1",value:"是"}]},t.t18={name:"reportingFlag",label:"报送标记",type:"select",selectList:[{key:"0",value:"否"},{key:"1",value:"是"}]},s=[t.t0,t.t1,t.t2,t.t5,t.t6,t.t7,t.t8,t.t9,t.t10,t.t11,t.t12,t.t13,t.t14,t.t15,t.t16,t.t17,t.t18],t.next=34,s;case 34:return l.searchParams=t.sent,i=l.tableData,r=i.pageNum,o=i.pageSize,l.loadData({pageNum:r,pageSize:o},{}),t.next=39,!1;case 39:l.pageLoadFlag=t.sent;case 40:case"end":return t.stop()}},t)}))()},getOrgInfo:function(){var e=this,t=this.moduleSid,a="all",n="null";return Object(u["f"])(t,a,n).then(function(t){return t.data}).catch(function(t){return e.$message.error("获取机构信息失败：".concat(t.message)),{}})},handleUnlockDetail:function(){},handleAuditReport:function(t){var e=this.checkBtnDisabled([5],["febd:febdreportinst:auditReport"]);if(e)return this.$message.error("您选择的数据里包含着无权限的报表信息，无法继续操作。"),!1;var a={yes:{label:"通 过",stat:"7"},no:{label:"驳 回",stat:"6"}};this.$refs.ModalReportStatusConfirm.open(this.findReportName(t),a,"审核","audit")},handleCancelSubmitReport:function(t){var e=this.checkBtnDisabled([5],["febd:febdreportinst:cancelSubmitReport"]);if(e)return this.$message.error("您选择的数据里包含着无该按钮权限的报表，无法继续操作。"),!1;var a={yes:{label:"确认取消提交",stat:"4"},no:{hidden:!0}};this.$refs.ModalReportStatusConfirm.open(this.findReportName(t),a,"取消提交","cancelSubmit")},handleSubmitReport:function(t){var e=this.checkBtnDisabled([3,4,6],["febd:febdreportinst:submitReport"]);if(e)return this.$message.error("您选择的数据里包含着无提交按钮权限的报表，无法继续操作。"),!1;var a={yes:{label:"提 交",stat:"5"},no:{hidden:!0}};this.$refs.ModalReportStatusConfirm.open(this.findReportName(t),a,"报表提交","submit")},initRequest:function(t,e,a){var n=this.selectTableKeys,s={msg:e,reportInstSid:n,runStat:t},i=this.moduleSid;switch(a){case"audit":this.postAuditReport(i,s);break;case"submit":this.postSubmitReport(i,s);break;case"cancelSubmit":this.postCancelSubmitReport(i,s);break;case"unlock":this.postUnlockReport(i,s);break}},findReportName:function(t){var a=[],n=this.tableData.content;return t.map(function(e){var t=n.findIndex(function(t){return t.sid===e});-1!==t&&a.push(n[t].reportNo)}),a.toString().replaceAll(",","、")},handleUnlockReport:function(e){var t=this.selectTableKeys,a={yes:{label:"确 定",stat:e.key},no:{hidden:!0}},n=this.unlockStatusDict.find(function(t){return t.key===e.key}),s=n.label;this.$refs.ModalReportStatusConfirm.open(this.findReportName(t),a,s,"unlock")},postAuditReport:function(t,e){var s=this;Object(u["a"])(t,e).then(function(t){s.$message.success("审核操作结果：".concat(t.msg));var e=s.tableData,a=e.pageNum,n=e.pageSize;s.$refs.ModalReportStatusConfirm.successEmit(),s.reloadData({pageNum:a,pageSize:n},{})}).catch(function(t){s.$message.error("审核提交失败：".concat(t.message))}).finally(function(){s.$refs.ModalReportStatusConfirm.statusInit()})},postSubmitReport:function(t,e){var s=this;Object(u["h"])(t,e).then(function(t){s.$message.success("提交操作结果：".concat(t.msg));var e=s.tableData,a=e.pageNum,n=e.pageSize;s.$refs.ModalReportStatusConfirm.successEmit(),s.reloadData({pageNum:a,pageSize:n},{})}).catch(function(t){s.$message.error("提交操作失败：".concat(t.message))}).finally(function(){s.$refs.ModalReportStatusConfirm.statusInit()})},postCancelSubmitReport:function(t,e){var s=this;Object(u["b"])(t,e).then(function(t){s.$message.success("取消提交的操作结果：".concat(t.msg));var e=s.tableData,a=e.pageNum,n=e.pageSize;s.$refs.ModalReportStatusConfirm.successEmit(),s.reloadData({pageNum:a,pageSize:n},{})}).catch(function(t){s.$message.error("取消提交操作失败：".concat(t.message))}).finally(function(){s.$refs.ModalReportStatusConfirm.statusInit()})},postUnlockReport:function(t,e){var s=this;Object(u["i"])(t,e).then(function(t){s.$message.success("报表解锁操作结果：".concat(t.msg));var e=s.tableData,a=e.pageNum,n=e.pageSize;s.$refs.ModalReportStatusConfirm.successEmit(),s.reloadData({pageNum:a,pageSize:n},{})}).catch(function(t){s.$message.error("报表解锁操作执行失败：".concat(t.message))}).finally(function(){s.$refs.ModalReportStatusConfirm.statusInit()})},handleCreate:function(){},rightClickMenuItem:function(t,e){switch(e){case"insert":this.handleAdd(t);break;case"edit":this.handleEdit(t);break;case"delete":this.handleDelete([t]);break}},onTreeSelect:function(t,e){var a=e.node.dataRef.param,n={sidType:a};"report"==a?n.reportNumber=e.node._props.dataRef.code:n["sid"]=t[0],this.formQuery(n)},formQuery:function(t){for(var e in t)void 0===t[e]&&delete t[e];this.loadData({},t)},loadTreeData:function(t){var e=this;return Object(u["e"])(this.routeParams.menuSid,t).then(function(t){e.issue=t.data.issue,e.moduleSid=t.data.moduleSid,e.treeData=t.data.tree})},reloadData:function(t){if("{}"!==JSON.stringify(t)){var e=t.pageNum,a=t.pageSize;this.tableData.pageNum=e,this.tableData.pageSize=a}this.loadData({},{})},loadData:function(s,i){var r=this;return Object(o["a"])(regeneratorRuntime.mark(function t(){var e,a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.loadTreeData(i.issue?i.issue:r.issue);case 2:r.selectTableKeys=[],"{}"===JSON.stringify(s)&&(s.pageNum=r.tableData.pageNum,s.pageSize=r.tableData.pageSize),r.loadingFlag=!0,e=r.$route.query.menuSid,a=r.issue,n=r.orgInfo.main_orgSid,Object(u["g"])(s.pageNum,s.pageSize,i,e,a,n).then(function(t){r.tableData.content=t.rows,r.tableData.totalSize=t.total,r.tableData.totalPages=Math.ceil(r.tableData.totalSize/r.tableData.pageSize)}).finally(function(){r.loadingFlag=!1});case 9:case"end":return t.stop()}},t)}))()},selectTableKeysChangeFromQFT:function(t){this.selectTableKeys=t},openAuditModal:function(){this.$refs.ModalReportAudit.openModal()},openExportStasticModal:function(){this.$refs.ModalExportStastic.open()},jointCustomRoute:function(t){var e=this.$route.matched,a=[];for(var n in e)a.push({meta:{title:e[n]["meta"]["title"]},path:e[n].path});return a.push({meta:{title:t},path:"/cbrcReport/newCustomerRisk/detail"}),a},getLogicPath:function(t){var e=this.$route.matched,a="";for(var n in e)n>0&&(a+=" / "),a+=e[n].meta.title;return a+=" / ".concat(t),a},openReportDetail:function(t){var e=this.$router.resolve({path:"/report/"+t.sid}),a=this.getLogicPath(t.reportNo),n=this.moduleSid;localStorage.setItem("reportInfo#".concat(t.sid),JSON.stringify(Object(i["a"])(Object(i["a"])({},t),{},{logicPath:a,moduleSid:n}))),window.open(e.href,"_blank")},openValidDetail:function(t){var e=t.rname,a=(this.jointCustomRoute(e),this.$router.resolve({path:"/cbrcReport/list/newCustomerRisk/"+t.sid}));window.open(a.href,"_blank")},qftHandleQuery:function(){this.$message.info("触发了父组件的查询功能！！！！")}}},b=f,h=(a("88f7"),a("2877")),g=Object(h["a"])(b,n,s,!1,null,"4a3aa0f4",null);e["default"]=g.exports},"4fd3":function(t,e,a){"use strict";a("1f41")},"51c0":function(t,e,a){"use strict";a("e3a7")},"62a7":function(t,e,a){"use strict";a("0b5e")},"7e2a":function(t,e,a){},"7ffd":function(t,e,s){"use strict";s.r(e);var a=function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("div",{attrs:{id:"MenuPreviewBox"}},[n("div",{staticClass:"card-box"},a._l(a.cardBoxData,function(t,e){return n("div",{key:"cbi_"+e,staticClass:"card"},[n("div",{staticClass:"flex-box"},[n("h3",{attrs:{id:"title"}},[n("router-link",{attrs:{to:{path:t.path}}},[a._v(" "+a._s(t.meta.title)+" ")])],1),n("ul",{staticClass:"data-list"},[n("li",[a._v(" 版本："),n("b",[a._v(a._s(t.ver?"v"+t.ver:"-"))])]),n("li",[a._v(" 档期："),n("b",[a._v(a._s(t.dq?t.dq:"-"))])])])]),n("div",{staticClass:"flex-box"},[n("div",[n("img",{staticStyle:{width:"80%",height:"50%"},attrs:{src:s("bcb2")}}),n("a-button",{attrs:{type:"link"},on:{click:function(t){return a.openBulletinBoard()}}},[a._v("公告栏")])],1),n("ul",{staticClass:"data-list"},[n("li",[a._v(" 我的报表 ： "),n("span",{staticClass:"data-count"},[a._v(a._s(t.stasticData?t.stasticData[0]:"?")+" 张")])]),n("li",[a._v(" 已处理报表 ： "),n("span",{staticClass:"data-count"},[a._v(a._s(t.stasticData?t.stasticData[1]:"?")+" 张")])]),n("li",[a._v(" 待处理报表 ： "),n("span",{staticClass:"data-count"},[a._v(a._s(t.stasticData?t.stasticData[2]:"?")+" 张")])])])]),n("a-button",{attrs:{type:"link"}},[a._v("一键转办")]),n("a-button",{attrs:{type:"link"},on:{click:function(t){return a.openRefsModel("RegulatorsPost")}}},[a._v("发文查看")]),n("a-button",{attrs:{type:"link"}},[a._v("流程查看")]),n("a-button",{attrs:{type:"link"},on:{click:function(t){return a.openRefsModel("ModalIndicator")}}},[a._v("指标/口径")])],1)}),0)])},n=[],i={data:function(){return{}},props:{cardBoxData:{type:Array,default:function(){return[]}}},methods:{openPage:function(t){this.$router.push({path:t})}},mounted:function(){}},r=i,o=(s("51c0"),s("2877")),l=Object(o["a"])(r,a,n,!1,null,"6a97c570",null);e["default"]=l.exports},"88f7":function(t,e,a){"use strict";a("30da")},"8f1b":function(t,e,a){},"9bc4":function(t,e,a){"use strict";a.r(e);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("c-resizable-modal",{ref:"crm",attrs:{title:e.desc+"确认",modalWidth:"30%"}},[a("p",[e._v("即将对报表【"+e._s(e.names)+"】进行"),a("b",[e._v(e._s(e.desc))]),e._v("操作，请确认后输入备注提交。")]),a("a-textarea",{attrs:{autoSize:{minRows:10,maxRows:20},maxLength:4e3},model:{value:e.auditMsg,callback:function(t){e.auditMsg=t},expression:"auditMsg"}}),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{on:{click:e.handleCancel}},[e._v("取 消")]),e.statusGroup.no.hidden&&1==e.statusGroup.no.hidden?e._e():a("a-button",{attrs:{type:"danger",icon:"close",loading:e.btnLoad.no,disabled:e.isProcess},on:{click:function(t){return e.handleAudit("no",e.statusGroup.no.stat)}}},[e._v(e._s(e.statusGroup.no.label))]),a("a-button",{attrs:{type:"primary",loading:e.btnLoad.yes,disabled:e.isProcess,icon:"check"},on:{click:function(t){return e.handleAudit("yes",e.statusGroup.yes.stat)}}},[e._v(e._s(e.statusGroup.yes.label))])],1)],1)},s=[],i={data:function(){return{auditMsg:"",names:"",statusGroup:{yes:{},no:{}},desc:"",btnLoad:{yes:!1,no:!1},isProcess:!1}},methods:{open:function(t,e,a,n){this.$refs.crm.open(),this.names=t,this.typeName=n,this.desc=a,this.auditMsg="",this.statusGroup=e},handleAudit:function(t,e){this.btnLoad[t]=!0,this.isProcess=!0,this.$emit("initRequest",e,this.auditMsg,this.typeName)},successEmit:function(){this.btnLoad={yes:!1,no:!1},this.isProcess=!1,this.handleCancel()},statusInit:function(){this.btnLoad={yes:!1,no:!1},this.isProcess=!1},handleCancel:function(){this.$refs.crm.close()}}},r=i,o=a("2877"),l=Object(o["a"])(r,n,s,!1,null,null,null);e["default"]=l.exports},"9e9f":function(t,e,a){"use strict";a.r(e);var n=function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("c-resizable-modal",{ref:"crm",attrs:{title:"批量修改操作",modalWidth:"40%"}},[n("a-spin",{attrs:{spinning:a.spin}},[n("div",{staticClass:"batch-update-box"},[n("div",{staticClass:"info-typing-box"},[n("div",[n("a-form-model",{ref:"addForm",attrs:{layout:"horizontal",model:a.changedTemp,rules:a.addFormRule}},[a._l(a.formInfo,function(t){return[n("varietyFormItem",{directives:[{name:"show",rawName:"v-show",value:a.currentItem.name==t.name,expression:"currentItem.name == item.name"}],key:t.name,attrs:{param:t,searchForm:a.changedTemp[t.name],searchFormName:t.name},on:{searchFormChange:a.searchFormChange}})]})],2),a._v(" "+a._s(a.currentItem)+" "+a._s(a.addFormRule[a.currentItem.name])+" ")],1)],1),n("div",{staticClass:"table-title-box"},[n("vue-scroll",{staticClass:"out-tree-box",attrs:{ops:a.scrollOps}},a._l(a.formInfo,function(e){return n("div",{key:e.name,class:["title-card",{"card-focus":a.currentItem.name==e.name}],on:{click:function(t){return a.selectCard(e)}}},[n("h3",[n("a-badge",{attrs:{dot:a.changedTemp[e.name]&&a.changedTemp[e.name].length>=0}}),a._v(" "+a._s(e.label)+" ")],1)])}),0)],1)])]),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("a-button",{on:{click:a.handleCancel}},[a._v("取 消")]),n("a-button",{attrs:{type:"primary",loading:a.savingFlag,icon:"check"},on:{click:a.handleSave}},[a._v("保 存")])],1)],1)},s=[],i=(a("d3b7"),a("7db0"),a("b0c0"),a("99af"),a("4de4"),a("7558")),r=a("2901"),o=a.n(r),l=a("ca81"),c=a("ed08"),d=a("7373"),u={data:function(){return{savingFlag:!1,spin:!0,reportInstSid:"",tableHead:[],changedTemp:{},addFormRule:{},currentItem:{},formInfo:[],scrollOps:l["a"]}},props:["reportInstInfo"],components:{varietyFormItem:d["default"],vueScroll:o.a},methods:{handleSave:function(){var e=this,a=(this.$createElement,this);this.$refs.addForm.validate(function(t){t?e.$confirm({title:"批量变更确认",content:function(t){return t("div",[t("p",["//TODO 校验结果永真，要检查"]),t("p",["本次变更的列项信息如下。"]),e.showChangeInfo(),t("p",["该操作会将报表中的数据全部替换为上述输入的值，确认操作？"])])},onOk:function(){a.saveBatchUpdate()},onCancel:function(){}}):e.$message.warning("所变更的列包含不通过的信息，请检查。")})},saveBatchUpdate:function(){var e=this;this.savingFlag=!0;var t=this.reportInstInfo.reportInst.sid,a=Object(c["e"])(this.changedTemp);Object(i["c"])(t,a).then(function(t){e.$message.success("批量修改操作结果：".concat(t.msg)),e.$refs.crm.close()}).catch(function(t){e.$message.error("批量操作失败：".concat(t.message))}).finally(function(){e.savingFlag=!1})},getReportInfo:function(n){var s=this;return new Promise(function(e,a){var t=s.item.moduleSid;Object(i["i"])(t,n).then(function(t){s.reportInstInfo=t.data,e()}).catch(function(t){a(t)})})},showChangeInfo:function(){var n=this,s=this.$createElement,i=this.changedTemp,r=[],t=function(e){var t=n.formInfo.find(function(t){return t.name==e}),a="".concat(t.label,"(").concat(e,")变更为：").concat(i[e]);r.push(s("li",null,a))};for(var e in i)t(e);return s("ul",null,r)},selectCard:function(t){this.currentItem=t},searchFormChange:function(t,e){this.changedTemp[e]=t,this.$forceUpdate()},getColumnLabel:function(t){var e="???";return-1==t?e:this.tableHead[t].title},open:function(t){var e=this;this.$refs.crm.open();var a=t.moduleSid;this.spin=!0,Object(i["h"])("field","add",t.sid,a).then(function(t){e.formInfo=t.data.detailSearchParamsList.filter(function(t){return!t.disable&&!t.hidden}),e.addFormRule=t.data.addFormRule,e.changedTemp={},e.$forceUpdate(),e.spin=!1}).catch(function(t){e.spin="error",e.$message.error("表单界面加载失败。原因：".concat(t.message))}).finally(function(){e.spin=!1})},handleCancel:function(){this.$refs.crm.close()}}},m=u,p=(a("38fb"),a("f6088"),a("2877")),f=Object(p["a"])(m,n,s,!1,null,"65247d97",null);e["default"]=f.exports},a3a1:function(t,e,a){"use strict";a.r(e);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-timeline",e._l(e.items,function(t){return a("a-timeline-item",{key:t.sid,attrs:{color:e.isNegativeStatus(t.infoType)?"red":"blue"}},[a("p",[a("span",{class:[e.isNegativeStatus(t.infoType)?"text-red ":""," status-text "]},[e._v(e._s(e.statusConvert(t.infoType)))])]),a("p",{staticClass:"time"},[a("a-icon",{attrs:{type:"clock-circle"}}),e._v(" "+e._s(t.createTime)+" ")],1),t.info.length?a("p",[e._v("备注："+e._s(t.info))]):e._e()])}),1)],1)},s=[],i={data:function(){return{timelineItems:[]}},props:["items"],methods:{statusConvert:function(t){switch(t){case"1":return"数据未生成";case"2":return"数据生成待校验";case"3":return"校验失败";case"4":return"校验成功待提交";case"5":return"提交成功待审核";case"6":return"审核驳回";case"7":return"审核成功待报送";case"8":return"报送失败";case"9":return"报送成功待归档";case"10":return"归档成功";default:return"未约定的状态"}},isNegativeStatus:function(e){var t=["3","6","8"],a=t.some(function(t){return t==e});return a}}},r=i,o=(a("4fd3"),a("2877")),l=Object(o["a"])(r,n,s,!1,null,"862689be",null);e["default"]=l.exports},aa40:function(t,e,a){},bb98:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"valid-detail-page"},[a("div",{staticClass:"detail-box general-box-shadow",attrs:{id:"validDetailPage"}},[a("div",{staticClass:"bread"},[a("span",[t._v("当前位置：")]),t.isBreadbarShow?a("BreadBar",{attrs:{selfsroute:t.currentPathBread,disabled:!0}}):t._e()],1),a("a-tabs",{staticClass:"clear-vertical-margin",attrs:{"default-active-key":"1"},on:{change:t.tabsCallback}},[a("a-tab-pane",{key:"1",attrs:{tab:"确定性校验"}}),a("a-tab-pane",{key:"2",attrs:{tab:"行内提示性校验","force-render":""}}),a("a-tab-pane",{key:"3",attrs:{tab:"行内一致性校验"}})],1),a("c-query-form-table",{attrs:{tableColumns:t.tableColumns,tableData:t.tableData,searchParams:t.searchParams,needTableCheckList:!0,selectTableKeys:t.selectTableKeys},on:{selectTableKeysChangeFromQFT:t.selectTableKeysChangeFromQFT}},[a("div",{attrs:{slot:"functionBtnBox"},slot:"functionBtnBox"},[a("div",{attrs:{id:"btn-box"}},[a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check"}},[t._v("校验")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check"}},[t._v("修改")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"plus"}},[t._v("校验下发")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"edit"}},[t._v("校验回收")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"delete"}},[t._v("删除")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"export"}},[t._v("导出")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"export"}},[t._v("导入")])],1)]),a("span",{attrs:{slot:"tableActionBox"},slot:"tableActionBox"},[a("a-button",{attrs:{type:"link",size:"small"}},[t._v("查看详情")]),a("a-button",{attrs:{type:"link",size:"small"}},[t._v("修改")]),a("a-button",{attrs:{type:"link",size:"small"}},[t._v("删除")])],1)])],1)])},s=[],i=a("e8ac"),r=a("8b69"),o={data:function(){return{selectTableKeys:[],searchParams:[{name:"queueIndex",label:"批次号",type:"input"},{name:"validRuleName",label:"校验规则名称",type:"input"},{name:"validResult",label:"校验结果",type:"select",selectList:[{key:"0",value:"校验未通过"},{key:"1",value:"已通过"},{key:"2",value:"全部"}]}],tableColumns:[{title:"批次号",key:"queueIndex",dataIndex:"queueIndex"},{title:"校验编号",key:"validIndex",dataIndex:"validIndex"},{title:"校验名称",key:"validName",dataIndex:"validName"},{title:"校验结果",key:"validResult",dataIndex:"validResult"},{title:"p3",key:"p3",dataIndex:"p3"}],tableData:{content:[],pageSize:10,pageNum:1,totalPages:0,totalSize:0},currentPathBread:[],isBreadbarShow:!1}},components:{BreadBar:i["a"]},methods:{tabsCallback:function(){},loadGlobalSettings:function(){if(null!=localStorage.getItem("globalSettings")){var t=JSON.parse(localStorage.getItem("globalSettings"));Object(r["changeAntdTheme"])(t.proThemeColor)}},jointCustomRoute:function(){},selectTableKeysChangeFromQFT:function(t){this.selectTableKeys=t}},mounted:function(){var t=this;this.loadGlobalSettings(),this.currentPathBread=JSON.parse(localStorage.getItem("openCbrsRD")),this.$nextTick(function(){t.isBreadbarShow=!0})}},l=o,c=(a("33b8"),a("2877")),d=Object(c["a"])(l,n,s,!1,null,"5258e5be",null);e["default"]=d.exports},c3ad:function(t,e,a){},d9e9:function(t,e,a){},e3a7:function(t,e,a){},e871:function(t,e,a){"use strict";a.r(e);var n=function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("div",[n("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"75%",maskClosable:!1,title:a.formType+a.reportName}},["error"==a.spin?n("a-empty"):n("a-spin",{staticClass:"content",attrs:{spinning:a.spin,tip:"正在获取报表信息项，请稍后..."}},[n("a-form-model",{ref:"addForm",attrs:{model:a.addForm,labelCol:{span:6},wrapperCol:{span:18},rules:a.addFormRule}},[n("a-row",{attrs:{gutter:20}},[a._l(a.formInfo,function(e,t){return[n("a-col",{key:t,attrs:{span:12}},[e.hidden?a._e():n("a-form-model-item",{attrs:{label:e.label,labelCol:{span:5},prop:e.name,wrapperCol:{span:19}}},["input"===e.type?n("a-input",{attrs:{disabled:e.disable},model:{value:a.addForm[e.name],callback:function(t){a.$set(a.addForm,e.name,t)},expression:"addForm[item.name]"}}):"tree"===e.type?n("a-tree-select",{staticStyle:{width:"100%"},attrs:{"show-search":"","tree-node-filter-prop":"title",disabled:e.disable,"dropdown-style":{maxHeight:"400px",overflow:"auto"},placeholder:"下拉选择上级编号","allow-clear":"","tree-data":a.appendValueToTree(e.treeData)},model:{value:a.addForm[e.name],callback:function(t){a.$set(a.addForm,e.name,t)},expression:"addForm[item.name]"}}):"date"===e.type?n("a-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:e.disable,showTime:e.dataFormat&&e.dataFormat.indexOf("H")?{format:e.dataFormat.split(" ")[1]}:null,format:e.dataFormat?e.dataFormat:"YYYY-MM-DD",valueFormat:e.dataFormat?e.dataFormat:"YYYY-MM-DD"},model:{value:a.addForm[e.name],callback:function(t){a.$set(a.addForm,e.name,t)},expression:"addForm[item.name]"}}):"select"===e.type&&e.hasOwnProperty("selectList")&&e.selectList.length>0?[n("a-select",{staticClass:"form-input",attrs:{allowClear:"","default-value":e.default?"sel_"+e.default:"sel_"+e.selectList[0].key},model:{value:a.addForm[e.name],callback:function(t){a.$set(a.addForm,e.name,t)},expression:"addForm[item.name]"}},a._l(e.selectList,function(t,e){return n("a-select-option",{key:"sel_"+e,attrs:{value:t.key}},[a._v(a._s(t.value)+" ")])}),1)]:a._e()],2)],1)]})],2)],1)],1),n("div",{directives:[{name:"show",rawName:"v-show",value:!1===a.spin,expression:"spin === false"}],attrs:{slot:"footer"},slot:"footer"},[n("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:a.handleCancel}},[a._v("取 消")]),"查看"!==a.formType?n("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:a.saveLoading},on:{click:a.handleSave}},[a._v(a._s("edit"===a.mode?"保存修改":"创 建"))]):a._e()],1)],1)],1)},s=[],r=a("5530"),i=(a("d3b7"),a("25f0"),a("498a"),a("caad"),a("2532"),a("7bec")),o=a("ed08"),l=a("7558"),c=(a("f5ef"),i["a"].SHOW_PARENT),d={data:function(){return{mode:"add",formType:"",spin:!1,treeData:[],SHOW_PARENT:c,isModalVisible:!1,saveLoading:!1,formInfo:[],addForm:{},tempForm:{},addFormRule:{},reportName:"",reportInfo:{},tableKey:[]}},mounted:function(){},methods:{appendValueToTree:o["c"],projectSearchFilterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0},isComponentShow:function(t,e){if("all"===t){for(var a in e){var n=this.addForm.menuType===e[a].toString();if(n)return!0}return!1}if("edit"===t)return t===this.mode},getDefaultValue:function(){return{sid:"",menuCode:"",menuName:"",menuTitle:"",parentSid:"",menuType:"1",link:"0",menuProperties:"1",routingAddress:"",routingParam:"",componentPath:"",permissions:"",cache:"0",sort:"",visible:"0",status:"0",icon:"",creatorSid:"",createTime:"",editorSid:"",updateTime:"",remark:""}},init:function(){this.addForm={},this.tempForm={},this.addFormRule={},this.formInfo={}},open:function(e){var a=this;"fieldOriginal"===e.view?this.formType="查看":"edit"==e.mode?this.formType="修改":this.formType="新增",this.init();var t="edit"===e.mode?e.item.keyParam:{};this.reportName="edit"===e.mode?e.item.logicPath.substring(e.item.logicPath.lastIndexOf("/")+1).trim():"",this.spin=!0,Object(l["h"])(e.view,e.mode,e.item.sid,e.item.moduleSid,t).then(function(t){a.formInfo=t.data.detailSearchParamsList,a.addFormRule=t.data.addFormRule,"edit"===e.mode&&(a.tempForm=Object(r["a"])({},t.data.formData),a.addForm=t.data.formData),a.$forceUpdate(),a.spin=!1}).catch(function(t){a.spin="error",a.$message.error("表单界面加载失败。原因：".concat(t.message))}),this.mode=e.mode,this.reportInfo=e.item,this.$refs.crm.open()},handleSave:function(){var s=this,i=this;this.$refs.addForm.validate(function(t){if(t){var e=i.addForm,a={};for(var n in e)(n.includes("KEY_FLAG")||s.addForm[n]!==s.tempForm[n])&&(a[n]=e[n]);a=Object(o["e"])(Object(r["a"])({},a)),s.saveLoading=!0,"add"==s.mode?s.create(a):s.edit(a)}})},edit:function(t){var e=this;Object(l["q"])(t,this.reportInfo.sid).then(function(t){e.$message.success("更新请求结果：".concat(t.data)),e.$emit("reloadData"),e.$refs.crm.close()}).catch(function(t){e.$message.error("请求异常：",t.message)}).finally(function(){e.saveLoading=!1})},create:function(t){var e=this;Object(l["a"])(t,this.reportInfo.sid).then(function(t){if(!Object(o["l"])(t))throw new Error(t.msg);e.$message.success("数据已新增"),e.$refs.crm.close(),e.$emit("reloadData")}).catch(function(t){e.$message.error("创建失败。"+t.message)}).finally(function(){e.saveLoading=!1})},handleCancel:function(){this.$refs.crm.close()},selectedIcon:function(t){this.addForm.icon=t}}},u=d,m=(a("4126"),a("2877")),p=Object(m["a"])(u,n,s,!1,null,"41c81d51",null);e["default"]=p.exports},f6088:function(t,e,a){"use strict";a("d9e9")},f8c0:function(t,e,a){"use strict";a("7e2a")}}]);