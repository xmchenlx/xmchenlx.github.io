(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app~11aa7348"],{"08fe":function(e,t,a){"use strict";a.r(t);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"75%",title:("insert"==t.mode?"新增":"编辑")+"权限"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("a-spin",{attrs:{spinning:t.spin}},[a("a-form-model",{ref:"addForm",attrs:{model:t.addForm,labelCol:{span:6},wrapperCol:{span:18},rules:t.addFormRule}},[a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"菜单编号",prop:"menuCode"}},[a("a-input",{model:{value:t.addForm.menuCode,callback:function(e){t.$set(t.addForm,"menuCode",e)},expression:"addForm.menuCode"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"菜单名称",prop:"menuName"}},[a("a-input",{model:{value:t.addForm.menuName,callback:function(e){t.$set(t.addForm,"menuName",e)},expression:"addForm.menuName"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"菜单提示",prop:"menuTitle"}},[a("a-input",{model:{value:t.addForm.menuTitle,callback:function(e){t.$set(t.addForm,"menuTitle",e)},expression:"addForm.menuTitle"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"父菜单编号",prop:"parentSid"}},[a("a-input",{model:{value:t.addForm.parentSid,callback:function(e){t.$set(t.addForm,"parentSid",e)},expression:"addForm.parentSid"}})],1)],1)],1),a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"菜单类型",prop:"menuType"}},[a("a-select",{staticStyle:{width:"100%"},model:{value:t.addForm.menuType,callback:function(e){t.$set(t.addForm,"menuType",e)},expression:"addForm.menuType"}},[a("a-select-option",{attrs:{value:"1"}},[t._v(" 目录 ")]),a("a-select-option",{attrs:{value:"2"}},[t._v(" 菜单 ")]),a("a-select-option",{attrs:{value:"3"}},[t._v(" 项目 ")]),a("a-select-option",{attrs:{value:"4"}},[t._v(" 按钮 ")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"权限类型",prop:"userType"}},[a("a-select",{staticStyle:{width:"100%"},model:{value:t.addForm.userType,callback:function(e){t.$set(t.addForm,"userType",e)},expression:"addForm.userType"}},[a("a-select-option",{attrs:{value:"0"}},[t._v(" 系统权限 ")]),a("a-select-option",{attrs:{value:"1"}},[t._v(" 第三方系统 ")])],1)],1)],1)],1),a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"权限昵称",prop:"nickName"}},[a("a-input",{model:{value:t.addForm.nickName,callback:function(e){t.$set(t.addForm,"nickName",e)},expression:"addForm.nickName"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"权限电子邮箱",prop:"email"}},[a("a-input",{model:{value:t.addForm.email,callback:function(e){t.$set(t.addForm,"email",e)},expression:"addForm.email"}})],1)],1)],1),t._e(),a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"手机号码",prop:"tel"}},[a("a-input",{model:{value:t.addForm.tel,callback:function(e){t.$set(t.addForm,"tel",e)},expression:"addForm.tel"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"电话号码",prop:"phone"}},[a("a-input",{model:{value:t.addForm.phone,callback:function(e){t.$set(t.addForm,"phone",e)},expression:"addForm.phone"}})],1)],1)],1),a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"权限性别",prop:"sex"}},[a("a-radio-group",{attrs:{name:"radioGroup"},model:{value:t.addForm.sex,callback:function(e){t.$set(t.addForm,"sex",e)},expression:"addForm.sex"}},[a("a-radio",{attrs:{value:"0"}},[t._v(" 女 ")]),a("a-radio",{attrs:{value:"1"}},[t._v(" 男 ")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"状态",prop:"status"}},[a("a-radio-group",{attrs:{name:"radioGroup"},model:{value:t.addForm.status,callback:function(e){t.$set(t.addForm,"status",e)},expression:"addForm.status"}},[a("a-radio",{attrs:{value:"0"}},[t._v(" 正常 ")]),a("a-radio",{attrs:{value:"1"}},[t._v(" 停用 ")])],1)],1)],1)],1),a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},["edit"==t.mode?a("a-form-model-item",{attrs:{label:"删除标志",prop:"delFlag"}},[a("a-radio-group",{attrs:{name:"radioGroup","default-value":0},model:{value:t.addForm.delFlag,callback:function(e){t.$set(t.addForm,"delFlag",e)},expression:"addForm.delFlag"}},[a("a-radio",{attrs:{value:"0"}},[t._v(" 存在 ")]),a("a-radio",{attrs:{value:"1"}},[t._v(" 删除 ")])],1)],1):t._e()],1),a("a-col",{attrs:{span:12}},["edit"==t.mode?a("a-form-model-item",{attrs:{label:"密码错误次数",prop:"pwdERRORfrequency"}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{disabled:""},model:{value:t.addForm.pwdERRORfrequency,callback:function(e){t.$set(t.addForm,"pwdERRORfrequency",e)},expression:"addForm.pwdERRORfrequency"}})],1):t._e()],1)],1),a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},["edit"==t.mode?a("a-form-model-item",{attrs:{label:"密码失效日期",prop:"pwdExpirationDATE"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:""},model:{value:t.addForm.pwdExpirationDATE,callback:function(e){t.$set(t.addForm,"pwdExpirationDATE",e)},expression:"addForm.pwdExpirationDATE"}})],1):t._e()],1),a("a-col",{attrs:{span:12}},["edit"==t.mode?a("a-form-model-item",{attrs:{label:"权限被锁定日期",prop:"useLockedDate"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:"",allowClear:"",valueFormat:"YYYY-MM-DD HH:mm:ss",showTime:{format:"HH:mm:ss"}},model:{value:t.addForm.useLockedDate,callback:function(e){t.$set(t.addForm,"useLockedDate",e)},expression:"addForm.useLockedDate"}})],1):t._e()],1)],1),"edit"==t.mode?a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"创建者编号",prop:"creatorSid"}},[a("a-input",{attrs:{disabled:""},model:{value:t.addForm.creatorSid,callback:function(e){t.$set(t.addForm,"creatorSid",e)},expression:"addForm.creatorSid"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"创建时间",prop:"createTime"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:{format:"HH:mm:ss"},allowClear:"",valueFormat:"YYYY-MM-DD HH:mm:ss",disabled:""},model:{value:t.addForm.createTime,callback:function(e){t.$set(t.addForm,"createTime",e)},expression:"addForm.createTime"}})],1)],1)],1):t._e(),"edit"==t.mode?a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"修改者编号",prop:"editorSid"}},[a("a-input",{attrs:{disabled:""},model:{value:t.addForm.editorSid,callback:function(e){t.$set(t.addForm,"editorSid",e)},expression:"addForm.editorSid"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"修改时间",prop:"updateTime"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:{format:"HH:mm:ss"},valueFormat:"YYYY-MM-DD HH:mm:ss",disabled:""},model:{value:t.addForm.updateTime,callback:function(e){t.$set(t.addForm,"updateTime",e)},expression:"addForm.updateTime"}})],1)],1)],1):t._e(),a("a-row",{attrs:{gutter:6}},[a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"备注",prop:"note",labelCol:{span:3},wrapperCol:{span:21}}},[a("a-input",{attrs:{type:"textarea"},model:{value:t.addForm.remark,callback:function(e){t.$set(t.addForm,"remark",e)},expression:"addForm.remark"}})],1)],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:t.handleCancel}},[t._v("取 消")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:t.saveLoading},on:{click:t.handleSave}},[t._v(" "+t._s("insert"==t.mode?"保存":"提交编辑")+" ")])],1)])],1)},n=[],i=(a("d3b7"),a("99af"),a("7bec")),o=a("c0c7"),s=a("f5ef"),l=i["a"].SHOW_PARENT,c={data:function(){return{mode:"read",isRead:!1,spin:!1,SHOW_PARENT:l,currentStep:0,isModalVisible:!1,saveLoading:!1,treeOrgArray:[],treeReportArray:[],treeAuthArray:[],fromRoleTreeData:[],fromOrgTreeData:[],createItems:[],addForm:{sid:"",userType:"",menuCode:"",menuName:"",nickName:"",password:"",email:"",phone:"",tel:"",sex:"0",avatarUrl:"",builtIn:"0",status:"0",delFlag:"0",pwdExpirationDATE:"9999-12-31",pwdERRORfrequency:"",useLockedDate:"",creatorSid:"",createTime:"",editorSid:"",updateTime:"",remark:""},addFormRule:{userType:[{required:!0,message:"权限类型不允许为空",trigger:"blur"}],menuCode:[{required:!0,message:"权限编号不允许为空",trigger:"blur"}],menuName:[{required:!0,message:"权限名称不允许为空",trigger:"blur"}],builtIn:[{required:!0,message:"必须给定是否内置权限的值",trigger:"blur"}],status:[{required:!0,message:"必须给定权限状态的值",trigger:"blur"}],delFlag:[{required:!0,message:"必须给定删除标志的值",trigger:"blur"}]}}},watch:{mode:function(e){this.isRead="insert"!==e}},methods:{getDefaultValue:function(){return{sid:"",userType:"",menuCode:"",menuName:"",nickName:"",password:"",email:"",phone:"",tel:"",sex:"0",avatarUrl:"",builtIn:"0",status:"0",delFlag:"0",pwdExpirationDATE:"9999-12-31",pwdERRORfrequency:"",useLockedDate:"",creatorSid:"",createTime:"",editorSid:"",updateTime:"",remark:""}},open:function(e){this.addForm=this.getDefaultValue(),this.mode=e.mode,this.$refs.crm.open(),"edit"==this.mode&&(this.spin=!0,this.getUserDataBySid(e.sid)),this.isModalVisible=!0},getUserDataBySid:function(e){var t=this;Object(o["h"])(e).then(function(e){t.addForm=e.data}).finally(function(){t.spin=!1})},handleSave:function(){var t=this;this.$refs.addForm.validate(function(e){e&&(t.saveLoading=!0,"insert"==t.mode?t.createUser():t.editUser())})},editUser:function(){var t=this;Object(o["o"])(this.addForm).then(function(e){if(200!==e.code||!0!==e.status)throw new Error("请求的状态异常：状态码为".concat(e.code,"，状态为").concat(e.status));t.$message.success("数据已更新")}).catch(function(e){t.$message.error("请求异常："+e)}).finally(function(){t.saveLoading=!1,s["a"].$emit("reloadData"),t.$refs.crm.close()})},createUser:function(){var t=this;Object(o["a"])(this.addForm).then(function(e){if(200!==e.code||!0!==e.status)throw new Error("请求异常：".concat(e.msg,"。状态码为").concat(e.code,"，状态为").concat(e.status,"。"));t.$message.success("数据已新增"),t.$refs.crm.close(),s["a"].$emit("reloadData")}).catch(function(e){t.$message.error("请求异常："+e.message)}).finally(function(){t.saveLoading=!1})},handlePrev:function(){this.currentStep<1||this.currentStep--},handleNext:function(){this.currentStep>3||this.currentStep++},handleCancel:function(){var e=this;this.$confirm({title:"表单存在内容",content:"表单上已有输入的信息，关闭后信息会清空，确认关闭吗？",onOk:function(){e.$message.info("触发关闭事件"),e.$refs.crm.close()},onCancel:function(){}})}},mounted:function(){}},d=c,u=a("2877"),m=Object(u["a"])(d,r,n,!1,null,null,null);t["default"]=m.exports},"272f":function(e,t,a){"use strict";a.r(t);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"75%",title:("insert"==t.mode?"新增":"编辑")+"角色"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("a-spin",{attrs:{spinning:t.spin}},[a("a-form-model",{ref:"addForm",attrs:{model:t.addForm,labelCol:{span:6},wrapperCol:{span:18},rules:t.addFormRule}},[a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"角色编号",prop:"roleCode"}},[a("a-input",{model:{value:t.addForm.roleCode,callback:function(e){t.$set(t.addForm,"roleCode",e)},expression:"addForm.roleCode"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"角色名称",prop:"roleName"}},[a("a-input",{model:{value:t.addForm.roleName,callback:function(e){t.$set(t.addForm,"roleName",e)},expression:"addForm.roleName"}})],1)],1)],1),a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"角色状态",prop:"status"}},[a("a-radio-group",{attrs:{name:"radioGroup"},model:{value:t.addForm.status,callback:function(e){t.$set(t.addForm,"status",e)},expression:"addForm.status"}},[a("a-radio",{attrs:{value:"0"}},[t._v(" 正常 ")]),a("a-radio",{attrs:{value:"1"}},[t._v(" 停用 ")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"是否内置角色",prop:"builtIn"}},[a("a-radio-group",{attrs:{name:"radioGroup","default-value":0},model:{value:t.addForm.builtIn,callback:function(e){t.$set(t.addForm,"builtIn",e)},expression:"addForm.builtIn"}},[a("a-radio",{attrs:{value:"0"}},[t._v(" 否 ")]),a("a-radio",{attrs:{value:"1"}},[t._v(" 是 ")])],1)],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{labelCol:{span:3},wrapperCol:{span:21},label:"数据范围",prop:"dataScope"}},[a("a-select",{staticStyle:{width:"100%"},model:{value:t.addForm.dataScope,callback:function(e){t.$set(t.addForm,"dataScope",e)},expression:"addForm.dataScope"}},[a("a-select-option",{attrs:{value:"1"}},[t._v(" 全部数据权限 ")]),a("a-select-option",{attrs:{value:"2"}},[t._v(" 自定机构数据权限 ")]),a("a-select-option",{attrs:{value:"3"}},[t._v(" 本部门数据权限 ")]),a("a-select-option",{attrs:{value:"4"}},[t._v(" 本部门及以下数据权限 ")])],1)],1)],1)],1),a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"删除标志",prop:"delFlag"}},[a("a-radio-group",{attrs:{name:"radioGroup","default-value":0,disabled:""},model:{value:t.addForm.delFlag,callback:function(e){t.$set(t.addForm,"delFlag",e)},expression:"addForm.delFlag"}},[a("a-radio",{attrs:{value:"0"}},[t._v(" 存在 ")]),a("a-radio",{attrs:{value:"1"}},[t._v(" 删除 ")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"上级角色编号",prop:"parentSid"}},[a("a-tree-select",{staticStyle:{width:"100%"},attrs:{"show-search":"","tree-node-filter-prop":"title","dropdown-style":{maxHeight:"400px",overflow:"auto"},placeholder:"下拉选择上级编号","allow-clear":"","tree-data":t.treeData},model:{value:t.addForm.parentSid,callback:function(e){t.$set(t.addForm,"parentSid",e)},expression:"addForm.parentSid"}})],1)],1)],1),a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"创建者编号",prop:"creatorSid"}},[a("a-input",{attrs:{disabled:""},model:{value:t.addForm.creatorSid,callback:function(e){t.$set(t.addForm,"creatorSid",e)},expression:"addForm.creatorSid"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"创建时间",prop:"createTime"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:{format:"HH:mm:ss"},disabled:""},model:{value:t.addForm.createTime,callback:function(e){t.$set(t.addForm,"createTime",e)},expression:"addForm.createTime"}})],1)],1)],1),a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"修改者编号",prop:"editorSid"}},[a("a-input",{attrs:{disabled:""},model:{value:t.addForm.editorSid,callback:function(e){t.$set(t.addForm,"editorSid",e)},expression:"addForm.editorSid"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"修改时间",prop:"updateTime"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:{format:"HH:mm:ss"},disabled:""},model:{value:t.addForm.updateTime,callback:function(e){t.$set(t.addForm,"updateTime",e)},expression:"addForm.updateTime"}})],1)],1)],1),a("a-row",{attrs:{gutter:6}},[a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"备注",prop:"note",labelCol:{span:3},wrapperCol:{span:21}}},[a("a-input",{attrs:{type:"textarea"},model:{value:t.addForm.remark,callback:function(e){t.$set(t.addForm,"remark",e)},expression:"addForm.remark"}})],1)],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:t.handleCancel}},[t._v("取 消")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:t.saveLoading},on:{click:t.handleSave}},[t._v("保存")])],1)])],1)},n=[],i=(a("d3b7"),a("7bec")),o=a("3528"),s=a("ed08"),l=a("f5ef"),c=i["a"].SHOW_PARENT,d={data:function(){return{mode:"read",SHOW_PARENT:c,isModalVisible:!1,saveLoading:!1,spin:!1,addForm:{sid:"",roleCode:"",roleName:"",status:"0",builtIn:"0",dataScope:"",delFlag:"0",parentSid:"",creatorSid:"",createTime:"",editorSid:"",updateTime:"",remark:""},treeData:[],addFormRule:{roleCode:[{required:!0,message:"请输入角色编号",trigger:"blur"}],roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}],status:[{required:!0,message:"请给定状态",trigger:"blur"}],builtIn:[{required:!0,message:"请给定内置角色标志",trigger:"blur"}],dataScope:[{required:!0,message:"请选择数据范围",trigger:"blur"}],delFlag:[{required:!0,message:"请给定删除标志状态",trigger:"blur"}]}}},methods:{getDefaultValue:function(){return{sid:"",roleCode:"",roleName:"",status:"0",builtIn:"0",dataScope:"",delFlag:"0",parentSid:"",creatorSid:"",createTime:"",editorSid:"",updateTime:"",remark:""}},getDataBySid:function(e){var t=this;this.spin=!0,Object(o["h"])(e).then(function(e){t.addForm=e.data}).finally(function(){t.spin=!1})},handleSave:function(){var t=this;this.$refs.addForm.validate(function(e){e&&(t.saveLoading=!0,"insert"==t.mode?t.createRole():t.editRole())})},editRole:function(){var t=this,e=this;Object(o["m"])(e.addForm).then(function(e){t.$message.success("数据已更新")}).catch(function(e){t.$message.error("请求异常：",e)}).finally(function(){t.saveLoading=!1,l["a"].$emit("reloadData"),t.$refs.crm.close()})},createRole:function(){var t=this;Object(o["a"])(this.addForm).then(function(e){if(!Object(s["l"])(e))throw new Error(e.msg);t.$message.success("数据已新增"),l["a"].$emit("reloadData"),t.$refs.crm.close()}).catch(function(e){t.$message.error("请求异常："+e.message)}).finally(function(){t.saveLoading=!1})},open:function(e){this.addForm=this.getDefaultValue(),this.loadTreeData(),this.mode=e.mode,this.addForm.parentSid=e.sid,"edit"==this.mode&&(this.spin=!0,this.getDataBySid(e.sid)),this.$refs.crm.open()},loadTreeData:function(){var t=this;Object(o["i"])(null).then(function(e){t.treeData=Object(s["c"])(e.data)})},handleCancel:function(){var e=this;e.$refs.crm.close()}}},u=d,m=a("2877"),p=Object(m["a"])(u,r,n,!1,null,"7e5924e6",null);t["default"]=p.exports},"277d":function(e,t,a){"use strict";a.r(t),a.d(t,"orgLevelParam",function(){return n}),a.d(t,"orgTypeParam",function(){return r}),a.d(t,"statusParam",function(){return i}),a.d(t,"delFlagParam",function(){return o});var r={1:"机构",2:"部门"},n={1:"总行",2:"分行",3:"支行",4:"网点"},i={0:"正常",1:"停用"},o={0:"存在",2:"删除"}},3858:function(e,t,a){"use strict";a.r(t);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"75%",title:("insert"==t.mode?"新增":"编辑")+"模板权限配置"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("a-form-model",{ref:"addForm",attrs:{model:t.addForm,labelCol:{span:6},wrapperCol:{span:18},rules:t.addFormRule}},[a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"角色编号",prop:"roleSid"}},[a("a-input",{model:{value:t.addForm.roleSid,callback:function(e){t.$set(t.addForm,"roleSid",e)},expression:"addForm.roleSid"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"机构编号",prop:"orgSid"}},[a("a-input",{model:{value:t.addForm.orgSid,callback:function(e){t.$set(t.addForm,"orgSid",e)},expression:"addForm.orgSid"}})],1)],1)],1),a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"项目编号",prop:"projectSid"}},[a("a-input",{model:{value:t.addForm.projectSid,callback:function(e){t.$set(t.addForm,"projectSid",e)},expression:"addForm.projectSid"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"报表编号",prop:"reportId"}},[a("a-input",{model:{value:t.addForm.reportId,callback:function(e){t.$set(t.addForm,"reportId",e)},expression:"addForm.reportId"}})],1)],1)],1),a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"定义归属",prop:"defineAttribution"}},[a("a-select",{staticStyle:{width:"100%"},model:{value:t.addForm.defineAttribution,callback:function(e){t.$set(t.addForm,"defineAttribution",e)},expression:"addForm.defineAttribution"}},[a("a-select-option",{attrs:{value:"1"}},[t._v(" 角色 ")]),a("a-select-option",{attrs:{value:"0"}},[t._v(" 机构 ")])],1)],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:t.handleCancel}},[t._v("取 消")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:t.saveLoading},on:{click:t.handleSave}},[t._v("保存")])],1)])],1)},n=[],i=a("7bec"),o=i["a"].SHOW_PARENT,s={data:function(){return{mode:"read",isRead:!1,SHOW_PARENT:o,currentStep:0,isModalVisible:!1,saveLoading:!1,treemenuArray:[],treeReportArray:[],treeAuthArray:[],fromRoleTreeData:[],frommenuTreeData:[],addForm:{roleSid:"",orgSid:"",projectSid:"",reportSid:"",defineAttribution:""},addFormRule:{roleSid:[{required:!0,message:"角色编号不允许为空",trigger:"blur"}],orgSid:[{required:!0,message:"机构编号不允许为空",trigger:"blur"}],projectSid:[{required:!0,message:"项目编号不允许为空",trigger:"blur"}],reportSid:[{required:!0,message:"报表编号不允许为空",trigger:"blur"}]}}},watch:{mode:function(e){this.isRead="insert"!==e}},methods:{open:function(e){this.mode=e.mode,this.$refs.crm.open()},handleSave:function(){var e=this;this.saveLoading=!0,setTimeout(function(){e.saveLoading=!1,e.$refs.crm.close()},2e3),this.$message.success("触发保存事件")},handlePrev:function(){this.currentStep<1||this.currentStep--},handleNext:function(){this.currentStep>3||this.currentStep++},handleCancel:function(){var e=this;e.$refs.crm.close()}},mounted:function(){}},l=s,c=a("2877"),d=Object(c["a"])(l,r,n,!1,null,null,null);t["default"]=d.exports},"3fcf":function(e,t,a){"use strict";a("a376")},4376:function(e,t,a){},"4dd7c":function(e,t,a){"use strict";a.r(t);var r=function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{attrs:{id:"authConfig"}},[r("c-resizable-modal",{ref:"crm",attrs:{title:"补录报表权限模板配置"}},[r("div",{attrs:{slot:"content"},slot:"content"},[r("a-steps",{attrs:{current:a.currentStep,size:"small"}},a._l(a.stepDescriptionList,function(e,t){return r("a-step",{key:t},[r("template",{slot:"title"},[a._v(" "+a._s(e.title)+" ")]),r("span",{attrs:{slot:"description"},slot:"description"},[a._v(a._s(e.desc))])],2)}),1),r("a-form-model",{attrs:{labelCol:{span:4},wrapperCol:{span:14}}},[0==a.currentStep?r("div",[r("a-form-item",{attrs:{label:"模板名称"}},[r("a-input")],1),r("a-form-item",{attrs:{label:"模板别名"}},[r("a-input")],1),r("a-form-item",{attrs:{label:"状态"}},[r("a-radio-group",{attrs:{name:"radioGroup","default-value":1}},[r("a-radio",{attrs:{value:1}},[a._v(" 启用 ")]),r("a-radio",{attrs:{value:2}},[a._v(" 关闭 ")])],1)],1),r("a-form-item",{attrs:{label:"模板归类"}},[r("a-select",{attrs:{"default-value":"银监报表"}},[r("a-select-option",{attrs:{value:"银监报表"}},[a._v(" 银监报表 ")]),r("a-select-option",{attrs:{value:"人行报表"}},[a._v(" 人行报表 ")])],1)],1),r("a-form-item",{attrs:{label:"模板所属项目"}},[r("a-select",{attrs:{"default-value":"金融统计"}},[r("a-select-option",{attrs:{value:"金融统计"}},[a._v(" 金融统计 ")]),r("a-select-option",{attrs:{value:"金标"}},[a._v(" 金标 ")])],1)],1),r("a-form-item",{attrs:{label:"角色名称"}},[r("a-select",{attrs:{"default-value":"角色A"}},[r("a-select-option",{attrs:{value:"角色A"}},[a._v(" 角色A ")]),r("a-select-option",{attrs:{value:"角色B"}},[a._v(" 角色B ")])],1)],1)],1):a._e(),1==a.currentStep?r("div",[r("a-form-item",{attrs:{label:"补录报表"}},[r("c-check-tree")],1)],1):a._e(),2==a.currentStep?r("div",[r("a-form-item",{attrs:{label:"补录机构"}},[r("c-check-tree")],1)],1):a._e(),3==a.currentStep?r("div",[r("a-form-item",{attrs:{label:"菜单权限"}},[r("c-check-tree")],1)],1):a._e()])],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:a.handleCancel}},[a._v("取 消")]),r("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"left",disabled:0==a.currentStep},on:{click:a.handlePrev}},[a._v("上一部分")]),r("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"right",disabled:!(a.currentStep<3)},on:{click:a.handleNext}},[a._v("下一部分")]),r("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:a.saveLoading},on:{click:a.handleSave}},[a._v(a._s(3==a.currentStep?"全部":"直接")+"保存")])],1)])],1)},n=[],i=(a("ed08"),void 0),o={data:function(){return{currentStep:0,isModalVisible:!1,saveLoading:!1,treeOrgArray:[],treeReportArray:[],treeAuthArray:[],stepDescriptionList:[{title:"角色",desc:"请选择角色"},{title:"补录报表",desc:"请选择对应的补录报表"},{title:"补录机构",desc:"请选择对应的补录机构"},{title:"菜单权限",desc:"请选择对应的补录菜单权限"}]}},methods:{open:function(){this.saveLoading=!1,this.currentStep=0,this.$refs.crm.open()},handleSave:function(){var e=this;this.saveLoading=!0,setTimeout(function(){e.saveLoading=!1,e.$refs.crm.close()},2e3),this.$message.success("触发保存事件")},handlePrev:function(){this.currentStep<1||this.currentStep--},handleNext:function(){this.currentStep>3||this.currentStep++},handleCancel:function(){this.$confirm({title:"表单存在内容",content:"表单上已有输入的信息，关闭后信息会清空，确认关闭吗？",onOk:function(){i.$message.info("触发关闭事件"),i.$refs.crm.close()},onCancel:function(){}})}},mounted:function(){}},s=o,l=a("2877"),c=Object(l["a"])(s,r,n,!1,null,null,null);t["default"]=c.exports},5334:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"menuAccr"}},[a("c-resizable-modal",{ref:"crm",attrs:{title:e.title}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("a-spin",{attrs:{tip:"正在请求数据...",spinning:e.spinning}},[a("c-check-tree",{attrs:{propTreeData:e.treeData,checkedKeys:e.checkedKeys},on:{changeCheckedKeys:e.changeCheckedKeys}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:e.handleCancel}},[e._v("取 消")]),a("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:role:updateRoleMenuRel"],expression:"['system:role:updateRoleMenuRel']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:e.saveLoading},on:{click:e.handleSave}},[e._v("更 新")])],1)])],1)},n=[],i=(a("99af"),a("d3b7"),a("25f0"),a("3528")),o=a("ed08"),s={data:function(){return{saveLoading:!1,roleInfo:{},spinning:!0,treeData:[],checkedKeys:[]}},computed:{title:function(){var e=this.roleInfo,t=e.roleName,a=e.roleCode;return"角色 “ ".concat(t,"（").concat(a,"）” 的菜单授权")}},methods:{reset:function(){this.leftSourceData=[],this.rightTargetKeys=[],this.saveLoading=!1,this.checkedKeys=[],this.treeData=[]},open:function(e){this.roleInfo=e,this.reset(),this.loadTreeData(),this.spinning=!0,this.$refs.crm.open()},loadTreeData:function(){var t=this;Object(i["e"])(this.roleInfo.sid).then(function(e){if(!Object(o["l"])(e))throw new Error(e.msg);t.treeData=e.data,t.checkedKeys=t.checkKeys(t.treeData)}).catch(function(e){t.$message.error(e.message)}).finally(function(){t.spinning=!1})},checkKeys:function(e){var t=[],a=[];for(var r in e){var n=e[r];"0"===n.isChecked&&(t.push(n.key),a.push(n.title)),n.children&&n.children.length>0&&t.push.apply(t,this.checkKeys(n.children))}return t},handleSave:function(){var t=this;this.saveLoading=!0;var a=this,e={roleSid:this.roleInfo.sid,menuSid:this.checkedKeys.toString(),isRelation:"0"};Object(i["j"])(e).then(function(e){if(!o["l"])throw new Error(e.msg);t.$message.success("角色与菜单的信息已更新"),a.$refs.crm.close()}).catch(function(e){t.$message.error("错误："+e.message)}).finally(function(){t.saveLoading=!1})},changeCheckedKeys:function(e){this.checkedKeys=e},handleCancel:function(){var e=this;e.$refs.crm.close()}}},l=s,c=a("2877"),d=Object(c["a"])(l,r,n,!1,null,"77378288",null);t["default"]=d.exports},"59d7":function(e,t,a){"use strict";a.r(t);var r=function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{staticClass:"role-config white-back-box"},[r("c-tree-with-self",{attrs:{treeData:a.treeData,selectedKeys:a.treeSelectedKeys,treeMenuList:a.treeMenuList},on:{rightClickMenuItem:a.rightClickMenuItem,onTreeSelect:a.onTreeSelect}},[r("div",{staticStyle:{width:"100%"},attrs:{slot:"selfContent"},slot:"selfContent"},[r("c-query-form-table",{attrs:{searchParams:a.par,tableData:a.tableData,tableColumns:a.tableColumns,needTableCheckList:!0,selectTableKeys:a.selectTableKeys,loadingFlag:a.loadingFlag},on:{selectTableKeysChangeFromQFT:a.selectTableKeysChangeFromQFT,formQuery:a.formQuery,dbClick:a.dbClick,reloadData:a.reloadData},scopedSlots:a._u([{key:"roleStatus",fn:function(t){return[r("a-switch",{attrs:{"checked-children":"正常","un-checked-children":"禁用","default-checked":0==t.data.roleStatus},on:{change:function(e){return a.handleRoleStatusChange(t.data)}}})]}},{key:"roleName",fn:function(e){return[r("b",[a._v(a._s(e.data.roleName))])]}},{key:"status",fn:function(e){return[a._v(" "+a._s(a.statusParam[e.data.status])+" ")]}},{key:"builtIn",fn:function(e){return[a._v(" "+a._s(a.builtInParam[e.data.builtIn])+" ")]}},{key:"dataScopde",fn:function(e){return[a._v(" "+a._s(a.dataScopdeParam[e.data.dataScopde])+" ")]}},{key:"delFlag",fn:function(e){return[a._v(" "+a._s(a.delFlagParam[e.data.delFlag])+" ")]}},{key:"tableActionBox",fn:function(t){return[r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:role:edit"],expression:"['system:role:edit']"}],attrs:{type:"link"},on:{click:function(e){return a.handleEdit(t.data.sid)}}},[a._v("编辑")]),r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:role:delete"],expression:"['system:role:delete']"}],attrs:{type:"link"},on:{click:function(e){return a.handleDelete([t.data.sid])}}},[a._v("删除")])]}}])},[r("template",{staticClass:"btn-box",slot:"functionBtnBox"},[r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:role:add"],expression:"['system:role:add']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"plus"},on:{click:function(e){return a.handleAdd(null)}}},[a._v("新增")]),r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:role:edit"],expression:"['system:role:edit']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"edit",disabled:1!==a.selectTableKeys.length},on:{click:function(e){return a.editRole(a.selectTableKeys[0])}}},[a._v("修改")]),r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:role:delete"],expression:"['system:role:delete']"}],staticClass:"margin-btn",attrs:{type:"primary",disabled:0===a.selectTableKeys.length,icon:"delete"},on:{click:function(e){return a.handleDelete(a.selectTableKeys)}}},[a._v("删除")]),r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:role:export"],expression:"['system:role:export']"}],staticClass:"margin-btn",attrs:{type:"primary",loading:a.isExportBtnLoad,icon:"export"},on:{click:a.handleExportRoleData}},[a._v("导出")]),r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:role:getRoleUser"],expression:"['system:role:getRoleUser']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"import",disabled:1!==a.selectTableKeys.length},on:{click:function(e){return a.handleOpenUserManageModal(a.selectTableKeys[0])}}},[a._v("用户授权")]),r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:role:getRoleMenu"],expression:"['system:role:getRoleMenu']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"export",disabled:1!==a.selectTableKeys.length},on:{click:function(e){return a.handleOpenMenuManage(a.selectTableKeys[0])}}},[a._v("菜单授权")]),r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:role:getRoleModule"],expression:"['system:role:getRoleModule']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"question",disabled:1!==a.selectTableKeys.length},on:{click:function(e){return a.handleOpenRoleProjectAuthModal(a.selectTableKeys[0])}}},[a._v("模块授权")]),r("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"unlock",disabled:""},on:{click:a.openReportIRAuthManageModal}},[a._v("补录报表授权（BETA）")])],1)],2)],1)]),r("modal-user-manage",{ref:"ModalUserManage"}),r("modal-menu-auth",{ref:"ModalMenuAuth"}),r("modal-report-i-r-auth",{ref:"ModalReportIRAuth"}),r("modal-role-module-accredit",{ref:"ModalRoleModuleAccredit"}),r("role-detail-modal",{ref:"roleDetailModal"})],1)},n=[],i=(a("d3b7"),a("25f0"),a("99af"),a("bd43")),o=a("5334"),s=a("272f"),l=a("ce6f"),c=a("9e6a"),d=(a("c28a"),a("de03")),u=a("3528"),m=a("ed08"),p=a("f5ef"),f={data:function(){return{statusParam:d["statusParam"],builtInParam:d["builtInParam"],dataScopdeParam:d["dataScopdeParam"],delFlagParam:d["delFlagParam"],isExportBtnLoad:!1,queryParam:{},par:[{name:"roleCode",label:"角色编号",type:"input"},{name:"roleName",label:"角色名称",type:"input"},{name:"status",label:"状态",type:"select",selectList:[{key:"0",value:"正常"},{key:"1",value:"停用"}]},{name:"builtIn",label:"是否内置角色",type:"select",selectList:[{key:"0",value:"否"},{key:"1",value:"是"}]},{name:"delFlag",label:"删除标志",type:"select",selectList:[{key:"0",value:"存在"},{key:"1",value:"删除"}]},{name:"dataScopde",label:"数据范围",type:"select",selectList:[{key:"1",value:"全部数据权限"},{key:"2",value:"自定机构数据权限"},{key:"3",value:"本部门数据权限"},{key:"4",value:"本部门及以下数据权限"}]},{name:"creator_code",label:"创建者编号",type:"input"},{name:"createTime",label:"创建时间",type:"datetime"},{name:"editor_code",label:"修改者编号",type:"input"},{name:"updateTime",label:"修改时间",type:"datetime"},{name:"remark",label:"备注",type:"input"}],tableData:{pageSize:10,pageNum:1,totalPages:1,totalSize:1,content:[]},tableColumns:[{title:"角色编号",dataIndex:"roleCode",key:"roleCode"},{title:"角色名称",dataIndex:"roleName",key:"roleName"},{title:"上级角色编号",dataIndex:"parentSid",key:"parentSid"},{title:"角色状态",dataIndex:"status",hasSlot:!0,key:"status"},{title:"数据范围",dataIndex:"dataScopde",hasSlot:!0,key:"dataScopde"},{title:"是否内置角色",dataIndex:"builtIn",hasSlot:!0,key:"builtIn"},{title:"删除标志",dataIndex:"delFlag",hasSlot:!0,key:"delFlag"},{title:"创建者编号",dataIndex:"creatorSid",key:"creatorSid"},{title:"创建时间",dataIndex:"createTime",key:"createTime"},{title:"修改者编号",dataIndex:"editorSid",key:"editorSid"},{title:"修改时间",dataIndex:"updateTime",key:"updateTime"},{title:"备注",dataIndex:"remark",key:"remark"}],treeMenuList:[{menuKey:"insert",menuName:"新增"}],treeSelectedKeys:[],value:void 0,treeData:[],selectTableKeys:[],loadingFlag:!1,deleteType:!1}},mounted:function(){var e=this;this.treeData=this.tableData.content;var t=this.tableData,a=t.pageNum,r=t.pageSize;this.handleLoadData({pageNum:a,pageSize:r},{delFlag:"0"}),p["a"].$on("reloadData",function(){e.reloadData({},{delFlag:"0"})})},methods:{getRoleInfoBySid:function(e){var t=this.tableData.content,a=0;for(a in t)if(t[a]["sid"]===e)break;return t[a]},onTreeSelect:function(e){this.formQuery({sid:e[0]})},handleLoadData:function(e,t){var a=this;"{}"===JSON.stringify(e)&&(e.pageNum=this.tableData.pageNum,e.pageSize=this.tableData.pageSize),this.loadingFlag=!0,this.selectTableKeys=[],Object(u["d"])(e.pageNum,e.pageSize,t).then(function(e){a.$nextTick(function(){a.tableData.content=e.rows,a.tableData.totalSize=e.total,a.tableData.totalPages=Math.ceil(a.tableData.totalSize/a.tableData.pageSize)})}).finally(function(){setTimeout(function(){a.loadingFlag=!1},500)}),Object(u["i"])(null).then(function(e){a.treeData=e.data})},rightClickMenuItem:function(e,t){switch(t){case"1":this.handleAdd(e);break;case"2":this.handleEdit(e);break;case"3":this.handleDelete([e]);break}},handleDelete:function(t){var a=this,e=this.$createElement,r=e("div",null,[e("p",null,[e("span",null,"即将删除".concat(t.length,"项角色数据，")),e("span",{style:"color:red"},"如果包含子项，也将一并删除。 ")]),e("span",null,"请选择删除的类型。 "),e("a-switch",{on:{click:function(){},change:function(e){a.deleteType=e}},attrs:{checkedChildren:"物理删除",unCheckedChildren:"逻辑删除"}},"")]);this.$confirm({title:"删除机构数据确认",content:r,okType:"danger",closable:!0,onOk:function(){var e=a.deleteType?"Physical":"Logic";a.confirmOkToDelete(t,e)}})},confirmOkToDelete:function(t,a){var r=this,n=this,e={id:t.toString(),type:a,countNum:t.length};Object(u["b"])(e).then(function(e){if(!Object(m["l"])(e))throw new Error(e.msg);n.selectTableKeys=[],n.reloadData({}),n.$message.success("已".concat("Logic"==a?"逻辑":"物理","删除").concat(t.length,"项数据"))}).catch(function(e){r.$message.error("请求错误："+e.message)})},reloadData:function(e){if("{}"!==JSON.stringify(e)){var t=e.pageNum,a=e.pageSize;this.tableData.pageNum=t,this.tableData.pageSize=a}this.handleLoadData({},null)},formQuery:function(e){this.queryParam=e,this.handleLoadData({},e)},dbClick:function(e){this.handleEdit(e.sid)},handleAdd:function(e){this.$refs.roleDetailModal.open({mode:"insert",sid:e})},handleEdit:function(e){this.$refs.roleDetailModal.open({mode:"edit",sid:e})},selectTableKeysChangeFromQFT:function(e){this.selectTableKeys=e},handleOpenUserManageModal:function(e){var t=this.getRoleInfoBySid(e);this.$refs.ModalUserManage.open(t)},openReportIRAuthManageModal:function(){},handleOpenMenuManage:function(e){var t=this.getRoleInfoBySid(e);this.$refs.ModalMenuAuth.open(t)},handleOpenRoleProjectAuthModal:function(e){var t=this.getRoleInfoBySid(e);this.$refs.ModalRoleModuleAccredit.open(t)},editRole:function(e){this.$refs.roleDetailModal.open({mode:"edit",sid:e})},createNewRole:function(){this.$refs.roleDetailModal.open({mode:"insert"})},handleRoleStatusChange:function(e){},handleExportRoleData:function(){var t=this;this.isExportBtnLoad=!0,Object(u["c"])(this.queryParam).then(function(e){if(e.data.msg)throw new Error(e.msg);Object(m["f"])(e)}).catch(function(e){t.$message.warning(e.message)}).finally(function(){t.isExportBtnLoad=!1})}},components:{ModalUserManage:i["default"],ModalMenuAuth:o["default"],ModalReportIRAuth:l["default"],ModalRoleModuleAccredit:c["default"],roleDetailModal:s["default"]}},h=f,g=(a("b733"),a("2877")),b=Object(g["a"])(h,r,n,!1,null,"fae44718",null);t["default"]=b.exports},"5acc":function(e,t,a){"use strict";a.r(t);var r=function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{attrs:{id:"authConfig"}},[r("c-resizable-modal",{ref:"crm",attrs:{title:"报表权限模板配置"}},[r("div",{attrs:{slot:"content"},slot:"content"},[r("a-steps",{attrs:{current:a.currentStep,size:"small"}},a._l(a.stepDescriptionList,function(e,t){return r("a-step",{key:t},[r("template",{slot:"title"},[a._v(" "+a._s(e.title)+" ")]),r("span",{attrs:{slot:"description"},slot:"description"},[a._v(a._s(e.desc))])],2)}),1),r("a-form-model",{attrs:{labelCol:{span:4},wrapperCol:{span:14}}},[0==a.currentStep?r("div",[r("a-form-item",{attrs:{label:"模板名称"}},[r("a-input")],1),r("a-form-item",{attrs:{label:"模板别名"}},[r("a-input")],1),r("a-form-item",{attrs:{label:"状态"}},[r("a-radio-group",{attrs:{name:"radioGroup","default-value":1}},[r("a-radio",{attrs:{value:1}},[a._v(" 启用 ")]),r("a-radio",{attrs:{value:2}},[a._v(" 关闭 ")])],1)],1),r("a-form-item",{attrs:{label:"模板归类"}},[r("a-select",{attrs:{"default-value":"银监报表"}},[r("a-select-option",{attrs:{value:"银监报表"}},[a._v(" 银监报表 ")]),r("a-select-option",{attrs:{value:"人行报表"}},[a._v(" 人行报表 ")])],1)],1),r("a-form-item",{attrs:{label:"模板所属项目"}},[r("a-select",{attrs:{"default-value":"金融统计"}},[r("a-select-option",{attrs:{value:"金融统计"}},[a._v(" 金融统计 ")]),r("a-select-option",{attrs:{value:"金标"}},[a._v(" 金标 ")])],1)],1),r("a-form-item",{attrs:{label:"角色名称"}},[r("a-select",{attrs:{"default-value":"角色A"}},[r("a-select-option",{attrs:{value:"角色A"}},[a._v(" 角色A ")]),r("a-select-option",{attrs:{value:"角色B"}},[a._v(" 角色B ")])],1)],1)],1):a._e(),1==a.currentStep?r("div",[r("a-form-item",{attrs:{label:"补录报表"}},[r("c-check-tree")],1)],1):a._e(),2==a.currentStep?r("div",[r("a-form-item",{attrs:{label:"补录机构"}},[r("c-check-tree")],1)],1):a._e(),3==a.currentStep?r("div",[r("a-form-item",{attrs:{label:"菜单权限"}},[r("c-check-tree")],1)],1):a._e()])],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:a.handleCancel}},[a._v("取 消")]),r("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"left",disabled:0==a.currentStep},on:{click:a.handlePrev}},[a._v("上一部分")]),r("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"right",disabled:!(a.currentStep<3)},on:{click:a.handleNext}},[a._v("下一部分")]),r("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:a.saveLoading},on:{click:a.handleSave}},[a._v(a._s(3==a.currentStep?"全部":"直接")+"保存")])],1)])],1)},n=[],i=(a("ed08"),void 0),o={data:function(){return{currentStep:0,isModalVisible:!1,saveLoading:!1,treeOrgArray:[],treeReportArray:[],treeAuthArray:[],stepDescriptionList:[{title:"角色",desc:"请选择角色"},{title:"补录报表",desc:"请选择对应的补录报表"},{title:"补录机构",desc:"请选择对应的补录机构"},{title:"菜单权限",desc:"请选择对应的补录菜单权限"}]}},methods:{open:function(){this.saveLoading=!1,this.currentStep=0,this.$refs.crm.open()},handleSave:function(){var e=this;this.saveLoading=!0,setTimeout(function(){e.saveLoading=!1,e.$refs.crm.close()},2e3),this.$message.success("触发保存事件")},handlePrev:function(){this.currentStep<1||this.currentStep--},handleNext:function(){this.currentStep>3||this.currentStep++},handleCancel:function(){this.$confirm({title:"表单存在内容",content:"表单上已有输入的信息，关闭后信息会清空，确认关闭吗？",onOk:function(){i.$message.info("触发关闭事件"),i.$refs.crm.close()},onCancel:function(){}})}},mounted:function(){}},s=o,l=a("2877"),c=Object(l["a"])(s,r,n,!1,null,null,null);t["default"]=c.exports},"612a4":function(e,t,a){"use strict";a("fd3d")},"6b84":function(e,t,a){"use strict";a.r(t);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"permission-template white-back-box"},[a("c-query-form-table",{attrs:{searchParams:t.par,tableData:t.tableData,tableColumns:t.tableColumns,needTableCheckList:!0,loadingFlag:t.loadingFlag,selectTableKeys:t.selectTableKeys},on:{formQuery:t.formQuery,dbClick:t.dbClick,reloadData:t.reloadData,selectTableKeysChangeFromQFT:t.selectTableKeysChangeFromQFT},scopedSlots:t._u([{key:"defineAttribution",fn:function(e){return[t._v(" "+t._s(t.defineAttributionParam[e.data.defineAttribution])+" ")]}}])},[a("template",{staticClass:"btn-box",slot:"functionBtnBox"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"plus"},on:{click:t.openReportAuthConfig}},[t._v("报表权限配置")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"edit"},on:{click:t.openModalPTDetail}},[t._v("补录表权限配置")])],1),a("span",{attrs:{slot:"tableActionBox"},slot:"tableActionBox"},[a("a-button",{attrs:{type:"link"}},[t._v("编辑")]),a("c-more-btn-collect",[a("span",{attrs:{slot:"content"},slot:"content"},[a("a-button",{attrs:{type:"link"}},[t._v("删除")]),a("a-button",{attrs:{type:"link",size:"small"},on:{click:function(e){return t.handleRefreshCache([t.row.data.sid])}}},[t._v("刷新缓存")])],1)])],1)],2),a("ModalAuthConfig",{ref:"ModalAuthConfig"}),a("ModalPTDetail",{ref:"ModalPTDetail"})],1)},n=[],i=(a("d3b7"),a("25f0"),a("99af"),a("63a1")),o=a("5acc"),s=a("3858"),l=a("a80d"),c=a("c0c7"),d=(a("f5ef"),{data:function(){return{defineAttributionParam:l["defineAttributionParam"],par:[{name:"roleSid",label:"角色编号",type:"input"},{name:"orgSid",label:"机构编号",type:"input"},{name:"projectSid",label:"项目编号",type:"input"},{name:"reportSid",label:"报表编号",type:"input"},{name:"defineAttribution",label:"定义归属",type:"select",selectList:[{key:"0",value:"角色"},{key:"1",value:"机构"}]}],tableData:{pageSize:10,pageNum:1,totalSize:1,totalPages:1,content:[{roleSid:"1",orgSid:"1",projectSid:"1",reportSid:"1",defineAttribution:"0"}]},orgTree:[],value:void 0,treeData:[],tableColumns:[{dataIndex:"roleSid",key:"roleSid",title:"角色编号"},{dataIndex:"orgSid",key:"orgSid",title:"机构编号"},{dataIndex:"projectSid",key:"projectSid",title:"项目编号"},{dataIndex:"reportSid",key:"reportSid",title:"报表编号"},{dataIndex:"defineAttribution",key:"defineAttribution",title:"定义归属",hasSlot:!0}],selectTableKeys:[]}},created:function(){var t=this;Object(i["l"])().then(function(e){t.treeData=e.data})},methods:{handleLoadData:function(e,t){var a=this;"{}"===JSON.stringify(e)&&(e.pageNum=this.tableData.pageNum,e.pageSize=this.tableData.pageSize),this.loadingFlag=!0,this.selectTableKeys=[],Object(c["f"])(e.pageNum,e.pageSize,t).then(function(e){a.$nextTick(function(){a.tableData.content=e.rows,a.tableData.totalSize=e.total,a.tableData.totalPages=Math.ceil(a.tableData.totalSize/a.tableData.pageSize)})}).catch(function(e){a.$message.error("数据加载错误："+e)}).finally(function(){a.loadingFlag=!1})},handleDeleteUser:function(e){var t=this;this.$confirm({title:"删除数据确认",content:"即将删除".concat(e.length,"项数据，请确认删除的类型"),okText:"物理删除",okType:"danger",closable:!0,cancelText:"逻辑删除",onOk:function(){t.handleConfirmOk(e,0)},onCancel:function(){t.handleConfirmOk(e,1)}})},handleConfirmOk:function(t,a){var r=this,n=this;Object(c["c"])({id:t.toString(),type:1}).then(function(e){if(200!==e.code||!0!==e.status)throw new Error("请求结果失败");n.reloadData({}),n.$message.success("已".concat(1==a?"逻辑":"物理","删除").concat(t.length,"项数据"))}).catch(function(e){r.$message.error("请求错误")})},reloadData:function(e){if("{}"!==JSON.stringify(e)){var t=e.pageNum,a=e.pageSize;this.tableData.pageNum=t,this.tableData.pageSize=a}this.handleLoadData({},null)},formQuery:function(e){this.handleLoadData({},e)},dbClick:function(e){this.handleEditUser(e.sid)},openReportAuthConfig:function(){this.$refs.ModalAuthConfig.open()},openModalPTDetail:function(){this.$refs.ModalPTDetail.open({mode:"insert"})},selectTableKeysChangeFromQFT:function(e){this.selectTableKeys=e}},components:{ModalAuthConfig:o["default"],ModalPTDetail:s["default"]}}),u=d,m=(a("c029"),a("2877")),p=Object(m["a"])(u,r,n,!1,null,"e550df38",null);t["default"]=p.exports},"6b96":function(e,t,a){"use strict";a.r(t);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"75%",title:("insert"==t.mode?"新增":"编辑")+"项目"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("a-spin",{attrs:{spinning:t.spin}},[a("a-form-model",{ref:"addForm",attrs:{model:t.addForm,labelCol:{span:6},wrapperCol:{span:18},rules:t.addFormRule}},[a("a-row",[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"项目编号",prop:"projectCode"}},[a("a-input",{model:{value:t.addForm.projectCode,callback:function(e){t.$set(t.addForm,"projectCode",e)},expression:"addForm.projectCode"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"项目名称",prop:"projectName"}},[a("a-input",{model:{value:t.addForm.projectName,callback:function(e){t.$set(t.addForm,"projectName",e)},expression:"addForm.projectName"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"项目状态",prop:"status"}},[a("a-radio-group",{attrs:{name:"radioGroup"},model:{value:t.addForm.status,callback:function(e){t.$set(t.addForm,"status",e)},expression:"addForm.status"}},[a("a-radio",{attrs:{value:"0"}},[t._v(" 正常 ")]),a("a-radio",{attrs:{value:"1"}},[t._v(" 停用 ")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"创建者编号",prop:"creatorSid"}},[a("a-input",{attrs:{disabled:""},model:{value:t.addForm.creatorSid,callback:function(e){t.$set(t.addForm,"creatorSid",e)},expression:"addForm.creatorSid"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"创建时间",prop:"createTime"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:{format:"HH:mm:ss"},disabled:""},model:{value:t.addForm.createTime,callback:function(e){t.$set(t.addForm,"createTime",e)},expression:"addForm.createTime"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"修改者编号",prop:"editorSid"}},[a("a-input",{attrs:{disabled:""},model:{value:t.addForm.editorSid,callback:function(e){t.$set(t.addForm,"editorSid",e)},expression:"addForm.editorSid"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"修改时间",prop:"updateTime"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:{format:"HH:mm:ss"},disabled:""},model:{value:t.addForm.updateTime,callback:function(e){t.$set(t.addForm,"updateTime",e)},expression:"addForm.updateTime"}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"备注",prop:"note",labelCol:{span:3},wrapperCol:{span:21}}},[a("a-input",{attrs:{type:"textarea"},model:{value:t.addForm.remark,callback:function(e){t.$set(t.addForm,"remark",e)},expression:"addForm.remark"}})],1)],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:t.handleCancel}},[t._v("取 消")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:t.saveLoading},on:{click:t.handleSave}},[t._v("保存")])],1)])],1)},n=[],i=(a("d3b7"),a("99af"),a("7bec")),o=a("ed08"),s=a("f5ef"),l=a("d2b6"),c=i["a"].SHOW_PARENT,d={data:function(){return{mode:"read",spin:!1,SHOW_PARENT:c,currentStep:0,isModalVisible:!1,saveLoading:!1,treeProjectArray:[],treeReportArray:[],treeAuthArray:[],fromRoleTreeData:[],fromProjectTreeData:[],treeData:[],addForm:{projectCode:"",projectName:"",parentSid:"",status:"0",creatorSid:"",createTime:"",editorSid:"",updateTime:"",remark:""},addFormRule:{projectCode:[{required:!0,message:"项目编号不允许为空",trigger:"blur"}],projectName:[{required:!0,message:"项目名称不允许为空",trigger:"blur"}],projectVersion:[{required:!0,message:"项目版本不能为空",trigger:"blur"}],status:[{required:!0,message:"状态不能为空",trigger:"blur"}],beginDate:[{required:!0,message:"必须填写日期",trigger:"blur"}],endDate:[{required:!0,message:"必须填写日期",trigger:"blur"}]}}},methods:{getDefaultValue:function(){return{sid:"",projectCode:"",projectName:"",parentSid:"",status:"0",beginDate:"",endDate:"9999-12-31",creatorSid:"",createTime:"",editorSid:"",updateTime:"",remark:""}},loadTreeData:function(){var t=this;Object(l["g"])(null).then(function(e){t.treeData=Object(o["c"])(e.data)})},open:function(e){this.addForm=this.getDefaultValue(),this.mode=e.mode,this.addForm.parentSid=e.sid,"edit"===this.mode&&(this.spin=!0,this.getDataBySid(e.sid)),this.$refs.crm.open()},getDataBySid:function(e){var t=this;Object(l["f"])(e).then(function(e){t.addForm=e.data}).finally(function(){t.spin=!1})},handleSave:function(){var t=this;this.$refs.addForm.validate(function(e){e&&(t.saveLoading=!0,"insert"==t.mode?t.createProject():t.editProject())})},editProject:function(){var t=this;Object(l["j"])(this.addForm).then(function(e){if(200!==e.code||!0!==e.status)throw new Error("".concat(e.msg,"。状态码为").concat(e.code,"，状态为").concat(e.status));t.$message.success("数据已更新")}).catch(function(e){t.$message.error("请求异常："+e.message)}).finally(function(){t.saveLoading=!1,s["a"].$emit("reloadData"),t.$refs.crm.close()})},createProject:function(){var t=this;Object(l["a"])(this.addForm).then(function(e){if(200!==e.code||!0!==e.status)throw new Error("".concat(e.msg,"。状态码为").concat(e.code,"，状态为").concat(e.status,"。"));t.$message.success("数据已新增"),t.$refs.crm.close(),s["a"].$emit("reloadData")}).catch(function(e){t.$message.error("请求异常："+e.message)}).finally(function(){t.saveLoading=!1})},handleCancel:function(){var e=this;e.$refs.crm.close()}},mounted:function(){}},u=d,m=a("2877"),p=Object(m["a"])(u,r,n,!1,null,null,null);t["default"]=p.exports},7438:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"codeDetail"}},[a("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"75%",title:"角色管理"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("h4",[e._v("用户名称："+e._s(e.userInfo.userName)+" "),a("a-divider",{attrs:{type:"vertical"}}),e._v(" 用户编号："+e._s(e.userInfo.userCode)+" ")],1),a("a-spin",{attrs:{tip:"正在请求数据...",spinning:e.spinning}},[a("a-transfer",{staticStyle:{margin:"0 auto"},attrs:{"list-style":{width:"45%",height:"300px"},dataSource:e.leftSourceData,targetKeys:e.rightTargetKeys,titles:["待分配角色","已选择角色"],"show-search":"","filter-option":e.filterOption,render:function(e){return e.title}},on:{change:e.handleChange}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:e.handleCancel}},[e._v("取 消")]),a("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:role:updateRoleUserRel"],expression:"['system:role:updateRoleUserRel']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:e.saveLoading},on:{click:e.handleSave}},[e._v("更 新")])],1)])],1)},n=[],o=(a("d3b7"),a("25f0"),a("c0c7")),s=a("ed08"),i={data:function(){return{isModalVisible:!1,saveLoading:!1,leftSourceData:[],rightTargetKeys:[],spinning:!0,userInfo:{}}},methods:{reset:function(){this.leftSourceData=[],this.rightTargetKeys=[],this.userInfo={}},open:function(e){this.reset(),this.userInfo=e,this.$refs.crm.open(),this.getUserRoleData(e)},getUserRoleData:function(e){var i=this,t=this;this.spinning=!0,Object(o["i"])(e.sid).then(function(e){if(!Object(s["l"])(e))throw new Error(e.msg);var t=[],a=[];for(var r in e.data){var n={key:e.data[r].sid,title:e.data[r].roleName};t.push(n),"0"===e.data[r].isRelation&&a.push(e.data[r].sid)}i.$nextTick(function(){i.leftSourceData=t,i.rightTargetKeys=a})}).catch(function(e){i.$message.error("请求异常："+e.message)}).finally(function(){t.spinning=!1})},handleSave:function(){var t=this;this.saveLoading=!0;var e={userSid:this.userInfo.sid,roleSid:this.rightTargetKeys.toString(),isRelation:"0"};Object(o["p"])(e).then(function(e){if(200!==e.code||!0!==e.status)throw new Error(e.msg);t.$message.success("用户角色信息已更新"),t.$refs.crm.close()}).catch(function(e){t.$message.warning("用户角色信息更新失败。"+e.message)}).finally(function(){t.saveLoading=!1})},handleCancel:function(){this.$refs.crm.close()},filterOption:function(e,t){return t.title.indexOf(e)>-1},handleChange:function(e,t,a){this.rightTargetKeys=e}}},l=i,c=a("2877"),d=Object(c["a"])(l,r,n,!1,null,null,null);t["default"]=d.exports},8028:function(e,t,a){"use strict";a("aee7")},"9e6a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("c-resizable-modal",{ref:"crm",attrs:{title:e.title}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("a-spin",{attrs:{tip:"正在请求数据...",spinning:e.spinning}},[a("c-check-tree",{attrs:{propTreeData:e.treeData,checkedKeys:e.checkedKeys},on:{changeCheckedKeys:e.changeCheckedKeys,reloadTreeData:e.reloadTreeData}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:e.handleCancel}},[e._v("取 消")]),a("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:role:updateRoleModuleRel"],expression:"['system:role:updateRoleModuleRel']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:e.saveLoading},on:{click:e.handleSave}},[e._v("更 新")])],1)])],1)},n=[],i=(a("99af"),a("d3b7"),a("25f0"),a("3528")),o=a("ed08"),s={data:function(){return{saveLoading:!1,roleInfo:{},spinning:!0,treeData:[],checkedKeys:[]}},computed:{title:function(){var e=this.roleInfo,t=e.roleName,a=e.roleCode;return"角色 “ ".concat(t,"（").concat(a,"）” 的模块授权")}},methods:{reset:function(){this.leftSourceData=[],this.rightTargetKeys=[],this.checkedKeys=[],this.treeData=[]},open:function(e){this.roleInfo=e,this.reset(),this.loadTreeData(),this.spinning=!0,this.$refs.crm.open()},reloadTreeData:function(){this.loadTreeData()},loadTreeData:function(){var t=this;Object(i["f"])(this.roleInfo.sid).then(function(e){if(!Object(o["l"])(e))throw new Error(e.msg);t.treeData=e.data,t.checkedKeys=t.checkKeys(t.treeData)}).catch(function(e){t.$message.error(e.message)}).finally(function(){t.spinning=!1})},checkKeys:function(e){var t=[],a=[];for(var r in e){var n=e[r];"0"===n.isChecked&&(t.push(n.key),a.push(n.title)),n.children&&n.children.length>0&&t.push.apply(t,this.checkKeys(n.children))}return t},handleSave:function(){this.saveLoading=!0;var t=this,e={roleSid:this.roleInfo.sid,moduleSid:this.checkedKeys.toString(),isRelation:"0"};Object(i["k"])(e).then(function(e){if(!Object(o["l"])(e))throw new Error(e.msg);t.$message.success("角色与项目的信息已更新"),t.$refs.crm.close()}).catch(function(e){t.$message.error("错误："+e.message)}).finally(function(){t.saveLoading=!1})},changeCheckedKeys:function(e){this.checkedKeys=e},handleCancel:function(){this.$refs.crm.close()}}},l=s,c=a("2877"),d=Object(c["a"])(l,r,n,!1,null,"781323d1",null);t["default"]=d.exports},a376:function(e,t,a){},a40d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("c-resizable-modal",{ref:"crm",attrs:{title:"项目授权"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("h4",[e._v(" 角色名称："+e._s(e.roleInfo.roleName)+" "),a("a-divider",{attrs:{type:"vertical"}}),e._v(" 角色编号："+e._s(e.roleInfo.roleCode)+" ")],1),a("a-spin",{attrs:{tip:"正在请求数据...",spinning:e.spinning}},[a("c-check-tree",{attrs:{propTreeData:e.treeData,checkedKeys:e.checkedKeys},on:{changeCheckedKeys:e.changeCheckedKeys}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:e.handleCancel}},[e._v("取 消")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:e.saveLoading},on:{click:e.handleSave}},[e._v("保存")])],1)])],1)},n=[],i=(a("d3b7"),a("25f0"),a("cc5e")),o=a("ed08"),s={data:function(){return{saveLoading:!1,roleInfo:{},spinning:!0,treeData:[],checkedKeys:[]}},methods:{reset:function(){this.leftSourceData=[],this.rightTargetKeys=[],this.checkedKeys=[],this.treeData=[]},open:function(e){this.roleInfo=e,this.reset(),this.loadTreeData(),this.spinning=!0,this.$refs.crm.open()},loadTreeData:function(){var t=this;Object(i["a"])(this.roleInfo.sid).then(function(e){if(!Object(o["l"])(e))throw new Error(e.msg);t.treeData=e.data}).catch(function(e){t.$message.error(e.message)}).finally(function(){t.spinning=!1})},handleSave:function(){this.saveLoading=!0;var t=this,e={roleSid:this.roleInfo.sid,projectSid:this.checkedKeys.toString(),isRelation:"0"};Object(i["b"])(e).then(function(e){if(!Object(o["l"])(e))throw new Error(e.msg);t.$message.success("角色与项目的信息已更新"),t.$refs.crm.close()}).catch(function(e){t.$message.error("错误："+e.message)}).finally(function(){t.saveLoading=!1})},changeCheckedKeys:function(e){this.checkedKeys=e},handleCancel:function(){this.$refs.crm.close()}}},l=s,c=a("2877"),d=Object(c["a"])(l,r,n,!1,null,"2d767cee",null);t["default"]=d.exports},a80d:function(e,t,a){"use strict";a.r(t),a.d(t,"defineAttributionParam",function(){return r});var r={0:"角色",1:"机构"}},ab05:function(e,t,a){"use strict";a.r(t);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"modalOrgAdd"}},[a("c-resizable-modal",{ref:"crm",attrs:{title:"新增机构",isVisible:t.isModalVisible,modalWidth:"40%"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("a-radio-group",{model:{value:t.isParentOrg,callback:function(e){t.isParentOrg=e},expression:"isParentOrg"}},[a("a-radio",{attrs:{value:"parent"}},[t._v("根机构")]),a("a-radio",{attrs:{value:"children"}},[t._v("子机构")])],1),"children"===t.isParentOrg?a("h4",[t._v(" 上级机构号：****** "),a("a-divider",{attrs:{type:"vertical"}}),t._v(" 上级机构名称：****** ")],1):t._e(),a("a-form-model",{attrs:{model:t.addform,labelCol:{span:4},wrapperCol:{span:16}}},[a("a-form-model-item",{attrs:{label:"机构号"}},[a("a-input",{model:{value:t.addform.orgNum,callback:function(e){t.$set(t.addform,"orgNum",e)},expression:"addform.orgNum"}})],1),a("a-form-model-item",{attrs:{label:"机构名称"}},[a("a-input",{model:{value:t.addform.orgName,callback:function(e){t.$set(t.addform,"orgName",e)},expression:"addform.orgName"}})],1),a("a-form-model-item",{attrs:{label:"机构别名"}},[a("a-input",{model:{value:t.addform.orgAlias,callback:function(e){t.$set(t.addform,"orgAlias",e)},expression:"addform.orgAlias"}})],1),a("a-form-model-item",{attrs:{label:"状态"}},[a("a-radio-group",{model:{value:t.addform.status,callback:function(e){t.$set(t.addform,"status",e)},expression:"addform.status"}},[a("a-radio",{attrs:{value:"parent"}},[t._v("启用")]),a("a-radio",{attrs:{value:"children"}},[t._v("禁用")])],1)],1),a("a-form-model-item",{attrs:{label:"顺序"}},[a("a-input",{model:{value:t.addform.sx,callback:function(e){t.$set(t.addform,"sx",e)},expression:"addform.sx"}})],1),a("a-form-model-item",{attrs:{label:"开始日期"}},[a("a-date-picker",{staticStyle:{width:"100%"},model:{value:t.addform.startDate,callback:function(e){t.$set(t.addform,"startDate",e)},expression:"addform.startDate"}})],1),a("a-form-model-item",{attrs:{label:"结束日期"}},[a("a-date-picker",{staticStyle:{width:"100%"},model:{value:t.addform.endDate,callback:function(e){t.$set(t.addform,"endDate",e)},expression:"addform.endDate"}})],1),a("a-form-model-item",{attrs:{label:"备注"}},[a("a-input",{attrs:{type:"textarea"},model:{value:t.addform.note,callback:function(e){t.$set(t.addform,"note",e)},expression:"addform.note"}})],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:t.handleCancel}},[t._v("取 消")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:t.saveLoading},on:{click:t.handleSave}},[t._v("保存")])],1)])],1)},n=[],i=(a("d3b7"),a("25f0"),a("ed08"),{data:function(){return{currentStep:0,isModalVisible:!1,saveLoading:!1,leftSourceData:[],rightTargetKeys:[],isParentOrg:"parent",spinning:!0,addform:{orgNum:"",orgName:"",orgAlias:"",status:"",startDate:"",endDate:"",note:"",sx:""}}},methods:{reset:function(){this.leftSourceData=[],this.rightTargetKeys=[]},open:function(){this.spinning=!0,this.$refs.crm.open(),this.getTestData()},close:function(){this.$refs.crm.close()},handleSave:function(){var e=this;this.saveLoading=!0,setTimeout(function(){e.saveLoading=!1,e.$refs.crm.close()},2e3),this.$message.success("触发保存事件")},getTestData:function(){var t=this;new Promise(function(e,t){for(var a=[],r=0;r<20;r++){var n={key:r.toString(),title:"测试用户项"+(r+1),disabled:r%3<1};a.push(n)}e(a)}).then(function(e){setTimeout(function(){t.leftSourceData=e,t.spinning=!1},1e3)})},handleCancel:function(){var e=this;this.$confirm({title:"表单存在内容",content:"表单上已有输入的信息，关闭后信息会清空，确认关闭吗？",onOk:function(){e.$message.info("触发关闭事件"),e.$refs.crm.close()},onCancel:function(){}})},filterOption:function(e,t){return t.title.indexOf(e)>-1},handleChange:function(e,t,a){this.rightTargetKeys=e},handleSearch:function(e,t){}},mounted:function(){this.$nextTick(function(){})}}),o=i,s=a("2877"),l=Object(s["a"])(o,r,n,!1,null,null,null);t["default"]=l.exports},aee7:function(e,t,a){},afbe:function(e,t,a){"use strict";a.r(t);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"userAddBox"}},[a("c-resizable-modal",{ref:"crm",attrs:{title:"新增角色"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t.isSave?a("a-result",{attrs:{status:"success",title:"已保存数据","sub-title":"窗口将在1秒后关闭"}}):a("div",[a("div",{attrs:{id:"stepBox"}},[a("a-steps",{attrs:{current:t.nowStep,size:"small"}},[a("a-step",{attrs:{title:"第一部分"}}),a("a-step",{attrs:{title:"第二部分"}}),a("a-step",{attrs:{title:"第三部分"}})],1)],1),a("a-form-model",{attrs:{"label-col":{span:4},"wrapper-col":{span:14}}},[0==t.nowStep?a("div",[a("a-form-model-item",{attrs:{label:"角色名称"}},[a("a-input")],1),a("a-form-model-item",{attrs:{label:"角色别名"}},[a("a-input")],1),a("a-form-model-item",{attrs:{label:"角色状态"}},[a("a-radio-group",{attrs:{options:t.roleStatusGroup,"default-value":t.roleStatusGroup[0]}})],1),a("a-form-model-item",{attrs:{label:"项目授权"}},[a("c-check-tree",{attrs:{propTreeData:t.treeData},model:{value:t.xmsq,callback:function(e){t.xmsq=e},expression:"xmsq"}})],1),a("a-form-model-item",{attrs:{label:"菜单授权"}},[a("c-check-tree",{attrs:{propTreeData:t.tree2data},model:{value:t.cdsq,callback:function(e){t.cdsq=e},expression:"cdsq"}})],1)],1):t._e(),1==t.nowStep?a("div",[a("a-form-model-item",{attrs:{label:"补录表授权"}},[a("c-check-tree",{attrs:{propTreeData:t.treeData},model:{value:t.xmsq,callback:function(e){t.xmsq=e},expression:"xmsq"}})],1),a("a-form-model-item",{attrs:{label:"备注"}},[a("a-input",{attrs:{type:"textarea"}})],1)],1):t._e()])],1)],1),a("template",{slot:"footer"},[a("a-button",{attrs:{icon:"left",disabled:0==t.nowStep},on:{click:function(e){t.nowStep--}}},[t._v("上一页")]),a("a-button",{attrs:{icon:"right",disabled:2==t.nowStep},on:{click:function(e){t.nowStep++}}},[t._v("下一页")]),a("a-button",{attrs:{type:"primary",icon:"check",disabled:t.isSave},on:{click:t.saveData}},[t._v(t._s(2==t.nowStep?"全部":"直接")+"保存")])],1)],2)],1)},n=[],i={data:function(){return{isModalVisible:!1,isSave:!1,confirmLoading:!1,roleStatusGroup:["正常","停用"],nowStep:0,cdsq:[],xmsq:[],modalStyle:{width:"70%",top:"50px",height:"auto"},treeData:[{title:"parent 1",key:"0-0",children:[{title:"parent 1-0",key:"0-0-0",disabled:!0,children:[{title:"leaf",key:"0-0-0-0",disableCheckbox:!0},{title:"leaf",key:"0-0-0-1",disableCheckbox:!0}]},{title:"parent 1-1",key:"0-0-1",children:[{key:"0-0-1-0",title:"title0010"},{key:"0-0-1-1",title:"title12310"}]},{title:"parent 1-2",key:"0-2-1",children:[{key:"0-20-1-0",title:"title0010"}]}]}],tree2data:[{title:"福建省",key:"fjs",children:[{title:"厦门市",key:"xms",disabled:!0,children:[{title:"湖里区",key:"0-0-0-0",disableCheckbox:!0},{title:"思明区",key:"0-0-0-1",disableCheckbox:!0}]},{title:"福州市",key:"0-0-1",children:[{key:"0-0-1-0",title:"鼓楼区"},{key:"0-0-1-1",title:"仓山区"}]},{title:"漳州市",key:"0-2-1",children:[{key:"0-20-1-0",title:"龙海区"}]}]},{title:"重庆市",key:"cq",children:[{title:"重庆市",key:"cqqq",children:[{title:"沙坪坝区",key:"qwghn"},{title:"南坪区",key:"sdg2"}]}]}]}},components:{},methods:{aa:function(){},open:function(){this.isSave=!1,this.$refs.crm.open(),this.nowStep=0},saveData:function(){var e=this;this.isSave=!0,setTimeout(function(){e.$refs.crm.close()},1e3)},handleOk:function(){},handleCancel:function(){this.$refs.crm.close()}}},o=i,s=(a("8028"),a("2877")),l=Object(s["a"])(o,r,n,!1,null,"e7b0f320",null);t["default"]=l.exports},b3e2:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"permission-config white-back-box"},[a("c-query-form-table",{attrs:{searchParams:e.par,tableData:e.tableData,tableColumns:e.tableColumns,needTableCheckList:!0,selectTableKeys:e.selectTableKeys,loadingFlag:e.loadingFlag},on:{selectTableKeysChangeFromQFT:e.selectTableKeysChangeFromQFT,reloadData:e.reloadData,formQuery:e.formQuery,dbClick:e.dbClick}},[a("template",{staticClass:"btn-box",slot:"functionBtnBox"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"plus"},on:{click:e.openReportConfig}},[e._v("报表权限配置")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"edit"},on:{click:e.openIRConfig}},[e._v("补录表权限配置")])],1)],2),a("ModalReportAuthConfig",{ref:"ModalReportAuthConfig"}),a("ModalIRAuthConfig",{ref:"ModalIRAuthConfig"})],1)},n=[],i=(a("d3b7"),a("25f0"),a("99af"),a("63a1")),o=a("bd3d"),s=a("ce7e"),l=a("c1b4"),c={data:function(){return{par:[{name:"menuCode",label:"菜单编号",type:"input"},{name:"menuName",label:"菜单名称",type:"input"},{name:"menuTitle",label:"菜单提示",type:"input"},{name:"parentSid",label:"父菜单编号",type:"input"},{name:"menuType",label:"菜单类型",type:"select",selectList:[{key:"1",value:"目录"},{key:"2",value:"菜单"},{key:"3",value:"项目"},{key:"4",value:"按钮 "}]},{name:"link",label:"是否为外链菜单",type:"select",selectList:[{key:"0",value:"是"},{key:"1",value:"否"}]},{name:"RoutingAddress",label:"路由地址",type:"input"},{name:"RoutingParame",label:"路由参数",type:"input"},{name:"ComponentPath",label:"组件路径",type:"input"},{name:"Permissions",label:"权限标识",type:"input"},{name:"cache",label:"是否缓存",type:"select",selectList:[{key:"0",value:"缓存"},{key:"1",value:"不缓存"}]},{name:"sort",label:"排序",type:"input"},{name:"visible",label:"菜单可见",type:"select",selectList:[{key:"0",value:"显示"},{key:"1",value:"隐藏"}]},{name:"status",label:"菜单状态",type:"select",selectList:[{key:"0",value:"正常"},{key:"1",value:"停用"}]},{name:"icon",label:"菜单图标",type:"input"},{name:"creatorSid",label:"创建者编号",type:"input"},{name:"createTime",label:"创建时间",type:"datetime"},{name:"editorSid",label:"修改者编号",type:"input"},{name:"updateTime",label:"修改时间",type:"datetime"},{name:"remark",label:"备注",type:"input"}],tableData:{},orgTree:[],value:void 0,treeData:[],tableColumns:[{key:"menuCode",dataIndex:"menuCode",title:"菜单编号"},{key:"menuName",dataIndex:"menuName",title:"菜单名称"},{key:"menuTitle",dataIndex:"menuTitle",title:"菜单提示"},{key:"parentSid",dataIndex:"parentSid",title:"父菜单编号"},{key:"menuType",dataIndex:"menuType",title:"菜单类型"},{key:"link",dataIndex:"link",title:"是否为外链菜单"},{key:"RoutingAddress",dataIndex:"RoutingAddress",title:"路由地址"},{key:"RoutingParame",dataIndex:"RoutingParame",title:"路由参数"},{key:"ComponentPath",dataIndex:"ComponentPath",title:"组件路径"},{key:"Permissions",dataIndex:"Permissions",title:"权限标识"},{key:"cache",dataIndex:"cache",title:"是否缓存"},{key:"sort",dataIndex:"sort",title:"排序"},{key:"visible",dataIndex:"visible",title:"菜单可见"},{key:"status",dataIndex:"status",title:"菜单状态"},{key:"icon",dataIndex:"icon",title:"菜单图标"},{key:"creatorCode",dataIndex:"creatorCode",title:"创建者编号"},{key:"createTime",dataIndex:"createTime",title:"创建时间"},{key:"editorCode",dataIndex:"editorCode",title:"修改者编号"},{key:"updateTime",dataIndex:"updateTime",title:"修改时间"},{key:"remark",dataIndex:"remark",title:"备注"}],selectTableKeys:[],loadingFlag:!1}},created:function(){},methods:{loadData:function(){var t=this;Object(i["l"])().then(function(e){t.treeData=e.data})},handleLoadData:function(e,t){var a=this;"{}"===JSON.stringify(e)&&(e.pageNum=this.tableData.pageNum,e.pageSize=this.tableData.pageSize),this.selectTableKeys=[],this.loadingFlag=!0,Object(l["a"])(e.pageNum,e.pageSize,t).then(function(e){a.$nextTick(function(){a.tableData.content=e.rows,a.tableData.totalSize=e.total,a.tableData.totalPages=Math.ceil(a.tableData.totalSize/a.tableData.pageSize)})}).finally(function(){setTimeout(function(){a.loadingFlag=!1},500)})},handleDelete:function(e){var t=this;this.$confirm({title:"删除数据确认",content:"即将删除".concat(e.length,"项数据，请确认删除的类型"),okText:"物理删除",okType:"danger",closable:!0,cancelText:"逻辑删除",onOk:function(){t.handleConfirmOk(e,0)},onCancel:function(){t.handleConfirmOk(e,1)}})},handleConfirmOk:function(t,a){var r=this,n=this;deletePermission({id:t.toString(),type:a}).then(function(e){if(200!==e.code||!0!==e.status)throw new Error(e.msg);n.reloadData({}),n.$message.success("已".concat(1==a?"逻辑":"物理","删除").concat(t.length,"项数据"))}).catch(function(e){r.$message.error("请求错误："+e.message)})},reloadData:function(e){if("{}"!==JSON.stringify(e)){var t=e.pageNum,a=e.pageSize;this.tableData.pageNum=t,this.tableData.pageSize=a}this.handleLoadData({},null)},formQuery:function(e){this.handleLoadData({},e)},dbClick:function(e){this.handleEdit(e.sid)},handleAdd:function(){this.$refs.orgDetailModal.open({mode:"insert"})},handleEdit:function(e){this.$refs.orgDetailModal.open({mode:"edit",sid:e})},openReportConfig:function(){this.$refs.ModalReportAuthConfig.open()},openIRConfig:function(){this.$refs.ModalIRAuthConfig.open()},selectTableKeysChangeFromQFT:function(e){this.selectTableKeys=e}},components:{ModalReportAuthConfig:o["default"],ModalIRAuthConfig:s["default"]}},d=c,u=(a("3fcf"),a("2877")),m=Object(u["a"])(d,r,n,!1,null,"1ccd6dab",null);t["default"]=m.exports},b733:function(e,t,a){"use strict";a("4376")},bd3d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"ModalPermissionAuthConfig"}},[a("c-resizable-modal",{ref:"crm",attrs:{title:"报表权限配置"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("a-steps",{attrs:{current:e.currentStep}},[a("a-step",{attrs:{title:"第一步",description:"请勾选相应报表"}}),a("a-step",{attrs:{title:"第二步",description:"请勾选相应机构"}}),a("a-step",{attrs:{title:"最后",description:"请勾选相应的菜单权限"}})],1),0==e.currentStep?[a("a-spin",{attrs:{tip:"正在请求数据...",spinning:e.spinning}},[a("c-check-tree",{attrs:{propTreeData:e.propTreeData,checkedKeys:e.checkedKeys,placeholder:"输入报表名查询..."},on:{changeCheckedKeys:e.changeCheckedKeys}})],1)]:e._e(),1==e.currentStep?[a("a-spin",{attrs:{tip:"正在请求数据...",spinning:e.spinning}},[a("c-check-tree",{attrs:{propTreeData:e.propTreeData,checkedKeys:e.checkedKeys,placeholder:"输入报机构名称查询..."},on:{changeCheckedKeys:e.changeCheckedKeys}})],1)]:e._e(),2==e.currentStep?[a("a-spin",{attrs:{tip:"正在请求数据...",spinning:e.spinning}},[a("c-check-tree",{attrs:{propTreeData:e.propTreeData,checkedKeys:e.checkedKeys,placeholder:"输入菜单名查询..."},on:{changeCheckedKeys:e.changeCheckedKeys}})],1)]:e._e()],2),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:e.handleCancel}},[e._v("取 消")]),a("a-button",{attrs:{icon:"left",disabled:0==e.currentStep},on:{click:e.prevStep}},[e._v("山一部")]),a("a-button",{attrs:{icon:"right",type:"primary",disabled:e.currentStep>1},on:{click:e.nextStep}},[e._v("下一部分")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:e.saveLoading},on:{click:e.handleSave}},[e._v("保存")])],1)])],1)},n=[],i=(a("d3b7"),a("25f0"),a("ed08"),{data:function(){return{currentStep:0,isModalVisible:!1,saveLoading:!1,checkedKeys:[],propTreeData:[],leftSourceData:[],rightTargetKeys:[],spinning:!0}},methods:{reset:function(){this.leftSourceData=[],this.rightTargetKeys=[]},open:function(){this.reset(),this.spinning=!0,this.$refs.crm.open(),this.saveLoading=!1,this.getTestData()},prevStep:function(){0!=this.currentStep&&this.currentStep--},nextStep:function(){3!=this.currentStep&&this.currentStep++},handleSave:function(){var e=this;this.saveLoading=!0,setTimeout(function(){e.$refs.crm.close()},1e3),this.$message.success("触发保存事件")},changeCheckedKeys:function(e){this.checkedKeys=e},getTestData:function(){var t=this;new Promise(function(e,t){for(var a=[],r=0;r<5;r++){for(var n={key:r.toString(),title:"测试数据项"+(r+1)},i=[],o=0;o<2;o++)i.push({key:r.toString()+"-"+o.toString(),title:"测试数据"+(r+1)+"的儿子"+o});n.children=i,a.push(n)}a=[{key:"zero",title:"父亲父亲",children:a}],e(a)}).then(function(e){setTimeout(function(){t.propTreeData=e,t.spinning=!1},1e3)})},handleCancel:function(){var e=this;this.$confirm({title:"表单存在内容",content:"表单上已有输入的信息，关闭后信息会清空，确认关闭吗？",onOk:function(){e.$message.info("触发关闭事件"),e.$refs.crm.close()},onCancel:function(){}})},filterOption:function(e,t){return t.title.indexOf(e)>-1},handleChange:function(e,t,a){this.rightTargetKeys=e},handleSearch:function(e,t){}},mounted:function(){this.$nextTick(function(){})}}),o=i,s=a("2877"),l=Object(s["a"])(o,r,n,!1,null,null,null);t["default"]=l.exports},bd43:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"75%",title:e.title}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("a-spin",{attrs:{tip:"正在请求数据...",spinning:e.spinning}},[a("a-transfer",{staticStyle:{margin:"0 auto"},attrs:{"list-style":{width:"45%",height:"300px"},dataSource:e.leftSourceData,targetKeys:e.rightTargetKeys,titles:["待分配角色","已选择角色"],"show-search":"","filter-option":e.filterOption,render:function(e){return e.title}},on:{change:e.handleChange}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:e.handleCancel}},[e._v("取 消")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:e.saveLoading},on:{click:e.handleSave}},[e._v("保存")])],1)])],1)},n=[],o=(a("99af"),a("d3b7"),a("25f0"),a("3528")),s=a("ed08"),i={data:function(){return{currentStep:0,isModalVisible:!1,saveLoading:!1,leftSourceData:[],rightTargetKeys:[],spinning:!0,roleInfo:{}}},computed:{title:function(){var e=this.roleInfo,t=e.roleName,a=e.roleCode;return"角色 “ ".concat(t,"（").concat(a,"）” 的用户授权（分配）")}},methods:{reset:function(){this.leftSourceData=[],this.rightTargetKeys=[],this.roleInfo={}},open:function(e){this.reset(),this.roleInfo=e,this.getUserRoleData(e),this.$refs.crm.open()},getUserRoleData:function(e){var i=this,t=this;this.spinning=!0,Object(o["g"])(e.sid).then(function(e){if(!Object(s["l"])(e))throw new Error(e.msg);var t=[],a=[];for(var r in e.data){var n={key:e.data[r].sid,title:e.data[r].userName};t.push(n),"0"===e.data[r].isRelation&&a.push(e.data[r].sid)}i.$nextTick(function(){i.leftSourceData=t,i.rightTargetKeys=a})}).catch(function(e){i.$message.error("请求异常："+e.message)}).finally(function(){t.spinning=!1})},handleSave:function(){var t=this;this.saveLoading=!0;var e={roleSid:this.roleInfo.sid,userSid:this.rightTargetKeys.toString()};Object(o["l"])(e).then(function(e){if(!Object(s["l"])(e))throw new Error(e.msg);t.$message.success("角色与用户信息已更新"),t.$refs.crm.close()}).catch(function(e){t.$message.warning("角色与用户信息更新失败。"+e.message)}).finally(function(){t.saveLoading=!1})},handleCancel:function(){this.$refs.crm.close()},filterOption:function(e,t){return t.title.indexOf(e)>-1},handleChange:function(e,t,a){this.rightTargetKeys=e}}},l=i,c=a("2877"),d=Object(c["a"])(l,r,n,!1,null,"63f9f209",null);t["default"]=d.exports},c029:function(e,t,a){"use strict";a("ed05")},ce6f:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"menuAccr"}},[a("c-resizable-modal",{ref:"crm",attrs:{title:"补录报表授权"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("h4",[e._v(" 角色名称：****** "),a("a-divider",{attrs:{type:"vertical"}}),e._v(" 角色编号：****** ")],1),a("a-spin",{attrs:{tip:"正在请求数据...",spinning:e.spinning}},[a("c-check-tree",{attrs:{propTreeData:e.propTreeData,checkedKeys:e.checkedKeys},on:{changeCheckedKeys:e.changeCheckedKeys}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:e.handleCancel}},[e._v("取 消")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:e.saveLoading},on:{click:e.handleSave}},[e._v("保存")])],1)])],1)},n=[],i=(a("d3b7"),a("25f0"),a("ed08"),void 0),o={data:function(){return{currentStep:0,isModalVisible:!1,saveLoading:!1,checkedKeys:[],propTreeData:[],leftSourceData:[],rightTargetKeys:[],spinning:!0}},methods:{reset:function(){this.leftSourceData=[],this.rightTargetKeys=[]},open:function(){this.reset(),this.spinning=!0,this.$refs.crm.open(),this.getTestData()},handleSave:function(){var e=this;this.saveLoading=!0,setTimeout(function(){e.saveLoading=!1,i.$refs.crm.close()},2e3),this.$message.success("触发保存事件")},changeCheckedKeys:function(e){this.checkedKeys=e},getTestData:function(){var t=this;new Promise(function(e,t){for(var a=[],r=0;r<5;r++){for(var n={key:r.toString(),title:"补录测试数据项"+(r+1)},i=[],o=0;o<2;o++)i.push({key:r.toString()+"-"+o.toString(),title:"补录测试数据"+(r+1)+"的儿子"+o});n.children=i,a.push(n)}a=[{key:"zero",title:"父亲父亲",children:a}],e(a)}).then(function(e){setTimeout(function(){t.propTreeData=e,t.spinning=!1},1e3)})},handleCancel:function(){var e=this;this.$confirm({title:"表单存在内容",content:"表单上已有输入的信息，关闭后信息会清空，确认关闭吗？",onOk:function(){e.$message.info("触发关闭事件"),e.$refs.crm.close()},onCancel:function(){}})},filterOption:function(e,t){return t.title.indexOf(e)>-1},handleChange:function(e,t,a){this.rightTargetKeys=e},handleSearch:function(e,t){}},mounted:function(){this.$nextTick(function(){})}},s=o,l=a("2877"),c=Object(l["a"])(s,r,n,!1,null,null,null);t["default"]=c.exports},ce7e:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"ModalIRAuthConfig"}},[a("c-resizable-modal",{ref:"crm",attrs:{title:"补录报表权限配置"}},[a("a-steps",{attrs:{current:e.currentStep}},[a("a-step",{attrs:{title:"第一步",description:"请勾选相应补录报表"}}),a("a-step",{attrs:{title:"第二步",description:"请勾选相应补录机构"}}),a("a-step",{attrs:{title:"最后",description:"请勾选相应的补录菜单权限"}})],1),0==e.currentStep?[a("a-spin",{attrs:{tip:"正在请求数据...",spinning:e.spinning}},[a("c-check-tree",{attrs:{propTreeData:e.propTreeData,checkedKeys:e.checkedKeys,placeholder:"输入报表名查询..."},on:{changeCheckedKeys:e.changeCheckedKeys}})],1)]:e._e(),1==e.currentStep?[a("a-spin",{attrs:{tip:"正在请求数据...",spinning:e.spinning}},[a("c-check-tree",{attrs:{propTreeData:e.propTreeData,checkedKeys:e.checkedKeys,placeholder:"输入报机构名称查询..."},on:{changeCheckedKeys:e.changeCheckedKeys}})],1)]:e._e(),2==e.currentStep?[a("a-spin",{attrs:{tip:"正在请求数据...",spinning:e.spinning}},[a("c-check-tree",{attrs:{propTreeData:e.propTreeData,checkedKeys:e.checkedKeys,placeholder:"输入菜单名查询..."},on:{changeCheckedKeys:e.changeCheckedKeys}})],1)]:e._e(),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:e.handleCancel}},[e._v("取 消")]),a("a-button",{attrs:{icon:"left",disabled:0==e.currentStep},on:{click:e.prevStep}},[e._v("山一部")]),a("a-button",{attrs:{icon:"right",type:"primary",disabled:e.currentStep>1},on:{click:e.nextStep}},[e._v("下一部分")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:e.saveLoading},on:{click:e.handleSave}},[e._v("保存")])],1)],2)],1)},n=[],i=a("2877"),o={},s=Object(i["a"])(o,r,n,!1,null,null,null);t["default"]=s.exports},de03:function(e,t,a){"use strict";a.r(t),a.d(t,"statusParam",function(){return r}),a.d(t,"builtInParam",function(){return n}),a.d(t,"dataScopdeParam",function(){return i}),a.d(t,"delFlagParam",function(){return o});var r={0:"正常",1:"停用"},n={0:"否",1:"是"},i={1:"全部数据权限",2:"自定机构数据权限",3:"本部门数据权限",4:"本部门及以下数据权限"},o={0:"存在",1:"删除"}},e56d:function(e,t,a){"use strict";a.r(t);var r=function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{staticClass:"project-config white-back-box",attrs:{id:"projectConfig"}},[r("c-query-form-table",{attrs:{searchParams:a.par,tableData:a.tableData,tableColumns:a.tableColumns,needTableCheckList:!0,selectTableKeys:a.selectTableKeys,loadingFlag:a.loadingFlag},on:{selectTableKeysChangeFromQFT:a.selectTableKeysChangeFromQFT,formQuery:a.formQuery,dbClick:a.dbClick,reloadData:a.reloadData},scopedSlots:a._u([{key:"status",fn:function(e){return r("span",{},[r("span",[a._v(a._s(a.statusParam[e.data.status]))])])}},{key:"tableActionBox",fn:function(t){return[r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:projectdef:edit"],expression:"['system:projectdef:edit']"}],attrs:{type:"link"},on:{click:function(e){return a.handleEdit(t.data.sid)}}},[a._v("编辑")]),r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:projectdef:delete"],expression:"['system:projectdef:delete']"}],attrs:{type:"link"},on:{click:function(e){return a.handleDelete([t.data.sid])}}},[a._v("删除")])]}}])},[r("template",{staticClass:"btn-box",slot:"functionBtnBox"},[r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:projectdef:add"],expression:"['system:projectdef:add']"}],staticClass:"margin-box",attrs:{type:"primary",icon:"plus"},on:{click:function(e){return a.handleAdd(null)}}},[a._v("新增")]),r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:projectdef:edit"],expression:"['system:projectdef:edit']"}],staticClass:"margin-box",attrs:{type:"primary",icon:"edit",disabled:1!==a.selectTableKeys.length},on:{click:function(e){return a.handleEdit(a.selectTableKeys[0])}}},[a._v("修改")]),r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:projectdef:delete"],expression:"['system:projectdef:delete']"}],staticClass:"margin-box",attrs:{type:"primary",disabled:a.selectTableKeys.length<1,icon:"delete"},on:{click:function(e){return a.handleDelete(a.selectTableKeys)}}},[a._v("删除")])],1)],2),r("projectDetailModal",{ref:"projectDetailModal"}),r("file-import-modal",{ref:"FileImportModal",on:{readToPostFile:a.readToPostFile,uploadSuccess:a.uploadSuccess}})],1)},n=[],i=(a("d3b7"),a("25f0"),a("6b96")),o=a("c28a"),s=a("d2b6"),l=a("277d"),c=a("ed08"),d=a("f5ef"),u={data:function(){return{statusParam:l["statusParam"],selectTableKeys:[],loadingFlag:!1,isExportTplBtnLoad:!1,isExportBtnLoad:!1,queryParam:{},par:[{name:"projectCode",label:"项目编号",type:"input"},{name:"projectName",label:"项目名称",type:"input"},{name:"status",label:"项目状态",type:"select",selectList:[{key:"0",value:"正常"},{key:"1",value:"停用"}]},{name:"creatorSid",label:"创建者编号",type:"input"},{name:"createTime",label:"创建时间",type:"datetime"},{name:"editorSid",label:"修改者编号",type:"input"},{name:"updateTime",label:"修改时间",type:"datetime"},{name:"remark",label:"备注",type:"input"}],tableData:{pageSize:10,pageNum:1,totalPages:1,totalSize:1,content:[]},value:void 0,treeData:[],tableColumns:[{title:"项目编号",dataIndex:"projectCode",key:"projectCode"},{title:"项目名称",dataIndex:"projectName",key:"projectName"},{title:"项目状态",dataIndex:"status",key:"status",hasSlot:!0},{title:"创建者编号",dataIndex:"creatorSid",key:"creatorSid"},{title:"创建时间",dataIndex:"createTime",key:"createTime"},{title:"修改者编号",dataIndex:"editorSid",key:"editorSid"},{title:"修改时间",dataIndex:"updateTime",key:"updateTime"},{title:"备注",dataIndex:"remark",key:"remark"}],selectedKeys:[],treeMenuList:[{menuKey:"insert",menuName:"新增",icon:"plus"},{menuKey:"edit",menuName:"修改",icon:"edit"},{menuKey:"delete",menuName:"删除",icon:"delete"}],deleteType:!1}},mounted:function(){this.treeData=this.tableData.content;var e=this,t=this.tableData,a=t.pageNum,r=t.pageSize;this.handleLoadData({pageNum:a,pageSize:r},{delFlag:"0"}),d["a"].$on("reloadData",function(){e.reloadData({},{delFlag:"0"})})},methods:{rightClickMenuItem:function(e,t){switch(t){case"insert":this.handleAdd(e);break;case"edit":this.handleEdit(e);break;case"delete3":this.handleDelete([e]);break}},onTreeSelect:function(e,t){this.formQuery({sid:e[0]})},handleSetFailure:function(t){var a=this,r=this;t.length<1&&this.$message.warning("至少需要选择1条以上的数据来执行操作"),Object(s["i"])(t).then(function(e){if(!Object(c["l"])(e))throw new Error(e.msg);r.reloadData({}),r.$message.success("已设置失效".concat(t.length,"项数据"))}).catch(function(e){a.$message.error("请求错误："+e.message)})},handleLoadData:function(e,t){var a=this;"{}"===JSON.stringify(e)&&(e.pageNum=this.tableData.pageNum,e.pageSize=this.tableData.pageSize),this.loadingFlag=!0,this.selectTableKeys=[],Object(s["e"])(e.pageNum,e.pageSize,t).then(function(e){a.$nextTick(function(){a.tableData.content=e.rows,a.tableData.totalSize=e.total,a.tableData.totalPages=Math.ceil(a.tableData.totalSize/a.tableData.pageSize)})}).finally(function(){setTimeout(function(){a.loadingFlag=!1},500)})},handleDelete:function(t){this.$createElement;var e=this;this.$confirm({title:"删除数据确认",content:function(e){return e("div",["即将",e("span",{class:"textRed"},["以物理删除方式"]),"删除",t.length,"项数据，确认删除？"])},onOk:function(){e.handleConfirmOk(t)}})},handleConfirmOk:function(t){var a=this,r=this;Object(s["b"])({id:t.toString(),countNum:t.length}).then(function(e){if(!Object(c["l"])(e))throw new Error(e.msg);r.reloadData({}),r.$message.success("已删除".concat(t.length,"项数据")),a.selectTableKeys=[]}).catch(function(e){a.$message.error("请求错误："+e.message)})},reloadData:function(e){if("{}"!==JSON.stringify(e)){var t=e.pageNum,a=e.pageSize;this.tableData.pageNum=t,this.tableData.pageSize=a}this.handleLoadData({},null)},formQuery:function(e){this.queryParam=e,this.handleLoadData({},e)},dbClick:function(e){this.handleEdit(e.sid)},handleAdd:function(e){this.$refs.projectDetailModal.open({mode:"insert",sid:e})},handleEdit:function(e){this.$refs.projectDetailModal.open({mode:"edit",sid:e})},selectTableKeysChangeFromQFT:function(e){this.selectTableKeys=e},handleOpenImportBox:function(){this.$refs.FileImportModal.open()},readToPostFile:function(e){var a=this;Object(s["h"])(e).then(function(e){var t=Object(c["l"])(e);a.$refs.FileImportModal.showImportResult(e,t)}).catch(function(e){a.$refs.FileImportModal.showImportResult(e.message,!1)})},uploadSuccess:function(){this.handleLoadData({},this.queryParam)},handleExportProjectData:function(){var t=this;this.isExportBtnLoad=!0,Object(s["c"])(this.queryParam).then(function(e){if(e.data.msg)throw new Error(e.msg);Object(c["f"])(e)}).catch(function(e){t.$message.warning(e.message)}).finally(function(){t.isExportBtnLoad=!1})},handleExportTemplate:function(){var t=this;this.isExportTplBtnLoad=!0,Object(s["d"])(this.queryParam).then(function(e){if(e.data.msg)throw new Error(e.msg);Object(c["f"])(e)}).catch(function(e){t.$message.warning(e.message)}).finally(function(){t.isExportTplBtnLoad=!1})}},components:{projectDetailModal:i["default"],FileImportModal:o["default"]}},m=u,p=(a("612a4"),a("2877")),f=Object(p["a"])(m,r,n,!1,null,"37711d50",null);t["default"]=f.exports},ed05:function(e,t,a){},fd3d:function(e,t,a){}}]);