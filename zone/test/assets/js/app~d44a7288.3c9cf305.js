(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app~d44a7288"],{"135b":function(e,t,a){"use strict";a("1b5d")},"1b5d":function(e,t,a){},"244d4":function(e,t,a){"use strict";a.r(t);var n=function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("div",{attrs:{id:"notifyTabTable"}},[n("a-tabs",{attrs:{"default-active-key":"all"},on:{change:a.switchTableType}},[n("a-tab-pane",{key:"all"},[n("span",{attrs:{slot:"tab"},slot:"tab"},[n("a-badge",{attrs:{count:a.remindCount.all,offset:[15,0]}},[n("a-icon",{attrs:{type:"apple"}}),n("span",[a._v(" 全部催办")])],1)],1)]),n("a-tab-pane",{key:"system"},[n("span",{attrs:{slot:"tab"},slot:"tab"},[n("a-badge",{attrs:{count:a.remindCount.system,offset:[15,0]}},[n("a-icon",{attrs:{type:"apple"}}),n("span",[a._v("系统催办")])],1)],1)]),n("a-tab-pane",{key:"user"},[n("span",{attrs:{slot:"tab"},slot:"tab"},[n("a-badge",{attrs:{count:a.remindCount.user,offset:[15,0]}},[n("a-icon",{attrs:{type:"apple"}}),n("span",[a._v(" 用户催办")])],1)],1)])],1),n("c-muti-func-table",{attrs:{tableData:a.remindShowData,tableColumns:a.columns,needCheckList:!1},scopedSlots:a._u([{key:"time",fn:function(e){return n("span",{},[a._v(" "+a._s(a.formateTime(e.time))+" ")])}},{key:"actionBox",fn:function(t){return n("span",{},[n("a-button",{attrs:{type:"link"},on:{click:function(e){return a.openReportDetail(t.data._id)}}},[a._v("查看")])],1)}}])})],1)},i=[],r={},o=r,s=a("2877"),l=Object(s["a"])(o,n,i,!1,null,null,null);t["default"]=l.exports},"286b":function(e,t,a){"use strict";a("36a9")},"36a9":function(e,t,a){},3832:function(e,t,n){"use strict";n.r(t);var a=function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("div",{attrs:{id:"previewCardBox"}},[a.menuData.children&&a.menuData.children.length>0?n("div",{staticClass:"card-box"},a._l(a.menuData.children,function(t,e){return n("div",{key:e,staticClass:"card"},[n("div",{staticClass:"flex-box"},[n("h3",{staticClass:"title text-flow",on:{click:function(e){return a.handleCardClick(t)}}},[a._v(a._s(t.title))])]),n("div",{staticClass:"flex-box"},[n("div",[n("img",{staticStyle:{width:"100%"},attrs:{src:a.convertIcon(t.isDirectory,t.title)}})]),n("ul",{staticClass:"data-list"},[n("li",{staticClass:" text-flow"},[a._v("路径："),n("p",{staticClass:"property"},[a._v(a._s(t.path))])]),t.children&&t.children.length>0?n("li",{staticClass:" text-flow"},[a._v("文件："),n("p",{staticClass:"property"},[a._v(a._s(t.children.length)+"项")])]):a._e()])]),n("div",[n("a-tooltip",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["file:fileview:rename"],expression:"['file:fileview:rename']"}]},[n("template",{slot:"title"},[a._v(" 重命名 ")]),n("a-button",{attrs:{icon:"edit",type:"link",ghost:""},on:{click:function(e){return a.handleRename(t)}}})],2),n("a-tooltip",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["file:fileview:delete"],expression:"['file:fileview:delete']"}]},[n("template",{slot:"title"},[a._v(" 删除 ")]),n("a-button",{attrs:{icon:"delete",type:"link",ghost:""},on:{click:function(e){return a.handleDelete(t)}}})],2),n("a-tooltip",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["file:fileview:upload"],expression:"['file:fileview:upload']"}]},[n("template",{slot:"title"},[a._v(" 上传文件 ")]),t.isDirectory?n("a-button",{attrs:{icon:"cloud-upload",ghost:"",type:"link"},on:{click:function(e){return a.handleUpload(t)}}}):a._e()],2),n("a-tooltip",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["file:fileview:download"],expression:"['file:fileview:download']"}]},[n("template",{slot:"title"},[a._v(" 下载 ")]),t.isDirectory?a._e():n("a-button",{attrs:{icon:"download",ghost:"",type:"link"},on:{click:function(e){return a.handleDownloadFile(t)}}})],2),n("a-tooltip",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["file:fileview:unzip"],expression:"['file:fileview:unzip']"}]},[n("template",{slot:"title"},[a._v(" 解压缩至当前路径 ")]),a.validFileSuffix("zip",t.path)?n("a-button",{attrs:{icon:"file-zip",ghost:"",type:"link"},on:{click:function(e){return a.handleUnzipFile(t.path)}}}):a._e()],2)],1)])}),0):n("a-empty",{staticStyle:{margin:"0 auto"}},[n("span",{attrs:{slot:"description"},slot:"description"},[a._v("文件夹里没有任何文件")])])],1)},i=[],r=(n("99af"),n("f6db")),o=n("ed08"),s={data:function(){return{}},props:{menuData:{type:Object,default:function(){}}},methods:{validFileSuffix:o["k"],handleDownloadFile:function(e){var t=this,a=Object(o["e"])({path:e.path});Object(r["b"])(a).then(function(e){Object(o["f"])(e)}).catch(function(e){t.$message.error("下载失败。原因：".concat(e.message))})},testPrint:function(e){var t=document.getElementById(e).contentWindow;setTimeout(function(){t.print()},100)},handleCardClick:function(e){this.$emit("clickCard",e)},convertIcon:function(e,t){var a="";return a=e?"folder":Object(o["k"])("image",t)?"image":Object(o["k"])("excel",t)?"excel":Object(o["k"])("zip",t)?"zip":"file",n("6ac5")("./".concat(a,".png"))},handleRename:function(e){this.$emit("rename",e)},handleDelete:function(e){var t=this;this.$confirm({title:"删除确认",content:"即将删除文件".concat(e.children?"夹":"","“").concat(e.title,"”").concat(e.children?"，文件夹内的文件也将一并删除":"","。确认删除？"),okText:"确认删除",okType:"danger",closable:!0,onOk:function(){t.handleConfirmOk(e.path)},onCancel:function(){}})},handleConfirmOk:function(e){this.$emit("delete",e)},handleUpload:function(e){this.$emit("upload",e)},handleUnzipFile:function(e){var t=this,a=new FormData;a.append("path",e),Object(r["f"])(a).then(function(e){t.$message.success("解压缩结果".concat(e.msg)),t.$emit("refresh")}).catch(function(e){t.$message.error("解压缩结果失败：".concat(e.message))})}},mounted:function(){}},l=s,c=(n("bbd6"),n("2877")),u=Object(c["a"])(l,a,i,!1,null,"1db87c40",null);t["default"]=u.exports},"3ad3":function(e,t,a){"use strict";a.r(t);var n=a("8e6a"),i={install:function(e){e.component("c-query-form-table",n["default"])}};t["default"]=i},"40f6":function(e,t,a){},4679:function(e,t,a){"use strict";a("a6c4")},"5b17":function(e,t,a){"use strict";a("40f6")},7171:function(e,t,a){},7343:function(e,t,a){"use strict";a("d3f3")},7619:function(e,t,a){"use strict";a("7171")},8244:function(e,t,a){},"8dae":function(e,t,a){"use strict";a.r(t);var n=function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("a-col",{attrs:{xs:24,sm:12,md:12,lg:8,xl:7}},[n("a-form-model-item",{staticClass:"variety-form-item",attrs:{prop:a.param.name,label:a.param.label,wrapperCol:a.showMoreFormItems?{span:12}:{}}},["input"===a.param.type?[n("a-input",{staticClass:"form-input ",attrs:{allowClear:""},on:{keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.handleEnter.apply(null,arguments)}},model:{value:a.searchForm_,callback:function(e){a.searchForm_=e},expression:"searchForm_"}})]:"textarea"===a.param.type?[n("a-textarea",{staticClass:"form-input",on:{keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.handleEnter.apply(null,arguments)}},model:{value:a.searchForm_,callback:function(e){a.searchForm_=e},expression:"searchForm_"}})]:"select"===a.param.type&&a.param.hasOwnProperty("selectList")&&a.param.selectList.length>0?[n("a-select",{staticClass:"form-input",attrs:{allowClear:"","default-value":a.param.default?"sel_"+a.param.default:"sel_"+a.param.selectList[0].key},on:{keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.handleEnter.apply(null,arguments)}},model:{value:a.searchForm_,callback:function(e){a.searchForm_=e},expression:"searchForm_"}},a._l(a.param.selectList,function(e,t){return n("a-select-option",{key:"sel_"+t,attrs:{value:e.key}},[a._v(a._s(e.value)+" ")])}),1)]:"tree"===a.param.type?[n("a-tree-select",{staticClass:"form-input",attrs:{"dropdown-style":{maxHeight:"400px",overflow:"auto"},"tree-data":a.appendValueToTree(a.param.treeData),"tree-checkable":a.param.multiple,"show-checked-strategy":a.SHOW_PARENT,placeholder:"请单击选择..."},on:{keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.handleEnter.apply(null,arguments)}},model:{value:a.searchForm_,callback:function(e){a.searchForm_=e},expression:"searchForm_"}})]:"date"===a.param.type?[n("a-date-picker",{staticClass:"form-input",attrs:{allowClear:"",valueFormat:a.param.format?a.param.format:"YYYY-MM-DD"},on:{keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.handleEnter.apply(null,arguments)}},model:{value:a.searchForm_,callback:function(e){a.searchForm_=e},expression:"searchForm_"}})]:"datetime"===a.param.type?[n("a-date-picker",{staticClass:"form-input",attrs:{allowClear:"",valueFormat:a.param.format?a.param.format:"YYYY-MM-DD HH:mm:ss",placeholder:"请选择日期与时间",showTime:{format:"HH:mm:ss"}},on:{keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.handleEnter.apply(null,arguments)}},model:{value:a.searchForm_,callback:function(e){a.searchForm_=e},expression:"searchForm_"}})]:"datetimeRange"===a.param.type?[n("a-range-picker",{staticClass:"form-input",attrs:{"show-time":{format:"HH:mm:ss"},valueFormat:a.param.format?a.param.format:"YYYY-MM-DD HH:mm:ss",placeholder:["开始日期时间","结束日期时间"]},on:{keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.handleEnter.apply(null,arguments)}},model:{value:a.searchForm_,callback:function(e){a.searchForm_=e},expression:"searchForm_"}})]:a._e()],2)],1)},i=[],r=(a("ac1f"),a("1276"),a("d3b7"),a("25f0"),a("7bec")),o=a("ed08"),s=a("c1df"),l=a.n(s),c=(a("5c3a"),r["a"].SHOW_PARENT);l.a.locale("zh-cn");var u={props:["param","searchForm","searchFormName","showMoreFormItems"],computed:{searchForm_:{get:function(){var e=this.searchForm;return e&&e.length>0&&"datetimeRange"===this.param.type&&(e=e.toString().split(","),e[0]=l()(e[0]).format("YYYY-MM-DD HH:mm:ss"),e[1]=l()(e[1]).format("YYYY-MM-DD HH:mm:ss")),e},set:function(e){"datetimeRange"===this.param.type&&e.toString(),this.$emit("searchFormChange",e,this.searchFormName)}}},data:function(){return{SHOW_PARENT:c}},methods:{appendValueToTree:o["c"],handleEnter:function(){this.$emit("enterKeyUp")}}},d=u,m=(a("9957"),a("2877")),f=Object(m["a"])(d,n,i,!1,null,"26ee0e87",null);t["default"]=f.exports},"8e6a":function(e,t,a){"use strict";a.r(t);var n=function(){var n=this,e=n.$createElement,a=n._self._c||e;return n.readyRender?a("div",{staticClass:"c-query-form-table"},[a("div",[a("a-form-model",{ref:"form",attrs:{layout:(n.showMoreFormItems,"inline"),model:n.searchForm}},[a("a-row",{attrs:{gutter:14}},[n.searchParams.length>2?[n._l(n.searchParams.slice(0,2),function(e,t){return[a("varietyFormItem",{key:"pai_"+t,attrs:{param:e,showMoreFormItems:n.showMoreFormItems,searchForm:n.searchForm[e.name],searchFormName:e.name},on:{searchFormChange:n.searchFormChange,enterKeyUp:n.handleQuery}})]}),n.showMoreFormItems?[n._l(n.searchParams.slice(2,n.searchParams.length),function(e,t){return[a("varietyFormItem",{key:"pai_"+(t+3),attrs:{param:e,showMoreFormItems:n.showMoreFormItems,searchFormName:e.name,searchForm:n.searchForm[e.name]},on:{enterKeyUp:n.handleQuery,searchFormChange:n.searchFormChange}})]})]:n._e()]:[n._l(n.searchParams,function(e,t){return[a("varietyFormItem",{key:"pai_"+t,attrs:{param:e,searchForm:n.searchForm[e.name],searchFormName:e.name},on:{enterKeyUp:n.handleQuery,searchFormChange:n.searchFormChange}})]})],a("a-col",{directives:[{name:"show",rawName:"v-show",value:!n.showMoreFormItems,expression:"!showMoreFormItems"}],attrs:{xs:24,sm:12,md:12,lg:8,xl:6}},[a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:n.iconQuery,disabled:"search"!==n.iconQuery},on:{click:function(e){return n.handleQuery()}}},[n._v("查询")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:n.iconClear},on:{click:function(e){return n.handleClearForm()}}},[n._v("重置")]),n.searchParams.length>2?[a("a-tooltip",[a("template",{slot:"title"},[n._v(" "+n._s(n.showMoreFormItems?"收缩":"展开剩余")+"表单项 ")]),a("a-button",{attrs:{type:"link",icon:n.showMoreFormItems?"up":"down"},on:{click:function(e){n.showMoreFormItems=!n.showMoreFormItems}}})],2)]:n._e()],2)],2)],1),a("a-row",[a("a-col",{directives:[{name:"show",rawName:"v-show",value:n.showMoreFormItems,expression:"showMoreFormItems"}],staticClass:"query-btn-box",attrs:{span:24}},[a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:n.iconQuery,disabled:"search"!==n.iconQuery},on:{click:function(e){return n.handleQuery()}}},[n._v("查询")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:n.iconClear},on:{click:function(e){return n.handleClearForm()}}},[n._v("重置")]),n.searchParams.length>2?[a("a-tooltip",[a("template",{slot:"title"},[n._v(" "+n._s(n.showMoreFormItems?"收缩":"展开剩余")+"表单项 ")]),a("a-button",{attrs:{type:"link",icon:n.showMoreFormItems?"up":"down"},on:{click:function(e){n.showMoreFormItems=!n.showMoreFormItems}}})],2)]:n._e()],2)],1),a("div",{staticClass:"slotBox"},[n._t("functionBtnBox")],2),a("c-muti-func-table",{staticClass:"muti-func-table",attrs:{emptyText:n.tableEmptyText,loadingFlag:n.loadingFlag,tableData:n.tableData,tableColumns:n.tableColumns,needCheckList:n.needTableCheckList,selectTableKeys:n.selfSelectTableKeys,dataKeyName:n.dataKeyName,needActionBox:n.needActionBox},on:{selectTableKeysChangeFromMFT:n.selectTableKeysChangeFromMFT,reloadData:n.reloadData,dbClick:n.dbClick},scopedSlots:n._u([n._l(n.tableColumns,function(a){return{key:a.scopedSlots?a.scopedSlots.customRender:"",fn:function(e,t){return[n._t(a.scopedSlots?a.scopedSlots.customRender:"",null,{data:e},t)]}}}),{key:"actionBox",fn:function(e){return[n._t("tableActionBox",null,{data:e.data})]}}],null,!0)},[a("template",{slot:"customPageButton"},[n._t("tableCustomPageButton")],2)],2)],1)]):n._e()},i=[],r=(a("99af"),a("d3b7"),a("25f0"),a("b0c0"),a("8dae")),o={data:function(){var a=this;return{readyRender:!0,isTableLoading:!0,showMoreFormItems:!1,formItemLayout:{},searchForm:{},iconQuery:"search",iconClear:"reload",pagination:{defaultPageSize:5,showQuickJumper:!0,showSizeChanger:!0,showTotal:function(e,t){return"共".concat(e,"条数据，当前第").concat(Math.floor(t[0]/a.pagination.defaultPageSize)+1,"/").concat(Math.ceil(e/a.pagination.defaultPageSize),"页")},pageSizeOptions:["5","10","15","20","50"],onShowSizeChange:function(e,t){return a.pagination.defaultPageSize=t},total:0}}},props:{searchParams:{type:Array,default:function(){return[]}},tableData:{type:Object,default:function(){return[]}},tableColumns:{type:Array,default:function(){return[]}},needTableCheckList:{type:Boolean,default:function(){return!1}},selectTableKeys:{type:Array,default:function(){return[]}},needActionBox:{type:Boolean,default:function(){return!0}},dataKeyName:{type:Array,default:function(){return["sid"]}},loadingFlag:{type:Boolean,default:function(){return!1}},tableEmptyText:{type:String,default:function(){return"暂时无数据"}},qftHandleQuery:{type:Function,default:function(){return Function}}},components:{varietyFormItem:r["default"]},computed:{selfSelectTableKeys:{get:function(){return this.selectTableKeys},set:function(e){this.$emit("selectTableKeysChangeFromQFT",e)}}},methods:{dbClick:function(e){this.$emit("dbClick",e)},searchFormChange:function(e,t){this.searchForm[t]=e,this.$forceUpdate()},handleClearForm:function(){var e=this;for(var t in this.iconClear="check",setTimeout(function(){e.iconClear="reload"},500),this.searchForm)this.searchForm[t]="";this.$forceUpdate()},handleQuery:function(){var e=this;for(var t in this.iconQuery="loading",setTimeout(function(){e.iconQuery="search"},1e3),this.searchForm)"undefined"==typeof this.searchForm[t]&&delete this.searchForm[t];this.$emit("formQuery",this.searchForm)},genTreeNode:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=Math.random().toString(36).substring(2,6);return{id:a,pId:e,value:a,title:t?"Tree Node":"Expand to load",isLeaf:t}},onLoadData:function(a){var n=this;return new Promise(function(e){var t=a.dataRef.id;setTimeout(function(){n.treeData=n.treeData.concat([n.genTreeNode(t,!1),n.genTreeNode(t,!0)]),e()},300)})},reloadData:function(e){this.$emit("reloadData",e)},selectTableKeysChangeFromMFT:function(e){this.selfSelectTableKeys=e,this.$emit("selectTableKeysChangeFromMFT",e)}},created:function(){for(var e in this.searchParams){var t=this.searchParams[e],a=t.name,n=t.defaultValue;this.searchForm[a]=n||void 0}},mounted:function(){var t=this;this.$on("selectTableKeysChangeFromMFT",function(e){t.selfSelectTableKeys=e})},watch:{tableData:function(e){e&&(this.$forceUpdate(),this.isTableLoading=!1)}}},s=o,l=(a("7343"),a("fb18"),a("2877")),c=Object(l["a"])(s,n,i,!1,null,"40c74014",null);t["default"]=c.exports},9957:function(e,t,a){"use strict";a("8244")},a294:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"system-config",attrs:{id:"systemConfig"}},[a("c-router-info-with-tree",{attrs:{parentRoutePath:"fileManage",pageRoutes:e.pageRoutesList,pageRoutePathList:e.pageRouteMatched}},[a("div",{attrs:{slot:"routerContent"},slot:"routerContent"},[a("menu-preview-box",{attrs:{menuData:e.menuDataList}})],1)])],1)},i=[],r=a("ed08"),o=a("1fc4"),s={data:function(){return{isLoading:!0,cardBoxData:[],menuDataList:[],pageRoutesList:this.$router.options.routes[2].children,pageRouteMatched:this.$route.matched}},components:{MenuPreviewBox:o["default"]},mounted:function(){this.cardBoxData=this.getData(),this.getMenuList()},methods:{getMenuList:function(){var e=this.$router.options.routes[2].children,t=this.$route.matched;e=Object(r["i"])(e,t)[0].children,this.menuDataList=e},openRefsModel:function(e){this.$refs[e].isModalVisible=!0},getData:function(){return Object(r["i"])(this.pageRoutesList,this.pageRouteMatched,null)[0].children}}},l=s,c=(a("286b"),a("2877")),u=Object(c["a"])(l,n,i,!1,null,"6d2290bc",null);t["default"]=u.exports},a6c4:function(e,t,a){},a6fa:function(e,t,a){"use strict";a.r(t);var n=function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("div",{staticClass:"file-manage"},[n("a-spin",{attrs:{spinning:a.isLoad}},[n("c-tree-with-self",{attrs:{treeData:a.treeData,selectedKeys:a.selectedKeys,treeMenuList:a.treeMenuList},on:{rightClickMenuItem:a.rightClickMenuItem,onTreeSelect:a.onTreeSelect}},[n("div",{staticStyle:{width:"100%"},attrs:{slot:"selfContent"},slot:"selfContent"},[n("div",{directives:[{name:"show",rawName:"v-show",value:a.filePath.length,expression:"filePath.length"}],staticClass:"bread-box"},[n("a-button",{staticClass:"bread-item",attrs:{type:"link",icon:"rollback",disabled:a.filePath.length<2},on:{click:a.goToPreviouslyLevel}},[a._v("返回上一级")]),n("a-divider",{attrs:{type:"vertical"}}),a._v(" 当前路径： "),a._l(a.filePath,function(t,e){return[n("a-button",{key:t.key,staticClass:"bread-item",attrs:{type:"link"},on:{click:function(e){return a.onTreeSelect([t.key])}}},[a._v(" "+a._s(t.title))]),a._v(" "+a._s(e!==a.filePath.length-1?"/":"")+" ")]})],2),n("div",{directives:[{name:"show",rawName:"v-show",value:a.cardData.isDirectory,expression:"cardData.isDirectory"}],staticClass:"btn-box"},[n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["file:fileview:mkdir"],expression:"['file:fileview:mkdir']"}],staticClass:"margin-btn",attrs:{type:"primary",size:"small",icon:"folder-add"},on:{click:a.handleCreateFolder}},[a._v("新建文件夹")]),n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["file:fileview:upload"],expression:"['file:fileview:upload']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"cloud-upload",size:"small"},on:{click:function(e){return a.handleUploadFiles({path:a.cardData.path})}}},[a._v("上传文件")]),n("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"redo",size:"small"},on:{click:function(e){return a.handleRefresh()}}},[a._v("刷新路径")])],1),!a.previewFileFlag&&a.cardData.isDirectory?n("preview-card-box",{ref:"previewCardBox",attrs:{menuData:a.cardData},on:{clickCard:a.clickCard,rename:a.handleRename,delete:a.handleDelete,refresh:a.loadTreeData,upload:a.handleUploadFiles}}):n("div",[n("preview-file-box",{ref:"previewFileBox"})],1)],1)])],1),n("a-modal",{attrs:{title:"文件重命名",visible:a.isRenameBoxShow},on:{ok:a.handleRenameOk,cancel:a.handleRenameBoxCancel}},[n("p",[a._v("请输入新的名称：")]),n("a-input",{ref:"renameInput",nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.handleRenameOk.apply(null,arguments)}},model:{value:a.newName,callback:function(e){a.newName=e},expression:"newName"}}),n("span",[a._v("*提示：重命名请注意文件的后缀是否丢失")])],1),n("a-modal",{attrs:{title:"创建新文件夹",visible:a.isCreateFolderBoxShow},on:{ok:a.handleCreateFolderOk,cancel:a.handleCreateFolderCancel}},[n("p",[a._v("请输入创建新的文件夹名称：")]),n("a-input",{ref:"createFolderInput",attrs:{"addon-before":a.cardData.path},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.handleCreateFolderOk.apply(null,arguments)}},model:{value:a.newFolderName,callback:function(e){a.newFolderName=e},expression:"newFolderName"}})],1),n("file-upload-modal",{ref:"fileUploadModal",on:{isPostedFile:a.isPostedFile}})],1)},i=[],r=(a("d3b7"),a("4d63"),a("ac1f"),a("25f0"),a("5319"),a("3832")),o=a("bb3c"),s=a("e4dc"),l=a("f6db"),c=a("ed08"),u={data:function(){return{filePath:[],isLoad:!1,treeData:[],cardData:{},previewFileFlag:!1,selectedKeys:[],isCreateFolderBoxShow:!1,isRenameBoxShow:!1,isRenameSave:!1,newName:"",newFolderName:"",operateItem:{},currentItem:[],treeMenuList:[{menuKey:"insert",menuName:"上传",icon:"plus"},{menuKey:"edit",menuName:"重命名",icon:"edit"},{menuKey:"delete",menuName:"删除",icon:"delete"}]}},mounted:function(){this.loadTreeData()},methods:{goToPreviouslyLevel:function(){var e=this.filePath.length-2<0?0:this.filePath.length-2,t=this.filePath[e];this.onTreeSelect([t.key])},handleRefresh:function(){this.loadTreeData()},clickCard:function(e){if(this.currentItem=[e.key],e.isDirectory){this.previewFileFlag=!1,this.cardData=e;var t=e.title,a=e.key;this.filePath.push({title:t,key:a})}else this.previewFileFlag=!0,this.showFile(e);this.selectedKeys=[e.key]},showFile:function(e){var t=this;this.isLoad=!0;var a=e.path;Object(l["c"])({path:a}).then(function(e){t.$refs.previewFileBox.show(e.data[0])}).finally(function(){t.isLoad=!1})},findNode:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=[];for(var i in e){if(e[i].key===t){var r=e[i],o=r.title,s=r.key;a.push({title:o,key:s}),n.push(e[i]);break}if(e[i].children&&e[i].children.length>0){var l=this.findNode(e[i].children,t,a);if(l.length>0){var c=e[i],u=c.title,d=c.key;a.push({title:u,key:d}),n=l;break}}}return this.filePath=a,n},rightClickMenuItem:function(e,t){var a={path:e,title:e.substr(e.lastIndexOf("\\")+1)},n={path:e};switch(t){case"insert":this.handleUploadFiles(n);break;case"edit":this.handleRename(a);break;case"delete":this.handleDelete([e]);break}},onTreeSelect:function(t){var a=this;new Promise(function(e){a.isLoad=!0,e()}).then(function(){if(a.selectedKeys=t,0===t.length)return!1;var e=t[0];if(a.currentItem=t,a.cardData.key===e)return!1;a.cardData=a.findNode(a.treeData,e)[0],a.filePath.reverse(),a.cardData.isDirectory?a.previewFileFlag=!1:(a.previewFileFlag=!0,a.showFile(a.cardData))}).finally(function(){setTimeout(function(){a.isLoad=!1},300)})},loadTreeData:function(){var r=this,o=this.currentItem;this.isLoad=!0,Object(l["d"])().then(function(e){var t=r.convertSpecificEscape([e.data]);r.treeData=t,r.selectedKeys=[t[0].key];var a=t[0],n=a.title,i=a.key;r.filePath=[{title:n,key:i}],r.cardData=t[0],o.length>0&&(r.selectedKeys=o,r.onTreeSelect(o))}).finally(function(){r.isLoad=!1}),setTimeout(function(){r.isLoad=!1,r.$message.info("超时")},1e4)},convertSpecificEscape:function(e){for(var t in e)e[t].key=e[t].path,e[t].children&&e[t].children.length>0&&this.convertSpecificEscape(e[t].children);return e},escapeRegExp:function(e){var t=/[\\"'()[\]{}|]/g,a=RegExp(t.source);return e&&a.test(e)?e.replace(t,"\\$&"):e||""},handleRename:function(e){this.operateItem=e;var t=this;this.newName=e.title,this.isRenameBoxShow=!0;var a=e.title.indexOf(".");-1==a&&(a=e.title.length),this.$nextTick(function(){t.$refs.renameInput.focus(),t.$refs.renameInput.$el.select(),t.$refs.renameInput.$el.selectionEnd=a,t.$forceUpdate()})},handleRenameBoxCancel:function(){this.isRenameBoxShow=!1,this.newName=""},fileNameCheck:function(a){var n=this;return new Promise(function(e){if(-1==a.indexOf(".")){var t=n.$confirm({title:"文件新名称找不到后缀",content:"您新命名的【".concat(a,"】似乎没有后缀名，这可能导致文件无法预览和使用，确认使用这个名称吗？"),onOk:function(){e(!0)},onCancel:function(){e(!1)}});return t}e(!0)})},handleRenameOk:function(){var a=this;this.fileNameCheck(this.newName).then(function(e){if(!e)return!1;var t={oldPath:a.operateItem.path,newPath:a.newName};Object(l["g"])(t).then(function(e){a.$message.success("文件命名".concat(e.msg)),a.isRenameBoxShow=!1,a.loadTreeData()}).catch(function(e){a.$message.error("文件重命名失败。".concat(e.message))})})},handleDelete:function(e){var t=this,a={paths:e};a=Object(c["e"])(a),Object(l["a"])(a).then(function(e){t.$message.success("删除结果：".concat(e.msg)),t.loadTreeData()}).catch(function(e){t.$message.error("删除结果：".concat(e.message))})},handleCreateFolder:function(){var e=this;this.isCreateFolderBoxShow=!0,this.$nextTick(function(){e.$refs.createFolderInput.focus()})},handleCreateFolderCancel:function(){this.isCreateFolderBoxShow=!1},handleCreateFolderOk:function(){var t=this,e={dirName:this.newFolderName,path:this.cardData.path};Object(l["e"])(e).then(function(e){t.$message.success("创建文件夹结果：".concat(e.msg)),t.isCreateFolderBoxShow=!1,t.newFolderName="",t.loadTreeData()}).catch(function(e){t.$message.error("创建文件夹失败：".concat(e.message))})},handleUploadFiles:function(e){this.$refs.fileUploadModal.open(e)},isPostedFile:function(){this.loadTreeData()}},components:{previewCardBox:r["default"],previewFileBox:o["default"],fileUploadModal:s["default"]}},d=u,m=(a("5b17"),a("2877")),f=Object(m["a"])(d,n,i,!1,null,"bb1d022e",null);t["default"]=f.exports},bb3c:function(e,t,a){"use strict";a.r(t);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-spin",{attrs:{spinning:t.spin}},[t.showFile.name?a("div",[a("div",{staticClass:"info-box"},[a("a-form",{attrs:{model:t.showFile,layout:"inline"}},[a("a-form-item",{attrs:{label:"文件名"}},[t._v(t._s(t.showFile.name))]),a("a-form-item",{attrs:{label:"路径"}},[t._v(t._s(t.showFile.path))]),a("a-form-item",{attrs:{label:"文件大小"}},[t._v(t._s(t.showFile.size))]),a("a-form-item",{attrs:{label:"文件类型"}},[t._v(t._s(t.showFile.fileType))]),a("a-form-item",[a("a-button",{ref:"btnDownload",attrs:{type:"link",icon:"download"},on:{click:function(e){return t.handleDownloadFile(t.showFile)}}},[t._v("下载")])],1)],1),a("a-divider")],1),a("div",{staticClass:"file-preview"},[t.isType("picture")?[a("img",{attrs:{src:"data:image/"+t.showFile.fileType+";base64,"+t.showFile.fileData}})]:t._e()],2)]):a("a-empty",[a("span",{attrs:{slot:"description"},slot:"description"},[t._v("文件暂不支持预览或者获取文件详情时失败")])])],1)},i=[],r=(a("b0c0"),a("4d63"),a("ac1f"),a("25f0"),a("f6db")),o=a("ed08"),s={data:function(){return{spin:!1,showFile:{}}},components:{},mounted:function(){},methods:{handleDownloadFile:function(t){var a=this;this.$nextTick(function(){a.$refs.btnDownload.disabled=!0}),setTimeout(function(){a.$refs.btnDownload.disabled=!1},5e3);var e=Object(o["e"])({path:t.path});Object(r["b"])(e).then(function(e){Object(o["f"])(e),a.$message.success("文件".concat(t.name,"的下载请求已执行，正在唤起默认下载工具"))}).catch(function(e){a.$message.error("下载失败。原因：".concat(e.message))})},show:function(e){this.spin=!0,this.showFile=e,this.spin=!1},isType:function(e){if("picture"===e){var t=new RegExp(/(jpg|bmp|gif|ico|pcx|jpeg|tif|png|raw|tga)$/,"g"),a=t.test(this.showFile.fileType);return a}}}},l=s,c=(a("4679"),a("2877")),u=Object(c["a"])(l,n,i,!1,null,"7ac48284",null);t["default"]=u.exports},bbd6:function(e,t,a){"use strict";a("e70e")},ca90:function(e,t,a){},d3f3:function(e,t,a){},e4dc:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("c-resizable-modal",{ref:"crm",attrs:{title:"上传文件",footer:null,modalWidth:"30%"}},[a("p",[e._v("目标路径："+e._s(e.folderInfo.path))]),a("a-upload-dragger",{attrs:{name:"file","file-list":e.fileList,"before-upload":e.beforeUpload,remove:e.handleRemove}},[a("p",{staticClass:"ant-upload-drag-icon"},[a("a-icon",{attrs:{type:"inbox"}})],1),a("p",{staticClass:"ant-upload-text"},[e._v(" 点击选择或将文件拖拽到虚线框内 ")]),a("p",{staticClass:"ant-upload-hint"},[e._v(" 支持上传多项文件/文件夹，文件格式为无限制。 ")])]),0!==e.fileList.length?a("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["file:fileview:upload"],expression:"['file:fileview:upload']"}],staticClass:"upload-btn",attrs:{type:"primary",icon:"upload",loading:e.uploading},on:{click:e.handleUpload}},[e._v("开始上传")]):e._e()],1)],1)},i=[],r=a("2909"),o=(a("ac1f"),a("1276"),a("159b"),a("99af"),a("fb6a"),a("a434"),a("d3b7"),a("f5ef"),a("f6db")),s={data:function(){return{fileList:[],uploading:!1,folderInfo:{}}},methods:{open:function(e){this.folderInfo=e,this.fileList=[],this.$refs.crm.open()},convertStrToElement:function(e){var t=this.$createElement,a=[];return e=e.replaceAll("<br/>","\n").split("\n"),e.forEach(function(e){a.push(t("p",null,e))}),a=t("p",null,a),a},beforeUpload:function(e){return this.fileList=[].concat(Object(r["a"])(this.fileList),[e]),!1},handleRemove:function(e){var t=this.fileList.indexOf(e),a=this.fileList.slice();a.splice(t,1),this.fileList=a},handleUpload:function(){var t=this,e=this.fileList,a=this.folderInfo,n=new FormData;e.forEach(function(e){n.append("file",e)}),n.append("path",a.path),this.uploading=!0,Object(o["h"])(n).then(function(e){t.$message.success("上传结果".concat(e.msg)),t.$emit("isPostedFile"),t.$refs.crm.close()}).catch(function(e){t.$message.error("上传失败。".concat(e.message))}).finally(function(){t.uploading=!1})},showImportResult:function(e,t){if(t){var a=this.convertStrToElement(e.data);this.$notification.success({message:"导入结果：成功",description:a}),this.$emit("uploadSuccess"),this.fileList=[]}else{var n=this.convertStrToElement(e);this.$notification.error({message:"导入结果：失败",description:n})}this.uploading=!1}}},l=s,c=(a("7619"),a("2877")),u=Object(c["a"])(l,n,i,!1,null,"1251a9ac",null);t["default"]=u.exports},e70e:function(e,t,a){},ed9f:function(e,t,a){"use strict";a.r(t);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-sub-menu",t._g(t._b({key:t.menuInfo.path},"a-sub-menu",t.$props,!1),t.$listeners),[a("span",{attrs:{slot:"title"},slot:"title"},[a("router-link",{attrs:{to:{path:t.menuInfo.path}}},[a("span",{class:t.isDark?"":"blackText"},[t._v(t._s(t.menuInfo.meta.title))])])],1),t._l(t.menuInfo.children,function(e){return[e.hasOwnProperty("children")&&e.children.length>0?a("sub-menu",{key:e.path,class:t.isDark?"":"blackText",attrs:{"menu-info":e}}):a("a-menu-item",{key:e.path||e.path,attrs:{isDark:t.isDark}},[a("span",{class:t.isDark?"":"blackText"},[t._v(t._s(e.meta.title))])])]})],2)},i=[],r=a("5530"),o=a("55f1"),s=(a("f5ef"),{name:"SubMenu",isSubMenu:!0,props:Object(r["a"])(Object(r["a"])({},o["a"].SubMenu.props),{},{menuInfo:{type:Object,default:function(){return{}}},isDark:{type:Boolean,default:function(){return!0}}}),components:{},computed:{},watch:{},mounted:function(){},methods:{clickMenuTitle:function(e){var t=this;e.path!=this.$route.path&&(""!==e.path?(this.$router.push({path:e.path}),this.$nextTick(function(){t.reload()})):this.$message.error("快马加班赶制中！"))}}}),l=s,c=(a("135b"),a("2877")),u=Object(c["a"])(l,n,i,!1,null,"de904608",null);t["default"]=u.exports},f755:function(e,t,a){"use strict";a.r(t);var n=a("244d4"),i={install:function(e){e.component("c-tab-table",n["default"])}};t["default"]=i},fb18:function(e,t,a){"use strict";a("ca90")}}]);