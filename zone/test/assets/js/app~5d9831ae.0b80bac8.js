(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app~5d9831ae"],{"0915":function(e,t,a){"use strict";a.r(t);var n=function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("div",{attrs:{id:"codeDetail"}},[n("c-resizable-modal",{ref:"crm",attrs:{title:a.title,modalWidth:"75%",footer:null}},[n("c-query-form-table",{attrs:{searchParams:a.par,tableData:a.tableData,tableColumns:a.tableColumns,needTableCheckList:!0,selectTableKeys:a.selectTableKeys,loadingFlag:a.loadingFlag},on:{selectTableKeysChangeFromQFT:a.selectTableKeysChangeFromQFT,formQuery:a.formQuery,dbClick:a.dbClick,reloadData:a.reloadData},scopedSlots:a._u([{key:"statement",fn:function(e){return[a._v(" "+a._s(e.data.sqlList.map(function(e){return e.statement}).toString())+" ")]}},{key:"tableActionBox",fn:function(t){return[n("c-more-btn-collect",[n("span",{attrs:{slot:"content"},slot:"content"},[n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:datasetinputdata:edit"],expression:"['content:datasetinputdata:edit']"}],attrs:{type:"link",size:"small"},on:{click:function(e){return a.handleOpenKeyDataDetail("edit",t.data.sid)}}},[a._v("修改")]),n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:datasetinputdata:delete"],expression:"['content:datasetinputdata:delete']"}],attrs:{type:"link",size:"small"},on:{click:function(e){return a.handleDeleteDictType([t.data.sid])}}},[a._v("删除")])],1)])]}}])},[n("template",{staticClass:"btn-box",slot:"functionBtnBox"},[n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:datasetinputdata:add"],expression:"['content:datasetinputdata:add']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"plus"},on:{click:a.handleAdd}},[a._v("新增")]),n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:datasetinputdata:edit"],expression:"['content:datasetinputdata:edit']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"edit",disabled:a.selectTableKeys.length<1},on:{click:function(e){return a.handleEditDictData(a.selectTableKeys[0])}}},[a._v("修改")]),n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:datasetinputdata:delete"],expression:"['content:datasetinputdata:delete']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"delete",disabled:a.selectTableKeys.length<1},on:{click:function(e){return a.handleDeleteDictType(a.selectTableKeys)}}},[a._v("删除")])],1)],2)],1),n("modal-sql-detail",{ref:"modalSqlDetail"}),n("modal-params-pane",{ref:"modalParamsPane"}),n("modal-code-preview",{ref:"modalCodePreview"})],1)},i=[],s=a("5530"),d=(a("d3b7"),a("05aa")),l=a("6607"),r=a("5422"),o=a("829a"),c=a("f5ef"),m={data:function(){return{title:"数据集输入数据列表",mode:"insert",dataSetItem:{},isModalVisible:!1,loadingFlag:!1,saveLoading:!1,par:[{name:"sid",label:"编号",type:"input"},{name:"configureSid",label:"配置编号",type:"input"},{name:"actualValue",label:"实际值",type:"input"},{name:"displayText",label:"显示文本",type:"input"},{name:"sort",label:"排序",type:"input"},{name:"creatorSid",label:"创建者编号",type:"input"},{name:"createTime",label:"创建时间(yyyy-MM-dd HH:mm:ss)",type:"input"},{name:"editorSid",label:"修改者编号",type:"input"},{name:"updateTime",label:"修改时间(yyyy-MM-dd HH:mm:ss)",type:"input"},{name:"remark",label:"备注",type:"input"}],tableData:{content:[],pageSize:10,pageNum:1,totalPages:1,totalSize:1},tableColumns:[{dataIndex:"sid",key:"sid",title:"编号"},{dataIndex:"configureSid",key:"configureSid",title:"配置编号"},{dataIndex:"actualValue",key:"actualValue",title:"实际值"},{dataIndex:"displayText",key:"displayText",title:"显示文本"},{dataIndex:"sort",key:"sort",title:"排序"},{dataIndex:"creatorSid",key:"creatorSid",title:"创建者编号"},{dataIndex:"createTime",key:"createTime",title:"创建时间(yyyy-MM-dd HH:mm:ss)"},{dataIndex:"editorSid",key:"editorSid",title:"修改者编号"},{dataIndex:"updateTime",key:"updateTime",title:"修改时间(yyyy-MM-dd HH:mm:ss)"},{dataIndex:"remark",key:"remark",title:"备注"}],selectTableKeys:[]}},mounted:function(){var e=this;c["a"].$on("reloadData",function(){e.reloadData({})})},methods:{handleOpenKeyDataDetail:function(e,t){this.$refs.modalSqlDetail.open({mode:e,sid:t})},selectTableKeysChangeFromQFT:function(e){this.selectTableKeys=e},open:function(e){this.addForm={},this.dataSetItem=e||{},this.$refs.crm.open(),this.handleLoadData({},{datasetSid:e.sid})},handleLoadData:function(e,t){var a=this;this.selectTableKeys=[],"{}"===JSON.stringify(e)&&(e.pageNum=this.tableData.pageNum,e.pageSize=this.tableData.pageSize),this.loadingFlag=!0,Object(d["c"])(e.pageNum,e.pageSize,t).then(function(e){a.$nextTick(function(){a.tableData.content=e.rows,a.tableData.totalSize=e.total,a.tableData.totalPages=Math.ceil(a.tableData.totalSize/a.tableData.pageSize)})}).catch(function(e){a.$message.error("数据加载错误："+e)}).finally(function(){a.loadingFlag=!1})},handleEditDictData:function(e){this.$refs.modalSqlDetail.open({mode:"edit",sid:e})},handleDeleteDictType:function(a){this.$createElement;var n=this;this.$confirm({title:"数据集语句信息删除确认",content:function(e){return e("div",["此操作将",e("span",{class:"textRed"},["物理删除",a.length,"项"]),"数据集输入数据信息，确认删除？"])},okType:"danger",closable:!0,onOk:function(){var t=this,e={countNum:a.length,id:a};Object(d["b"])(e).then(function(e){n.selectTableKeys=[],n.$message.success("删除结果：".concat(e.msg)),n.reloadData({})}).catch(function(e){t.$message.error("删除失败。".concat(e.message))})}})},dbClick:function(e){this.handleEditDictData(e.sid)},formQuery:function(e){this.handleLoadData({},Object(s["a"])(Object(s["a"])({},e),{},{datasetSid:this.dataSetItem.sid}))},reloadData:function(e){if("{}"!==JSON.stringify(e)){var t=e.pageNum,a=e.pageSize;this.tableData.pageNum=t,this.tableData.pageSize=a}this.handleLoadData({},{datasetSid:this.dataSetItem.sid})},handleAdd:function(){this.$refs.modalSqlDetail.open({mode:"insert",datasetSid:this.dataSetItem.sid})},handleOpenParamsModal:function(){this.$refs.modalParamsPane.open(this.dataSetItem)},handlePreviewSql:function(e){this.$refs.modalCodePreview.open(e)}},components:{modalSqlDetail:l["default"],modalParamsPane:r["default"],modalCodePreview:o["default"]}},u=m,p=a("2877"),f=Object(p["a"])(u,n,i,!1,null,null,null);t["default"]=f.exports},"0a84f":function(e,t,a){"use strict";a.r(t);var n=function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("div",{staticClass:"data-set",attrs:{id:"dataSet"}},[n("c-query-form-table",{attrs:{searchParams:a.par,tableData:a.tableData,tableColumns:a.tableColumns,needTableCheckList:!0,loadingFlag:a.loadingFlag,selectTableKeys:a.selectTableKeys},on:{selectTableKeysChangeFromQFT:a.selectTableKeysChangeFromQFT,formQuery:a.formQuery,dbClick:a.dbClick,reloadData:a.reloadData},scopedSlots:a._u([{key:"status",fn:function(e){return[n("span",[a._v(a._s(a.statusParam[e.data.status]))])]}},{key:"tableActionBox",fn:function(t){return[n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:datasetinputconfigure:edit"],expression:"['content:datasetinputconfigure:edit']"}],attrs:{type:"link",size:"small"},on:{click:function(e){return a.handleEditDataSet(t.data.sid)}}},[a._v("修改")]),n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:datasetinputconfigure:delete"],expression:"['content:datasetinputconfigure:delete']"}],attrs:{type:"link",size:"small"},on:{click:function(e){return a.handleDeleteDataSet([t.data.sid])}}},[a._v("删除")])]}}])},[n("template",{staticClass:"btn-box",slot:"functionBtnBox"},[n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:datasetinputconfigure:add"],expression:"['content:datasetinputconfigure:add']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"plus"},on:{click:a.handleAddDataSet}},[a._v("新增")]),n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:datasetinputconfigure:edit"],expression:"['content:datasetinputconfigure:edit']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"edit",disabled:1!==a.selectTableKeys.length},on:{click:function(e){return a.handleEditDataSet(a.selectTableKeys[0])}}},[a._v("修改")]),n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:datasetinputconfigure:delete"],expression:"['content:datasetinputconfigure:delete']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"delete",disabled:a.selectTableKeys.length<1},on:{click:function(e){return a.handleDeleteDataSet(a.selectTableKeys)}}},[a._v("删除")]),n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:datasetinputdata:list"],expression:"['content:datasetinputdata:list']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"edit",disabled:1!==a.selectTableKeys.length},on:{click:function(e){return a.handleOpenDataSourceInputData(a.selectTableKeys[0])}}},[a._v("查看数据集输入数据")])],1)],2),n("data-source-input-data",{ref:"DataSourceInputData"}),n("modal-data-set-detail",{ref:"modalDataSetDetail"})],1)},i=[],s=(a("c740"),a("d3b7"),a("25f0"),a("d81d"),a("7db0"),a("4dd7")),d=a("ed08"),l=a("5c09"),r=a("f5ef"),o=a("0915"),c=a("4887"),m={data:function(){return{statusParam:l["statusParam"],par:[{name:"sid",label:"编号",type:"input"},{name:"inputName",label:"输入值名称",type:"input"},{name:"useOption",label:"启用项(0-自定义选项, 1-自助查询SQL)",type:"select",selectList:[{key:"0",value:"自定义选项"},{key:"1",value:"自助查询SQL"}]},{name:"sqlText",label:"生成输入值的SQL",type:"input"},{name:"creatorSid",label:"创建者编号",type:"input"},{name:"createTime",label:"创建时间(yyyy-MM-dd HH:mm:ss)",type:"input"},{name:"editorSid",label:"修改者编号",type:"input"},{name:"updateTime",label:"修改时间(yyyy-MM-dd HH:mm:ss)",type:"input"},{name:"remark",label:"备注",type:"input"}],tableData:{content:[],pageSize:10,pageNum:1,totalPages:1,totalSize:1},tableColumns:[{key:"sid",dataIndex:"sid",title:"编号"},{key:"inputName",dataIndex:"inputName",title:"输入值名称"},{key:"useOption",dataIndex:"useOption",title:"启用项(0-自定义选项, 1-自助查询SQL)"},{key:"sqlText",dataIndex:"sqlText",title:"生成输入值的SQL"},{key:"creatorSid",dataIndex:"creatorSid",title:"创建者编号"},{key:"createTime",dataIndex:"createTime",title:"创建时间(yyyy-MM-dd HH:mm:ss)"},{key:"editorSid",dataIndex:"editorSid",title:"修改者编号"},{key:"updateTime",dataIndex:"updateTime",title:"修改时间(yyyy-MM-dd HH:mm:ss)"},{key:"remark",dataIndex:"remark",title:"备注"}],refreshRedisFlag:!1,selectTableKeys:[],loadingFlag:!1}},mounted:function(){var e=this,t=this.tableData,a=t.pageNum,n=t.pageSize;this.handleLoadData({pageNum:a,pageSize:n},{}),r["a"].$on("reloadTypeData",function(){e.reloadData({})})},methods:{handleOpenSqlManage:function(t){var e=this.tableData.content,a=e.findIndex(function(e){return t===e.sid});this.$refs.DataSourceInputData.open(e[a])},reloadData:function(e){if("{}"!==JSON.stringify(e)){var t=e.pageNum,a=e.pageSize;this.tableData.pageNum=t,this.tableData.pageSize=a}this.handleLoadData({},null)},formQuery:function(e){this.handleLoadData({},e)},handleLoadData:function(e,t){var a=this;this.selectTableKeys=[],"{}"===JSON.stringify(e)&&(e.pageNum=this.tableData.pageNum,e.pageSize=this.tableData.pageSize),this.loadingFlag=!0,Object(s["c"])(e.pageNum,e.pageSize,t).then(function(e){if(!Object(d["l"])(e))throw new Error(e.msg);a.$nextTick(function(){a.tableData.content=e.rows,a.tableData.totalSize=e.total,a.tableData.totalPages=Math.ceil(a.tableData.totalSize/a.tableData.pageSize)})}).catch(function(e){a.$message.error("数据加载错误："+e)}).finally(function(){a.loadingFlag=!1})},dbClick:function(e){this.handleEditDataSet(e.sid)},handleAddDataSet:function(){this.$refs.modalDataSetDetail.open({mode:"insert"})},handleEditDataSet:function(e){this.$refs.modalDataSetDetail.open({mode:"edit",sid:e})},handleDeleteDataSet:function(t){this.$createElement;var a=this;this.$confirm({title:"数据集删除确认",content:function(e){return e("div",["此操作将",e("span",{class:"textRed"},["物理删除",t.length,"条"]),"数据集定义数据，确认删除？"])},okType:"danger",closable:!0,onOk:function(){var e={countNum:t.length,id:t.toString()};Object(s["b"])(e).then(function(e){a.selectTableKeys=[],a.$message.success("删除成功！"),a.reloadData({})})}})},selectTableKeysChangeFromQFT:function(e){this.selectTableKeys=e},handleOpenKeyData:function(e){this.$refs.DataSourceInputData.open(e)},handleOpenDataSourceInputData:function(e){var t=this.findRowsInfo([e]);this.$refs.DataSourceInputData.open(t)},findRowsInfo:function(e){var a=this,n=[],i=[];return e.map(function(t){var e=a.tableData.content.find(function(e){return e.sid===t});n.push(e.datasetNameCn),i.push(e.sid)}),{itemsName:n,itemsSid:i}}},components:{DataSourceInputData:o["default"],modalDataSetDetail:c["default"]}},u=m,p=(a("9bc2"),a("2877")),f=Object(p["a"])(u,n,i,!1,null,"ec63cca4",null);t["default"]=f.exports},4887:function(e,t,a){"use strict";a.r(t);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"75%",title:("insert"==t.mode?"新增":"编辑")+"数据集定义"}},[a("a-spin",{attrs:{spinning:t.spin}},[a("a-form-model",{ref:"addForm",attrs:{model:t.addForm,labelCol:{span:6},wrapperCol:{span:18},rules:t.addFormRule}},[a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"输入值名称",prop:"inputName"}},[a("a-input",{model:{value:t.addForm.inputName,callback:function(e){t.$set(t.addForm,"inputName",e)},expression:"addForm.inputName"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"启用项",prop:"useOption"}},[a("a-radio-group",{attrs:{name:"useOption"},model:{value:t.addForm.useOption,callback:function(e){t.$set(t.addForm,"useOption",e)},expression:"addForm.useOption"}},[a("a-radio",{attrs:{value:"0"}},[t._v(" 自定义选项 ")]),a("a-radio",{attrs:{value:"1"}},[t._v(" 自助查询SQL ")])],1)],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"生成输入值的SQL",prop:"sqlText",labelCol:{span:3},wrapperCol:{span:21}}},[a("a-textarea",{attrs:{autosize:{minRows:5}},model:{value:t.addForm.sqlText,callback:function(e){t.$set(t.addForm,"sqlText",e)},expression:"addForm.sqlText"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"创建者编号",prop:"creatorSid"}},[a("a-input",{attrs:{disabled:""},model:{value:t.addForm.creatorSid,callback:function(e){t.$set(t.addForm,"creatorSid",e)},expression:"addForm.creatorSid"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"创建时间",prop:"createTime"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:{format:"HH:mm:ss"},allowClear:"",valueFormat:"YYYY-MM-DD HH:mm:ss",disabled:""},model:{value:t.addForm.createTime,callback:function(e){t.$set(t.addForm,"createTime",e)},expression:"addForm.createTime"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"修改者编号",prop:"editorSid"}},[a("a-input",{attrs:{disabled:""},model:{value:t.addForm.editorSid,callback:function(e){t.$set(t.addForm,"editorSid",e)},expression:"addForm.editorSid"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"修改时间",prop:"updateTime"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:{format:"HH:mm:ss"},valueFormat:"YYYY-MM-DD HH:mm:ss",disabled:""},model:{value:t.addForm.updateTime,callback:function(e){t.$set(t.addForm,"updateTime",e)},expression:"addForm.updateTime"}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"备注",prop:"note",labelCol:{span:3},wrapperCol:{span:21}}},[a("a-input",{attrs:{type:"textarea"},model:{value:t.addForm.remark,callback:function(e){t.$set(t.addForm,"remark",e)},expression:"addForm.remark"}})],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:t.handleCancel}},[t._v("取 消")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:t.saveLoading},on:{click:t.handleSave}},[t._v("保存")])],1)],1)],1)},i=[],s=(a("d3b7"),a("4dd7")),d=a("f5ef"),l={data:function(){return{mode:"read",tableSpin:!1,spin:!1,saveLoading:!1,addForm:{},tableData:{content:[],pageSize:10,pageNum:1,totalPages:1,totalSize:1},tableColumns:[{key:"sid",dataIndex:"sid",title:"编号"},{key:"datasetNameCn",dataIndex:"datasetNameCn",title:"数据集中文名称"},{key:"datasetNameEn",dataIndex:"datasetNameEn",title:"数据集英文名称"},{key:"isSonFlag",dataIndex:"isSonFlag",title:"是否含有子数据集",hasSlot:!0},{key:"parentSid",dataIndex:"parentSid",title:"父数据集"},{key:"accessMode",dataIndex:"accessMode",title:"取数方式"},{key:"creatorSid",dataIndex:"creatorSid",title:"创建者编号"},{key:"createTime",dataIndex:"createTime",title:"创建时间"},{key:"editorSid",dataIndex:"editorSid",title:"修改者编号"},{key:"updateTime",dataIndex:"updateTime",title:"修改时间"},{key:"remark",dataIndex:"remark",title:"备注"}],addFormRule:{datasetNameCn:[{required:!0,message:"不允许为空",trigger:"blur"}],datasetNameEn:[{required:!0,message:"不允许为空",trigger:"blur"}],isSonFlag:[{required:!0,message:"必须给定一个选择",trigger:"blur"}]}}},methods:{open:function(e){this.addForm={sid:"",inputName:"",useOption:"0",sqlText:"",creatorSid:"",createTime:"",editorSid:"",updateTime:"",remark:""},this.mode=e.mode,this.$refs.crm.open(),"edit"==this.mode&&this.getDataBySid(e.sid)},getDataBySid:function(e){var t=this;this.spin=!0;var a={};Object(s["d"])(e).then(function(e){t.addForm=e.data,e.data.parentSid&&e.data.parentSid.length&&(a.sid=e.data.parentSid)}).finally(function(){t.spin=!1})},handleSave:function(){var t=this;this.$refs.addForm.validate(function(e){e&&(t.saveLoading=!0,"edit"===t.mode?t.updateRecord():t.createRecord())})},createRecord:function(){var t=this,a=this;Object(s["a"])(this.addForm).then(function(e){a.$message.success("已创建成功1条数据集"),d["a"].$emit("reloadTypeData"),t.$refs.crm.close()}).catch(function(e){t.$message.warning(e.message)}).finally(function(){a.saveLoading=!1})},updateRecord:function(){var t=this,a=this;Object(s["e"])(this.addForm).then(function(e){a.$message.success("已修改成功1条数据集"),d["a"].$emit("reloadTypeData"),t.$refs.crm.close()}).catch(function(e){t.$message.warning(e.message)}).finally(function(){a.saveLoading=!1})},handleCancel:function(){this.$refs.crm.close()}}},r=l,o=a("2877"),c=Object(o["a"])(r,n,i,!1,null,null,null);t["default"]=c.exports},"5c09":function(e,t,a){"use strict";a.r(t),a.d(t,"statusParam",function(){return n});var n={0:"正常",1:"停用"}},6937:function(e,t,a){},"9bc2":function(e,t,a){"use strict";a("6937")}}]);