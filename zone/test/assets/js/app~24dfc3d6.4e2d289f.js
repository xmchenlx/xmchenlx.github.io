(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app~24dfc3d6"],{"0095":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"codeDetail"}},[a("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"75%",title:e.title}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("a-spin",{attrs:{tip:"正在请求数据...",spinning:e.spinning}},[a("a-transfer",{staticStyle:{margin:"0 auto"},attrs:{"list-style":{width:"45%",height:"300px"},dataSource:e.leftSourceData,targetKeys:e.rightTargetKeys,titles:["待分配角色","已选择角色"],"show-search":"","filter-option":e.filterOption,render:function(e){return e.title}},on:{change:e.handleChange,search:e.handleSearch}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:e.handleCancel}},[e._v("取 消")]),a("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:user:updateUserRoleRel"],expression:"['system:user:updateUserRoleRel']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:e.saveLoading},on:{click:e.handleSave}},[e._v("更 新")])],1)])],1)},r=[],i=(a("99af"),a("d3b7"),a("25f0"),a("c0c7")),s={data:function(){return{currentStep:0,isModalVisible:!1,saveLoading:!1,treeOrgArray:[],transferData:[],leftSourceData:[],rightTargetKeys:[],spinning:!0,userInfo:{}}},computed:{title:function(){var e=this.userInfo,t=e.userName,a=e.userCode;return"对用户 “ ".concat(t,"（").concat(a,"）” 的角色管理")}},methods:{reset:function(){this.leftSourceData=[],this.rightTargetKeys=[],this.userInfo={}},open:function(e){this.reset(),this.userInfo=e,this.$refs.crm.open(),this.getUserRoleData(e)},getUserRoleData:function(e){var s=this,t=this;this.spinning=!0,Object(i["i"])(e.sid).then(function(e){if(200!==e.code||!0!==e.status)throw new Error("".concat(e.msg,"状态码为").concat(e.code,"，状态为").concat(e.status));var t=[],a=[];for(var n in e.data){var r={key:e.data[n].sid,title:e.data[n].roleName};t.push(r),"0"===e.data[n].isRelation&&a.push(e.data[n].sid)}s.$nextTick(function(){s.leftSourceData=t,s.rightTargetKeys=a})}).catch(function(e){s.$message.error("请求异常："+e)}).finally(function(){t.spinning=!1})},handleSave:function(){var t=this;this.saveLoading=!0;var e={userSid:this.userInfo.sid,roleSid:this.rightTargetKeys.toString(),isRelation:"0"};Object(i["p"])(e).then(function(e){if(200!==e.code||!0!==e.status)throw new Error(e.msg);t.$message.success("用户角色信息已更新"),t.$refs.crm.close()}).catch(function(e){t.$message.warning("用户角色信息更新失败。"+e.message)}).finally(function(){t.saveLoading=!1})},handleCancel:function(){this.$refs.crm.close()},filterOption:function(e,t){return t.title.indexOf(e)>-1},handleChange:function(e,t,a){this.rightTargetKeys=e},handleSearch:function(e,t){}},mounted:function(){this.$nextTick(function(){})}},o=s,l=a("2877"),d=Object(l["a"])(o,n,r,!1,null,null,null);t["default"]=d.exports},"1bb1":function(e,t,a){"use strict";a("ea68")},"245c":function(e,t,a){},"2d1c":function(e,t,a){"use strict";a.r(t);var n=function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("div",{staticClass:"user-config white-back-box"},[n("c-query-form-table",{attrs:{searchParams:a.par,tableData:a.tableData,tableColumns:a.tableColumns,needTableCheckList:!0,selectTableKeys:a.selectTableKeys,loadingFlag:a.loadingFlag},on:{selectTableKeysChangeFromQFT:a.selectTableKeysChangeFromQFT,formQuery:a.formQuery,dbClick:a.dbClick,reloadData:a.reloadData},scopedSlots:a._u([{key:"userType",fn:function(e){return n("span",{},[n("span",[a._v(a._s(a.userTypeParam[e.data.userType]))])])}},{key:"tableActionBox",fn:function(t){return n("span",{},[n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:user:edit"],expression:"['system:user:edit']"}],attrs:{type:"link"},on:{click:function(e){return a.handleEditUser(t.data.sid)}}},[a._v("编辑")]),n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:user:delete"],expression:"['system:user:delete']"}],attrs:{type:"link"},on:{click:function(e){return a.handleDeleteUser([t.data.sid])}}},[a._v("删除")])],1)}},{key:"sex",fn:function(e){return n("span",{},[n("span",[a._v(a._s(a.sexParam[e.data.sex]))])])}},{key:"builtIn",fn:function(e){return n("span",{},[n("span",[a._v(a._s(a.builtInParam[e.data.builtIn]))])])}},{key:"status",fn:function(e){return n("span",{},[n("span",[a._v(a._s(a.statusParam[e.data.status]))])])}},{key:"delFlag",fn:function(e){return n("span",{},[n("span",[a._v(a._s(a.delFlagParam[e.data.delFlag]))])])}}])},[n("template",{staticClass:"btn-box",slot:"functionBtnBox"},[n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:user:add"],expression:"['system:user:add']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"plus"},on:{click:a.handleAddUser}},[a._v("新增")]),n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:user:edit"],expression:"['system:user:edit']"}],staticClass:"margin-btn",attrs:{type:"primary",disabled:1!==a.selectTableKeys.length,icon:"edit"},on:{click:function(e){return a.handleEditUser(a.selectTableKeys[0])}}},[a._v("修改")]),n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:user:delete"],expression:"['system:user:delete']"}],staticClass:"margin-btn",attrs:{type:"primary",disabled:0===a.selectTableKeys.length,icon:"delete"},on:{click:function(e){return a.handleDeleteUser(a.selectTableKeys)}}},[a._v("删除")]),n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:user:import"],expression:"['system:user:import']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"import"},on:{click:a.handleOpenUserImportModal}},[a._v("导入")]),n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:user:export"],expression:"['system:user:export']"}],staticClass:"margin-btn",attrs:{type:"primary",loading:a.isExportBtnLoad,icon:"export"},on:{click:a.handleExportData}},[a._v("导出")]),n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:user:exportTemplate"],expression:"['system:user:exportTemplate']"}],staticClass:"margin-btn",attrs:{type:"primary",loading:a.isExportTplBtnLoad,icon:"file-excel"},on:{click:a.handleExportTemplateData}},[a._v("导出模板")]),n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:user:resetPwd"],expression:"['system:user:resetPwd']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"hourglass"},on:{click:a.handleResetPassword}},[a._v("重置密码")]),n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:user:unlock"],expression:"['system:user:unlock']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"unlock"},on:{click:a.handleUnlockUser}},[a._v("解锁")]),n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:user:getUserRole"],expression:"['system:user:getUserRole']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"user",disabled:1!==a.selectTableKeys.length},on:{click:function(e){return a.openRoleManageModal(a.selectTableKeys[0])}}},[a._v("角色管理")]),n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:user:getUserOrg"],expression:"['system:user:getUserOrg']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"bank",disabled:1!==a.selectTableKeys.length},on:{click:function(e){return a.openOrgManageModal(a.selectTableKeys[0])}}},[a._v("机构设置")])],1)],2),n("role-manage-modal",{ref:"roleManageModal"}),n("org-manage-modal",{ref:"orgManageModal"}),n("user-detail-modal",{ref:"userDetailModal"}),n("import-user-modal",{ref:"importUserModal"})],1)},r=[],s=(a("d3b7"),a("25f0"),a("99af"),a("c740"),a("a434"),a("8eca")),i=a("4fc7"),o=a("0095"),l=a("c01b"),d=a("ed08"),c=a("6136"),u=a("c0c7"),m=a("f5ef"),p={data:function(){return{userTypeParam:c["userTypeParam"],sexParam:c["sexParam"],builtInParam:c["builtInParam"],statusParam:c["statusParam"],delFlagParam:c["delFlagParam"],par:[{name:"userType",label:"用户类型",type:"select",selectList:[{value:"系统用户",key:"0"},{value:"第三方系统",key:"1"}]},{name:"userCode",label:"用户编号",type:"input"},{name:"userName",label:"用户名称",type:"input"},{name:"nickName",label:"用户昵称",type:"input"},{name:"email",label:"用户电子邮箱",type:"input"},{name:"phone",label:"电话号码",type:"input"},{name:"tel",label:"手机号码",type:"input"},{name:"sex",label:"用户性别",type:"select",selectList:[{value:"女",key:"0"},{value:"男",key:"1"}]},{name:"delFlag",label:"删除标志",type:"select",selectList:[{value:"存在",key:"0"},{value:"删除",key:"1"}]},{name:"remark",label:"备注",type:"input"}],tableData:{content:[],pageSize:10,pageNum:1,totalSize:5,totalPages:1},tableColumns:[{dataIndex:"userType",key:"userType",title:"用户类型",hasSlot:!0},{dataIndex:"userCode",key:"userCode",title:"用户编号"},{dataIndex:"userName",key:"userName",title:"用户名称"},{dataIndex:"nickName",key:"nickName",title:"用户昵称"},{dataIndex:"email",key:"email",title:"用户电子邮箱"},{dataIndex:"phone",key:"phone",title:"电话号码"},{dataIndex:"tel",key:"tel",title:"手机号码"},{dataIndex:"sex",key:"sex",title:"用户性别",hasSlot:!0},{dataIndex:"remark",key:"remark",title:"备注"}],formQueryParam:{},loadingFlag:!1,selectTableKeys:[],confirmLoading:!1,deleteType:!1,isExportTplBtnLoad:!1,isExportBtnLoad:!1}},mounted:function(){var e=this,t=this.tableData,a=t.pageNum,n=t.pageSize;this.handleLoadData({pageNum:a,pageSize:n},{delFlag:"0"}),m["a"].$on("reloadData",function(){e.reloadData({})}),m["a"].$on("uploadSuccess",function(){e.reloadData({})})},methods:{handleUnlockUser:function(){var a=this;this.selectTableKeys.length<1?this.$message.warning("需要至少选择1位用户才可以执行解锁操作"):this.$confirm({title:"解锁用户确认",content:"即将解锁".concat(this.selectTableKeys.length,"位用户，确认操作？"),closable:!0,onOk:function(){return new Promise(function(t,e){Object(u["m"])(a.selectTableKeys).then(function(e){if(!Object(d["l"])(e))throw new Error(e.msg);a.$message.success("选择的用户已解锁")}).catch(function(e){t("fail"),a.$message.error("请求失败："+e.message)}).finally(function(){t("success")})})}})},handleResetPassword:function(){var t=this;this.selectTableKeys.length<1?this.$message.warning("需要至少选择1位用户才可以执行重置密码操作"):this.$confirm({title:"重置密码确认",content:"即将重置".concat(this.selectTableKeys.length,"位用户的密码，确认操作？"),closable:!0,onOk:function(){return new Promise(function(e){Object(u["l"])(t.selectTableKeys).then(function(e){if(200!==e.code||!0!==e.status)throw new Error(e.msg);t.$message.success("用户密码已重置"),t.reloadData({})}).catch(function(e){t.$message.error("请求失败："+e.message)}).finally(function(){e("")})})}})},handleLoadData:function(e,t){var a=this;"{}"===JSON.stringify(e)&&(e.pageNum=this.tableData.pageNum,e.pageSize=this.tableData.pageSize),this.selectTableKeys=[],this.loadingFlag=!0,Object(u["f"])(e.pageNum,e.pageSize,t).then(function(e){if(!Object(d["l"])(e))throw new Error(e.msg);a.$nextTick(function(){a.tableData.content=e.rows,a.tableData.totalSize=e.total,a.tableData.totalPages=Math.ceil(a.tableData.totalSize/a.tableData.pageSize)})}).catch(function(e){a.$message.error("数据加载错误："+e)}).finally(function(){a.loadingFlag=!1})},handleDeleteUser:function(t){var a=this,e=this.$createElement,n=e("div",null,[e("p",null,[e("span",null,"即将删除".concat(t.length,"项用户数据，")),e("span",{style:"color:red"},"如果包含子项，也将一并删除。 ")]),e("span",null,"请选择删除的类型。 "),e("a-switch",{on:{click:function(){},change:function(e){a.deleteType=e}},attrs:{checkedChildren:"物理删除",unCheckedChildren:"逻辑删除"}},"")]);this.$confirm({title:"删除机构数据确认",content:n,okType:"danger",closable:!0,onOk:function(){var e=a.deleteType?"Physical":"Logic";a.confirmOkToDelete(t,e)}})},confirmOkToDelete:function(n,r){var s=this,i=this,o={id:n.toString(),type:r,countNum:n.length};Object(u["c"])(o).then(function(e){if(!Object(d["l"])(e))throw new Error(e.msg);var t=function(t){var e=s.selectTableKeys.findIndex(function(e){return e===s.selectTableKeys[t]});-1!==e&&s.selectTableKeys.splice(e,1)};for(var a in n)t(a);i.reloadData({}),i.$message.success("已".concat("Logic"==r?"逻辑":"物理","删除").concat(o.countNum,"项数据"))}).catch(function(e){s.$message.error("请求错误："+e.message)})},reloadData:function(e){if("{}"!==JSON.stringify(e)){var t=e.pageNum,a=e.pageSize;this.tableData.pageNum=t,this.tableData.pageSize=a}this.handleLoadData({},null)},formQuery:function(e){this.formQueryParam=e,this.handleLoadData({},e)},dbClick:function(e){this.handleEditUser(e.sid)},handleAddUser:function(){this.$refs.userDetailModal.open({mode:"insert"})},handleEditUser:function(e){this.$refs.userDetailModal.open({mode:"edit",sid:e})},getUserInfoBySid:function(e){var t=this.tableData.content,a=0;for(a in t)if(t[a]["sid"]===e)break;return t[a]},openRoleManageModal:function(e){var t=this.getUserInfoBySid(e);this.$refs.roleManageModal.open(t)},openOrgManageModal:function(e){var t=this.getUserInfoBySid(e);this.$refs.orgManageModal.open(t)},selectTableKeysChangeFromQFT:function(e){this.selectTableKeys=e},handleOpenUserImportModal:function(){this.$refs.importUserModal.open()},handleExportData:function(){var t=this;this.isExportBtnLoad=!0,Object(u["d"])(this.formQueryParam).then(function(e){if(e.msg)throw new Error(e.msg);Object(d["f"])(e)}).catch(function(e){t.$message.warning(e.message)}).finally(function(){t.isExportBtnLoad=!1})},handleExportTemplateData:function(){var t=this;this.isExportTplBtnLoad=!0,Object(u["e"])({}).then(function(e){if(e.data.msg)throw new Error(e.msg);Object(d["f"])(e)}).catch(function(e){t.$message.warning(e.message)}).finally(function(){t.isExportTplBtnLoad=!1})}},components:{userDetailModal:i["default"],roleManageModal:o["default"],orgManageModal:l["default"],importUserModal:s["default"]}},f=p,h=(a("a6b6"),a("2877")),b=Object(h["a"])(f,n,r,!1,null,"5ec58f8e",null);t["default"]=b.exports},"357b":function(e,t,a){},"4fc7":function(e,t,a){"use strict";a.r(t);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"75%",title:("insert"==t.mode?"新增":"编辑")+"用户"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("a-spin",{attrs:{spinning:t.spin}},[a("a-form-model",{ref:"addForm",attrs:{model:t.addForm,labelCol:{span:6},wrapperCol:{span:18},rules:t.addFormRule}},[a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"用户编号",prop:"userCode"}},[a("a-input",{model:{value:t.addForm.userCode,callback:function(e){t.$set(t.addForm,"userCode",e)},expression:"addForm.userCode"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"用户名称",prop:"userName"}},[a("a-input",{model:{value:t.addForm.userName,callback:function(e){t.$set(t.addForm,"userName",e)},expression:"addForm.userName"}})],1)],1)],1),a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"是否内置用户",prop:"builtIn"}},[a("a-radio-group",{attrs:{name:"radioGroup","default-value":0},model:{value:t.addForm.builtIn,callback:function(e){t.$set(t.addForm,"builtIn",e)},expression:"addForm.builtIn"}},[a("a-radio",{attrs:{value:"0"}},[t._v(" 否 ")]),a("a-radio",{attrs:{value:"1"}},[t._v(" 是 ")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"用户类型",prop:"userType"}},[a("a-select",{staticStyle:{width:"100%"},model:{value:t.addForm.userType,callback:function(e){t.$set(t.addForm,"userType",e)},expression:"addForm.userType"}},[a("a-select-option",{attrs:{value:"0"}},[t._v(" 系统用户 ")]),a("a-select-option",{attrs:{value:"1"}},[t._v(" 第三方系统 ")])],1)],1)],1)],1),a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"用户昵称",prop:"nickName"}},[a("a-input",{model:{value:t.addForm.nickName,callback:function(e){t.$set(t.addForm,"nickName",e)},expression:"addForm.nickName"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"用户电子邮箱",prop:"email"}},[a("a-input",{model:{value:t.addForm.email,callback:function(e){t.$set(t.addForm,"email",e)},expression:"addForm.email"}})],1)],1)],1),t._e(),a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"手机号码",prop:"tel"}},[a("a-input",{model:{value:t.addForm.tel,callback:function(e){t.$set(t.addForm,"tel",e)},expression:"addForm.tel"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"电话号码",prop:"phone"}},[a("a-input",{model:{value:t.addForm.phone,callback:function(e){t.$set(t.addForm,"phone",e)},expression:"addForm.phone"}})],1)],1)],1),a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"用户性别",prop:"sex"}},[a("a-radio-group",{attrs:{name:"radioGroup"},model:{value:t.addForm.sex,callback:function(e){t.$set(t.addForm,"sex",e)},expression:"addForm.sex"}},[a("a-radio",{attrs:{value:"0"}},[t._v(" 女 ")]),a("a-radio",{attrs:{value:"1"}},[t._v(" 男 ")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"状态",prop:"status"}},[a("a-radio-group",{attrs:{name:"radioGroup"},model:{value:t.addForm.status,callback:function(e){t.$set(t.addForm,"status",e)},expression:"addForm.status"}},[a("a-radio",{attrs:{value:"0"}},[t._v(" 正常 ")]),a("a-radio",{attrs:{value:"1"}},[t._v(" 停用 ")])],1)],1)],1)],1),a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},["edit"==t.mode?a("a-form-model-item",{attrs:{label:"删除标志",prop:"delFlag"}},[a("a-radio-group",{attrs:{name:"radioGroup",disabled:"","default-value":0},model:{value:t.addForm.delFlag,callback:function(e){t.$set(t.addForm,"delFlag",e)},expression:"addForm.delFlag"}},[a("a-radio",{attrs:{value:"0"}},[t._v(" 存在 ")]),a("a-radio",{attrs:{value:"1"}},[t._v(" 删除 ")])],1)],1):t._e()],1),a("a-col",{attrs:{span:12}},["edit"==t.mode?a("a-form-model-item",{attrs:{label:"密码错误次数",prop:"pwdERRORfrequency"}},[a("a-input-number",{staticStyle:{width:"100%"},attrs:{disabled:""},model:{value:t.addForm.pwdERRORfrequency,callback:function(e){t.$set(t.addForm,"pwdERRORfrequency",e)},expression:"addForm.pwdERRORfrequency"}})],1):t._e()],1)],1),a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},["edit"==t.mode?a("a-form-model-item",{attrs:{label:"密码失效日期",prop:"pwdExpirationDATE"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:""},model:{value:t.addForm.pwdExpirationDATE,callback:function(e){t.$set(t.addForm,"pwdExpirationDATE",e)},expression:"addForm.pwdExpirationDATE"}})],1):t._e()],1),a("a-col",{attrs:{span:12}},["edit"==t.mode?a("a-form-model-item",{attrs:{label:"用户被锁定日期",prop:"useLockedDate"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:"",allowClear:"",valueFormat:"YYYY-MM-DD HH:mm:ss",showTime:{format:"HH:mm:ss"}},model:{value:t.addForm.useLockedDate,callback:function(e){t.$set(t.addForm,"useLockedDate",e)},expression:"addForm.useLockedDate"}})],1):t._e()],1)],1),"edit"==t.mode?a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"创建者编号",prop:"creatorSid"}},[a("a-input",{attrs:{disabled:""},model:{value:t.addForm.creatorSid,callback:function(e){t.$set(t.addForm,"creatorSid",e)},expression:"addForm.creatorSid"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"创建时间",prop:"createTime"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:{format:"HH:mm:ss"},allowClear:"",valueFormat:"YYYY-MM-DD HH:mm:ss",disabled:""},model:{value:t.addForm.createTime,callback:function(e){t.$set(t.addForm,"createTime",e)},expression:"addForm.createTime"}})],1)],1)],1):t._e(),"edit"==t.mode?a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"修改者编号",prop:"editorSid"}},[a("a-input",{attrs:{disabled:""},model:{value:t.addForm.editorSid,callback:function(e){t.$set(t.addForm,"editorSid",e)},expression:"addForm.editorSid"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"修改时间",prop:"updateTime"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:{format:"HH:mm:ss"},valueFormat:"YYYY-MM-DD HH:mm:ss",disabled:""},model:{value:t.addForm.updateTime,callback:function(e){t.$set(t.addForm,"updateTime",e)},expression:"addForm.updateTime"}})],1)],1)],1):t._e(),a("a-row",{attrs:{gutter:6}},[a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"备注",prop:"note",labelCol:{span:3},wrapperCol:{span:21}}},[a("a-input",{attrs:{type:"textarea"},model:{value:t.addForm.remark,callback:function(e){t.$set(t.addForm,"remark",e)},expression:"addForm.remark"}})],1)],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:t.handleCancel}},[t._v("取 消")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:t.saveLoading},on:{click:t.handleSave}},[t._v(" "+t._s("insert"==t.mode?"保存":"提交编辑")+" ")])],1)])],1)},r=[],s=(a("d3b7"),a("99af"),a("c0c7")),i=a("f5ef"),o={data:function(){return{mode:"insert",spin:!1,isModalVisible:!1,saveLoading:!1,addForm:{sid:"",userType:"",userCode:"",userName:"",nickName:"",password:"",email:"",phone:"",tel:"",sex:"0",avatarUrl:"",builtIn:"0",status:"0",delFlag:"0",pwdExpirationDATE:"9999-12-31",pwdERRORfrequency:"",useLockedDate:"",creatorSid:"",createTime:"",editorSid:"",updateTime:"",remark:""},addFormRule:{userType:[{required:!0,message:"用户类型不允许为空",trigger:"blur"}],userCode:[{required:!0,message:"用户编号不允许为空",trigger:"blur"}],userName:[{required:!0,message:"用户名称不允许为空",trigger:"blur"}],builtIn:[{required:!0,message:"必须给定是否内置用户的值",trigger:"blur"}],status:[{required:!0,message:"必须给定用户状态的值",trigger:"blur"}],delFlag:[{required:!0,message:"必须给定删除标志的值",trigger:"blur"}]}}},methods:{getDefaultValue:function(){return{sid:"",userType:"",userCode:"",userName:"",nickName:"",password:"",email:"",phone:"",tel:"",sex:"0",avatarUrl:"",builtIn:"0",status:"0",delFlag:"0",pwdExpirationDATE:"9999-12-31",pwdERRORfrequency:"",useLockedDate:"",creatorSid:"",createTime:"",editorSid:"",updateTime:"",remark:""}},open:function(e){this.addForm=this.getDefaultValue(),this.mode=e.mode,this.$refs.crm.open(),"edit"==this.mode&&(this.spin=!0,this.getUserDataBySid(e.sid)),this.isModalVisible=!0},getUserDataBySid:function(e){var t=this;Object(s["h"])(e).then(function(e){t.addForm=e.data}).finally(function(){t.spin=!1})},handleSave:function(){var t=this;this.$refs.addForm.validate(function(e){e&&(t.saveLoading=!0,"insert"==t.mode?t.createUser():t.editUser())})},editUser:function(){var t=this;Object(s["o"])(this.addForm).then(function(e){if(200!==e.code||!0!==e.status)throw new Error("请求的状态异常：状态码为".concat(e.code,"，状态为").concat(e.status));t.$message.success("数据已更新")}).catch(function(e){t.$message.error("请求异常："+e)}).finally(function(){t.saveLoading=!1,i["a"].$emit("reloadData"),t.$refs.crm.close()})},createUser:function(){var t=this;Object(s["a"])(this.addForm).then(function(e){t.$message.success("数据已新增"),i["a"].$emit("reloadData"),t.$refs.crm.close()}).finally(function(){t.saveLoading=!1})},handleCancel:function(){this.$refs.crm.close()}}},l=o,d=a("2877"),c=Object(d["a"])(l,n,r,!1,null,null,null);t["default"]=c.exports},5182:function(e,t,a){},6136:function(e,t,a){"use strict";a.r(t),a.d(t,"userTypeParam",function(){return n}),a.d(t,"sexParam",function(){return r}),a.d(t,"builtInParam",function(){return s}),a.d(t,"statusParam",function(){return i}),a.d(t,"delFlagParam",function(){return o});var n={0:"系统用户",1:"第三方系统"},r={0:"女",1:"男"},s={1:"是",0:"否"},i={0:"正常",1:"停用"},o={0:"存在",1:"删除"}},7849:function(e,t,a){"use strict";a("d71a")},8268:function(e,t,a){"use strict";a.r(t);var n=function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("div",{staticClass:"role-config white-back-box"},[n("c-query-form-table",{attrs:{searchParams:a.par,tableData:a.tableData,tableColumns:a.tableColumns,needTableCheckList:!0,selectTableKeys:a.selectTableKeys,loadingFlag:a.loadingFlag},on:{selectTableKeysChangeFromQFT:a.selectTableKeysChangeFromQFT,formQuery:a.formQuery,dbClick:a.dbClick,reloadData:a.reloadData},scopedSlots:a._u([{key:"tableActionBox",fn:function(t){return[n("a-button",{attrs:{type:"link"},on:{click:function(e){return a.handleOpenCodePreviewModal(t.data.sid)}}},[a._v("预览")]),n("c-more-btn-collect",[n("div",{attrs:{slot:"content"},slot:"content"},[n("a-button",{attrs:{type:"link"},on:{click:function(e){return a.handleEditCodePreviewSetting(t.data.sid)}}},[a._v("编辑")]),n("a-button",{attrs:{type:"link"},on:{click:function(e){return a.handleDeleteData([t.data.sid])}}},[a._v("删除")]),n("a-button",{attrs:{type:"link"},on:{click:function(e){return a.handleSyncData(t.data)}}},[a._v("同步")]),n("a-button",{attrs:{type:"link"},on:{click:function(e){return a.handleGenerateCode(t.data)}}},[a._v("生成代码")])],1)])]}}])},[n("template",{staticClass:"btn-box",slot:"functionBtnBox"},[n("a-button",{staticClass:"margin-btn",attrs:{type:"primary",disabled:"",icon:"download"}},[a._v("生成")]),n("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"import"},on:{click:a.handleOpenImportModal}},[a._v("导入")]),n("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"edit",disabled:1!==a.selectTableKeys.length},on:{click:function(e){return a.handleEditCodePreviewSetting(a.selectTableKeys[0])}}},[a._v("修改")]),n("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"delete",disabled:a.selectTableKeys.length<1},on:{click:function(e){return a.handleDeleteData(a.selectTableKeys)}}},[a._v("删除")])],1)],2),n("modal-code-preview",{ref:"modalCodePreview"}),n("modal-code-generate-setting",{ref:"modalCodeGenerateSetting"}),n("modal-import",{ref:"modalImport"})],1)},r=[],s=(a("d3b7"),a("25f0"),a("b421")),i=a("99eb"),o=a("b153"),l=a("e40b"),d=a("ed08"),c=a("c1df"),u=a.n(c),m=(a("5c3a"),a("f5ef"));u.a.locale("zh-cn");var p={data:function(){return{par:[{name:"tableName",label:"表名称",type:"input"},{name:"tableComment",label:"表描述",type:"input"},{name:"createTime",label:"创建起始",type:"datetimeRange"}],tableData:{pageSize:10,pageNum:1,totalPages:1,totalSize:1,content:[{sid:"1",tableName:"啊啊啊测试"}]},tableColumns:[{title:"表名称",dataIndex:"tableName",key:"tableName"},{title:"表描述",dataIndex:"tableComment",key:"tableComment"},{title:"实体",dataIndex:"className",key:"className"},{title:"创建时间",dataIndex:"createTime",key:"createTime"},{title:"更新时间",dataIndex:"updateTime",key:"updateTime"}],selectTableKeys:[],loadingFlag:!1}},mounted:function(){var e=this,t=this.tableData,a=t.pageNum,n=t.pageSize;this.loadData({pageNum:a,pageSize:n},{}),m["a"].$on("reloadData",function(){e.reloadData({},{})})},methods:{loadData:function(e,t){var a=this;this.loadingFlag=!0,"{}"===JSON.stringify(e)&&(e.pageNum=this.tableData.pageNum,e.pageSize=this.tableData.pageSize),Object(l["d"])(e.pageNum,e.pageSize,t).then(function(e){a.tableData.content=e.rows}).finally(function(){a.loadingFlag=!1})},selectTableKeysChangeFromQFT:function(e){this.selectTableKeys=e},formQuery:function(e){e.createStartTime=u()(e.createTime[0]).format("YYYY-MM-DD HH:mm:ss"),e.createEndTime=u()(e.createTime[1]).format("YYYY-MM-DD HH:mm:ss"),e.createTime=void 0,this.loadData({},e)},dbClick:function(e){this.handleEditCodePreviewSetting(e.sid)},reloadData:function(e){if("{}"!==JSON.stringify(e)){var t=e.pageNum,a=e.pageSize;this.tableData.pageNum=t,this.tableData.pageSize=a}this.loadData({},null)},handleOpenCodePreviewModal:function(e){this.$refs.modalCodePreview.open(e)},handleSyncData:function(t){var a=this;this.$confirm({title:"同步操作确认",content:"确认同步“".concat(t.tableComment,"”吗？"),onOk:function(){Object(l["a"])(t.sid).then(function(e){if(!Object(d["l"])(e))throw new Error(e.msg);a.$message.success("".concat(t.tableComment,"已同步"))}).catch(function(e){a.$message.error(e.message)})}})},handleDeleteData:function(t){var a=this;this.$confirm({title:"删除操作确认",content:"确认删除这".concat(t.length,"项数据？"),onOk:function(){Object(l["b"])(t.toString()).then(function(e){if(!Object(d["l"])(e))throw new Error(e.msg);a.$message.success("已删除".concat(t.length,"项数据")),a.selectTableKeys=[],a.loadData({},null)}).catch(function(e){a.$message.error("错误："+e.message)})}})},handleGenerateCode:function(t){var a=this;this.$confirm({title:"生成代码确认",content:"确认生成“".concat(t.tableComment,"”的代码吗？"),onOk:function(){Object(l["c"])(t.sid).then(function(e){if(!Object(d["l"])(e))throw new Error(e.msg);a.$message.success("".concat(t.tableComment,"已生成代码"))}).catch(function(e){a.$message.error(e.message)})}})},handleEditCodePreviewSetting:function(e){this.$refs.modalCodeGenerateSetting.open({mode:"edit",sid:e})},handleOpenImportModal:function(){this.$refs.modalImport.open()}},components:{modalCodePreview:s["default"],modalCodeGenerateSetting:i["default"],modalImport:o["default"]}},f=p,h=(a("e222"),a("2877")),b=Object(h["a"])(f,n,r,!1,null,"6d0ce15d",null);t["default"]=b.exports},"8eca":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("c-resizable-modal",{ref:"crm",attrs:{title:"上传",footer:null,modalWidth:"30%"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("a-upload-dragger",{attrs:{name:"file","file-list":e.fileList,"before-upload":e.beforeUpload,remove:e.handleRemove,accept:".xls,.xlsx,.csv"}},[a("p",{staticClass:"ant-upload-drag-icon"},[a("a-icon",{attrs:{type:"inbox"}})],1),a("p",{staticClass:"ant-upload-text"},[e._v(" 点击选择或将文件拖拽到虚线框内 ")]),a("p",{staticClass:"ant-upload-hint"},[e._v(" 每次只上传1项文件，只支持文件后缀为.xls、.xlsx、.csv的表格文档。 ")])]),0!==e.fileList.length?a("a-button",{staticClass:"upload-btn",attrs:{type:"primary",icon:"upload",loading:e.uploading,disabled:1!==e.fileList.length},on:{click:e.handleUpload}},[e._v("点击上传")]):e._e()],1)])],1)},r=[],s=a("2909"),i=(a("ac1f"),a("1276"),a("159b"),a("99af"),a("fb6a"),a("a434"),a("d3b7"),a("c0c7")),o=a("f5ef"),l={data:function(){return{fileList:[],uploading:!1}},methods:{open:function(){this.fileList=[],this.$refs.crm.open()},convertStrToElement:function(e){var t=this.$createElement,a=[];return e=e.replaceAll("<br/>","\n").split("\n"),e.forEach(function(e){a.push(t("p",null,e))}),a=t("p",null,a),a},beforeUpload:function(e){return this.fileList=[].concat(Object(s["a"])(this.fileList),[e]),!1},handleRemove:function(e){var t=this.fileList.indexOf(e),a=this.fileList.slice();a.splice(t,1),this.fileList=a},handleUpload:function(){var a=this,e=this.fileList,t=new FormData;e.forEach(function(e){t.append("file",e)}),this.uploading=!0,Object(i["j"])(t).then(function(e){var t=a.convertStrToElement(e.data);a.$notification.success({message:"导入结果：成功",description:t}),o["a"].$emit("uploadSuccess"),a.fileList=[]}).catch(function(e){var t=a.convertStrToElement(e.message);a.$notification.error({message:"导入结果：失败",description:t})}).finally(function(){a.uploading=!1})}}},d=l,c=(a("c918"),a("2877")),u=Object(c["a"])(d,n,r,!1,null,"18c3388e",null);t["default"]=u.exports},"99eb":function(e,t,a){"use strict";a.r(t);var n=function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("div",{attrs:{id:"tkadd"}},[n("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"90%",title:"修改生成配置"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("a-spin",{attrs:{spinning:a.spin}},[n("a-tabs",{attrs:{size:"small"}},[n("a-tab-pane",{key:"1",attrs:{tab:"基本信息"}},[n("a-form-model",{ref:"addForm",attrs:{model:a.addForm,labelCol:{span:6},wrapperCol:{span:18},rules:a.addFormRule}},[n("a-row",{attrs:{gutter:15}},[n("a-col",{attrs:{span:12}},[n("a-form-model-item",{attrs:{label:"表名称",prop:"tableName"}},[n("a-input",{model:{value:a.addForm.tableName,callback:function(e){a.$set(a.addForm,"tableName",e)},expression:"addForm.tableName"}})],1)],1),n("a-col",{attrs:{span:12}},[n("a-form-model-item",{attrs:{label:"表描述",prop:"tableComment"}},[n("a-input",{model:{value:a.addForm.tableComment,callback:function(e){a.$set(a.addForm,"tableComment",e)},expression:"addForm.tableComment"}})],1)],1),n("a-col",{attrs:{span:12}},[n("a-form-model-item",{attrs:{label:"实体类名称",prop:"className"}},[n("a-input",{model:{value:a.addForm.className,callback:function(e){a.$set(a.addForm,"className",e)},expression:"addForm.className"}})],1)],1),n("a-col",{attrs:{span:12}},[n("a-form-model-item",{attrs:{label:"作者",prop:"functionAuthor"}},[n("a-input",{model:{value:a.addForm.functionAuthor,callback:function(e){a.$set(a.addForm,"functionAuthor",e)},expression:"addForm.functionAuthor"}})],1)],1),n("a-col",{attrs:{span:12}},[n("a-form-model-item",{attrs:{label:"关联子表表名"}},[n("a-input",{model:{value:a.addForm.subTableName,callback:function(e){a.$set(a.addForm,"subTableName",e)},expression:"addForm.subTableName"}})],1)],1),n("a-col",{attrs:{span:12}},[n("a-form-model-item",{attrs:{label:"子表关联外键名"}},[n("a-input",{model:{value:a.addForm.subTableFkName,callback:function(e){a.$set(a.addForm,"subTableFkName",e)},expression:"addForm.subTableFkName"}})],1)],1),n("a-col",{attrs:{span:24}},[n("a-form-model-item",{attrs:{label:"备注",labelCol:{span:3},wrapperCol:{span:21}}},[n("a-input",{attrs:{type:"textarea"},model:{value:a.addForm.remark,callback:function(e){a.$set(a.addForm,"remark",e)},expression:"addForm.remark"}})],1)],1)],1)],1)],1),n("a-tab-pane",{key:"2",attrs:{tab:"字段信息"}},[n("c-muti-func-table",{attrs:{tableData:a.tableData,tableColumns:a.tableColumns,needCheckList:!1,needPagination:!1,loadingFlag:a.spin,needFixHead:!0,needActionBox:!1},on:{reloadData:a.reloadData},scopedSlots:a._u([{key:"isPk",fn:function(t){return[n("a-checkbox",{attrs:{checked:"1"===t.isPk},on:{change:function(e){return a.onCheckedChange("isPk",t)}}})]}},{key:"isIncrement",fn:function(t){return[n("a-checkbox",{attrs:{checked:"1"===t.isIncrement},on:{change:function(e){return a.onCheckedChange("isIncrement",t)}}})]}},{key:"isRequired",fn:function(t){return[n("a-checkbox",{attrs:{checked:"1"===t.isRequired},on:{change:function(e){return a.onCheckedChange("isRequired",t)}}})]}},{key:"isInsert",fn:function(t){return[n("a-checkbox",{attrs:{checked:"1"===t.isInsert},on:{change:function(e){return a.onCheckedChange("isInsert",t)}}})]}},{key:"isList",fn:function(t){return[n("a-checkbox",{attrs:{checked:"1"===t.isList},on:{change:function(e){return a.onCheckedChange("isList",t)}}})]}},{key:"isEdit",fn:function(t){return[n("a-checkbox",{attrs:{checked:"1"===t.isEdit},on:{change:function(e){return a.onCheckedChange("isEdit",t)}}})]}},{key:"isQuery",fn:function(t){return[n("a-checkbox",{attrs:{checked:"1"===t.isQuery},on:{change:function(e){return a.onCheckedChange("isQuery",t)}}})]}},{key:"queryType",fn:function(t){return n("div",{},[n("a-select",{staticClass:"select-box",attrs:{name:"queryType","default-value":t.queryType,placeholder:"请选择"},on:{change:function(e){return a.onSelectChange(e,"queryType",t.sid)}}},a._l(a.querySet,function(e,t){return n("a-select-option",{key:t,attrs:{value:e.value}},[a._v(a._s(e.label))])}),1)],1)}}])})],1),n("a-tab-pane",{key:"3",attrs:{tab:"生成信息"}},[n("a-form-model",{ref:"addForm2",attrs:{model:a.addForm,labelCol:{span:6},wrapperCol:{span:18},rules:a.addFormRule}},[n("a-row",[n("a-col",{attrs:{span:12}},[n("a-form-model-item",{attrs:{label:"生成代码方式"}},[n("a-radio-group",{attrs:{"default-value":"0"},model:{value:a.addForm.genType,callback:function(e){a.$set(a.addForm,"genType",e)},expression:"addForm.genType"}},[n("a-radio",{attrs:{value:"0"}},[a._v(" zip压缩包 ")]),n("a-radio",{attrs:{value:"1"}},[a._v(" 自定义路径 ")])],1)],1)],1),n("a-col",{attrs:{span:12}},[n("a-form-model-item",{attrs:{label:"使用模板",prop:"tplCategory"}},[n("a-select",{staticStyle:{width:"100%"},model:{value:a.addForm.tplCategory,callback:function(e){a.$set(a.addForm,"tplCategory",e)},expression:"addForm.tplCategory"}},[n("a-select-option",{attrs:{value:"CURD"}},[a._v(" 单表操作 ")]),n("a-select-option",{attrs:{value:"TREE"}},[a._v(" 树表操作 ")])],1)],1)],1),n("a-col",{attrs:{span:12}},[n("a-form-model-item",{attrs:{label:"生成包路径",prop:"packageName "}},[n("a-input",{model:{value:a.addForm.packageName,callback:function(e){a.$set(a.addForm,"packageName",e)},expression:"addForm.packageName "}})],1)],1),n("a-col",{attrs:{span:12}},[n("a-form-model-item",{attrs:{label:"生成路径",prop:"genPath "}},[n("a-input",{model:{value:a.addForm.genPath,callback:function(e){a.$set(a.addForm,"genPath",e)},expression:"addForm.genPath "}})],1)],1),n("a-col",{attrs:{span:12}},[n("a-form-model-item",{attrs:{label:"生成模块名",prop:"moduleName"}},[n("a-input",{model:{value:a.addForm.moduleName,callback:function(e){a.$set(a.addForm,"moduleName",e)},expression:"addForm.moduleName"}})],1)],1),n("a-col",{attrs:{span:12}},[n("a-form-model-item",{attrs:{label:"生成业务名",prop:"businessName"}},[n("a-input",{model:{value:a.addForm.businessName,callback:function(e){a.$set(a.addForm,"businessName",e)},expression:"addForm.businessName"}})],1)],1),n("a-col",{attrs:{span:12}},[n("a-form-model-item",{attrs:{label:"生成功能名"}},[n("a-input",{model:{value:a.addForm.functionName,callback:function(e){a.$set(a.addForm,"functionName",e)},expression:"addForm.functionName"}})],1)],1),n("a-col",{attrs:{span:12}},[n("a-form-model-item",{attrs:{label:"其它生成选项"}},[n("a-input",{model:{value:a.addForm.options,callback:function(e){a.$set(a.addForm,"options",e)},expression:"addForm.options"}})],1)],1),n("a-col",{attrs:{span:12}},[n("a-form-model-item",{attrs:{label:"创建者编号",prop:"creatorSid"}},[n("a-input",{attrs:{disabled:""},model:{value:a.addForm.creatorSid,callback:function(e){a.$set(a.addForm,"creatorSid",e)},expression:"addForm.creatorSid"}})],1)],1),n("a-col",{attrs:{span:12}},[n("a-form-model-item",{attrs:{label:"创建时间",prop:"createTime"}},[n("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:{format:"HH:mm:ss"},allowClear:"",valueFormat:"YYYY-MM-DD HH:mm:ss",disabled:""},model:{value:a.addForm.createTime,callback:function(e){a.$set(a.addForm,"createTime",e)},expression:"addForm.createTime"}})],1)],1),n("a-col",{attrs:{span:12}},[n("a-form-model-item",{attrs:{label:"修改者编号",prop:"editorSid"}},[n("a-input",{attrs:{disabled:""},model:{value:a.addForm.editorSid,callback:function(e){a.$set(a.addForm,"editorSid",e)},expression:"addForm.editorSid"}})],1)],1),n("a-col",{attrs:{span:12}},[n("a-form-model-item",{attrs:{label:"修改时间",prop:"updateTime"}},[n("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:{format:"HH:mm:ss"},valueFormat:"YYYY-MM-DD HH:mm:ss",disabled:""},model:{value:a.addForm.updateTime,callback:function(e){a.$set(a.addForm,"updateTime",e)},expression:"addForm.updateTime"}})],1)],1)],1)],1)],1)],1)],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:a.handleCancel}},[a._v("取 消")]),n("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:a.saveLoading},on:{click:a.handleSave}},[a._v(" "+a._s("insert"==a.mode?"保存":"提交修改")+" ")])],1)])],1)},r=[],s=(a("c740"),a("d3b7"),a("e40b")),i=a("ed08"),o=(a("f5ef"),{data:function(){return{mode:"insert",spin:!1,querySet:[{label:"=",value:"EQ"},{label:"!=",value:"NE"},{label:"＞",value:"GT"},{label:"＞=",value:"GTE"},{label:"＜",value:"LT"},{label:"＜=",value:"LTE"},{label:"like",value:"LIKE"},{label:"between",value:"BETWEEN"}],tableColumns:[{key:"sid",dataIndex:"sid",title:"编号"},{key:"tableSid",dataIndex:"tableSid",title:"归属表编号"},{key:"columnName",dataIndex:"columnName",title:"列名称"},{key:"columnComment",dataIndex:"columnComment",title:"列描述"},{key:"columnType",dataIndex:"columnType",title:"列类型"},{key:"javaType",dataIndex:"javaType",title:"JAVA类型"},{key:"javaField",dataIndex:"javaField",title:"JAVA字段名"},{key:"isPk",dataIndex:"isPk",title:"是否主键",hasSlot:!0},{key:"isIncrement",dataIndex:"isIncrement",title:"是否自增",hasSlot:!0},{key:"isRequired",dataIndex:"isRequired",title:"是否必填",hasSlot:!0},{key:"isInsert",dataIndex:"isInsert",title:"是否为插入字段",hasSlot:!0},{key:"isEdit",dataIndex:"isEdit",title:"是否编辑字段",hasSlot:!0},{key:"isList",dataIndex:"isList",title:"是否列表字段",hasSlot:!0},{key:"isQuery",dataIndex:"isQuery",title:"是否查询字段",hasSlot:!0},{key:"queryType",dataIndex:"queryType",title:"查询方式",hasSlot:!0},{key:"htmlType",dataIndex:"htmlType",title:"显示类型"},{key:"dictType",dataIndex:"dictType",title:"字典类型"},{key:"sort",dataIndex:"sort",title:"排序"},{key:"creatorSid",dataIndex:"creatorSid",title:"创建者编号"},{key:"createTime",dataIndex:"createTime",title:"创建时间"},{key:"editorSid",dataIndex:"editorSid",title:"修改者编号"},{key:"updateTime",dataIndex:"updateTime",title:"修改时间"}],loadingFlag:!1,tableData:{pageSize:10,pageNum:1,totalPages:1,totalSize:1,content:[{sid:"1",tableSid:"1",columnName:"1",columnComment:"1",columnType:"1",javaType:"1",javaField:"1",isPk:"1",isIncrement:"1",isRequired:"1",isInsert:"1",isEdit:"1",isList:"1",isQuery:"1",queryType:"EQ",htmlType:"1",dictType:"1",sort:"1",creatorSid:"1",createTime:"1",editorSid:"1",updateTime:"1"}]},saveLoading:!1,addForm:{sid:"",tableSid:"",columnName:"",columnComment:"",columnType:"",javaType:"",javaField:"",isPk:"",isIncrement:"",isRequired:"",isInsert:"",isEdit:"",isList:"",isQuery:"",queryType:"",htmlType:"",dictType:"",sort:"",creatorSid:"",createTime:"",editorSid:"",updateTime:""},addFormRule:{tableName:[{required:!0,message:"表名称不允许为空",trigger:"blur",type:"string"}],className:[{required:!0,message:"实体类名称不允许为空",trigger:"blur"}],tplCategory:[{required:!0,message:"必须给定一个使用模板",trigger:"blur"}],genType:[{required:!0,message:"必须给定一个生成代码的方式",trigger:"blur"}]},cgsInfo:{}}},methods:{getDefaultValue:function(){return{sid:"",tableSid:"",columnName:"",columnComment:"",columnType:"",javaType:"",javaField:"",isPk:"",isIncrement:"",isRequired:"",isInsert:"",isEdit:"",isList:"",isQuery:"",queryType:"",htmlType:"",dictType:"",sort:"",creatorSid:"",createTime:"",editorSid:"",updateTime:""}},open:function(e){this.addForm=this.getDefaultValue(),this.mode=e.mode,this.cgsInfo=e,this.$refs.crm.open(),"edit"==this.mode&&(this.spin=!0,this.getTableDataBySid(e.sid)),this.isModalVisible=!0},tableDataChangeValue:function(){},onSelectChange:function(e,t,a){var n=this.tableData.content.findIndex(function(e){return e.sid===a});this.tableData.content[n][t]=e},onCheckedChange:function(e,t){var a=this.tableData.content,n=a.findIndex(function(e){return e.sid===t.sid}),r="1"===this.tableData.content[n][e]?"0":"1";this.tableData.content[n][e]=r},convertColumnsInfo:function(e){var t=[];for(var a in e)t.push({dataIndex:e[a].columnName,key:e[a].columnName,title:e[a].columnComment});return t},reloadData:function(){this.getTableDataBySid(this.cgsInfo.sid)},getTableDataBySid:function(e){var t=this;this.spin=!0,Object(s["f"])(e).then(function(e){if(!Object(i["l"])(e))throw new Error(e.msg);t.addForm=e.data.info,t.tableData={content:e.data.info.columns,totalSize:e.data.info.columns.length}}).catch(function(e){t.$message.error(e.message)}).finally(function(){t.spin=!1})},handleSave:function(){var t=this;this.addForm.columns=this.tableData.content,this.saveLoading=!0,Object(s["i"])(this.addForm).then(function(e){if(!Object(i["l"])(e))throw new Error(e.msg);t.$message.success("成功"),t.$refs.crm.close()}).catch(function(e){t.$message.error(e.message)}).finally(function(){t.saveLoading=!1})},handleCancel:function(){this.$refs.crm.close()}},mounted:function(){}}),l=o,d=(a("dfaef"),a("2877")),c=Object(d["a"])(l,n,r,!1,null,"48c0c218",null);t["default"]=c.exports},"9d3c":function(e,t,a){"use strict";a.r(t),a.d(t,"orgLevelParam",function(){return r}),a.d(t,"orgTypeParam",function(){return n}),a.d(t,"statusParam",function(){return s}),a.d(t,"delFlagParam",function(){return i});var n={1:"机构",2:"部门"},r={1:"总行",2:"分行",3:"支行",4:"网点"},s={0:"正常",1:"停用"},i={0:"存在",2:"删除"}},a03f:function(e,t,a){"use strict";a.r(t);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"75%",title:("insert"==t.mode?"新增":"编辑")+"项目"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("a-spin",{attrs:{spinning:t.spin}},[a("a-form-model",{ref:"addForm",attrs:{model:t.addForm,labelCol:{span:6},wrapperCol:{span:18},rules:t.addFormRule}},[a("a-row",[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"项目编号",prop:"projectCode"}},[a("a-input",{model:{value:t.addForm.projectCode,callback:function(e){t.$set(t.addForm,"projectCode",e)},expression:"addForm.projectCode"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"项目名称",prop:"projectName"}},[a("a-input",{model:{value:t.addForm.projectName,callback:function(e){t.$set(t.addForm,"projectName",e)},expression:"addForm.projectName"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"项目状态",prop:"status"}},[a("a-radio-group",{attrs:{name:"radioGroup"},model:{value:t.addForm.status,callback:function(e){t.$set(t.addForm,"status",e)},expression:"addForm.status"}},[a("a-radio",{attrs:{value:"0"}},[t._v(" 正常 ")]),a("a-radio",{attrs:{value:"1"}},[t._v(" 停用 ")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"创建者编号",prop:"creatorSid"}},[a("a-input",{attrs:{disabled:""},model:{value:t.addForm.creatorSid,callback:function(e){t.$set(t.addForm,"creatorSid",e)},expression:"addForm.creatorSid"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"创建时间",prop:"createTime"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:{format:"HH:mm:ss"},disabled:""},model:{value:t.addForm.createTime,callback:function(e){t.$set(t.addForm,"createTime",e)},expression:"addForm.createTime"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"修改者编号",prop:"editorSid"}},[a("a-input",{attrs:{disabled:""},model:{value:t.addForm.editorSid,callback:function(e){t.$set(t.addForm,"editorSid",e)},expression:"addForm.editorSid"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"修改时间",prop:"updateTime"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:{format:"HH:mm:ss"},disabled:""},model:{value:t.addForm.updateTime,callback:function(e){t.$set(t.addForm,"updateTime",e)},expression:"addForm.updateTime"}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"备注",prop:"note",labelCol:{span:3},wrapperCol:{span:21}}},[a("a-input",{attrs:{type:"textarea"},model:{value:t.addForm.remark,callback:function(e){t.$set(t.addForm,"remark",e)},expression:"addForm.remark"}})],1)],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:t.handleCancel}},[t._v("取 消")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:t.saveLoading},on:{click:t.handleSave}},[t._v("保存")])],1)])],1)},r=[],s=(a("d3b7"),a("99af"),a("7bec")),i=a("ed08"),o=a("f5ef"),l=a("d2b6"),d=s["a"].SHOW_PARENT,c={data:function(){return{mode:"read",spin:!1,SHOW_PARENT:d,currentStep:0,isModalVisible:!1,saveLoading:!1,treeProjectArray:[],treeReportArray:[],treeAuthArray:[],fromRoleTreeData:[],fromProjectTreeData:[],treeData:[],addForm:{projectCode:"",projectName:"",parentSid:"",status:"0",creatorSid:"",createTime:"",editorSid:"",updateTime:"",remark:""},addFormRule:{projectCode:[{required:!0,message:"项目编号不允许为空",trigger:"blur"}],projectName:[{required:!0,message:"项目名称不允许为空",trigger:"blur"}],projectVersion:[{required:!0,message:"项目版本不能为空",trigger:"blur"}],status:[{required:!0,message:"状态不能为空",trigger:"blur"}],beginDate:[{required:!0,message:"必须填写日期",trigger:"blur"}],endDate:[{required:!0,message:"必须填写日期",trigger:"blur"}]}}},methods:{getDefaultValue:function(){return{sid:"",projectCode:"",projectName:"",parentSid:"",status:"0",beginDate:"",endDate:"9999-12-31",creatorSid:"",createTime:"",editorSid:"",updateTime:"",remark:""}},loadTreeData:function(){var t=this;Object(l["g"])(null).then(function(e){t.treeData=Object(i["c"])(e.data)})},open:function(e){this.loadTreeData(),this.addForm=this.getDefaultValue(),this.mode=e.mode,this.addForm.parentSid=e.sid,"edit"===this.mode&&(this.spin=!0,this.getDataBySid(e.sid)),this.$refs.crm.open()},getDataBySid:function(e){var t=this;Object(l["f"])(e).then(function(e){t.addForm=e.data}).finally(function(){t.spin=!1})},handleSave:function(){var t=this;this.$refs.addForm.validate(function(e){e&&(t.saveLoading=!0,"insert"==t.mode?t.createProject():t.editProject())})},editProject:function(){var t=this;Object(l["j"])(this.addForm).then(function(e){if(200!==e.code||!0!==e.status)throw new Error("".concat(e.msg,"。状态码为").concat(e.code,"，状态为").concat(e.status));t.$message.success("数据已更新")}).catch(function(e){t.$message.error("请求异常："+e.message)}).finally(function(){t.saveLoading=!1,o["a"].$emit("reloadData"),t.$refs.crm.close()})},createProject:function(){var t=this;Object(l["a"])(this.addForm).then(function(e){if(200!==e.code||!0!==e.status)throw new Error("".concat(e.msg,"。状态码为").concat(e.code,"，状态为").concat(e.status,"。"));t.$message.success("数据已新增"),t.$refs.crm.close(),o["a"].$emit("reloadData")}).catch(function(e){t.$message.error("请求异常："+e.message)}).finally(function(){t.saveLoading=!1})},handleCancel:function(){var e=this;e.$refs.crm.close()}},mounted:function(){}},u=c,m=a("2877"),p=Object(m["a"])(u,n,r,!1,null,null,null);t["default"]=p.exports},a6b6:function(e,t,a){"use strict";a("357b")},b153:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"75%",title:"导入表"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("c-query-form-table",{attrs:{searchParams:e.par,tableData:e.tableData,tableColumns:e.tableColumns,needTableCheckList:!0,needActionBox:!1,selectTableKeys:e.selectTableKeys,loadingFlag:e.loadingFlag,dataKeyName:"tableName"},on:{selectTableKeysChangeFromQFT:e.selectTableKeysChangeFromQFT,formQuery:e.formQuery,dbClick:e.dbClick,reloadData:e.reloadData}})],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:e.handleCancel}},[e._v("取 消")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:e.saveLoading},on:{click:e.handleSave}},[e._v(" 保存 ")])],1)])],1)},r=[],s=(a("d3b7"),a("25f0"),a("99af"),a("e40b")),i=a("f5ef"),o={data:function(){return{tableData:{pageSize:10,pageNum:1,totalPages:1,totalSize:1,content:[]},tableColumns:[{title:"表名称",key:"tableName",dataIndex:"tableName"},{title:"表描述",key:"tableComment",dataIndex:"tableComment"},{title:"创建时间",key:"createTime",dataIndex:"createTime"},{title:"更新时间",key:"updateTime",dataIndex:"updateTime"}],par:[{name:"tableName",label:"表名称",type:"input"},{name:"tableComment",label:"表描述",type:"input"}],selectTableKeys:[],loadingFlag:!1,saveLoading:!1}},mounted:function(){var e=this.tableData,t=e.pageNum,a=e.pageSize,n=this;this.loadDBData({pageNum:t,pageSize:a},null),i["a"].$on("reloadData",function(){n.reloadData({},{})})},methods:{getDefaultValue:function(){return{sid:"",userType:"",userCode:"",userName:"",nickName:"",password:"",email:"",phone:"",tel:"",sex:"0",avatarUrl:"",builtIn:"0",status:"0",delFlag:"0",pwdExpirationDATE:"",pwdERRORfrequency:"",useLockedDate:"",creatorSid:"",createTime:"",editorSid:"",updateTime:"",remark:""}},loadDBData:function(e,t){var a=this;"{}"===JSON.stringify(e)&&(e.pageNum=this.tableData.pageNum,e.pageSize=this.tableData.pageSize),Object(s["e"])(e.pageNum,e.pageSize,t).then(function(e){a.tableData.content=e.rows,a.tableData.content=e.rows,a.tableData.totalSize=e.total,a.tableData.totalPages=Math.ceil(a.tableData.totalSize/a.tableData.pageSize)}).finally(function(){})},open:function(){this.$refs.crm.open()},handleSave:function(){var t=this;this.saveLoading=!0,Object(s["h"])(this.selectTableKeys.toString()).then(function(e){if(200!==e.code||!0!==e.status)throw new Error("请求异常：".concat(e.msg,"。状态码为").concat(e.code,"，状态为").concat(e.status,"。"));t.$message.success("导入请求成功"),i["a"].$emit("reloadData",null),t.$refs.crm.close()}).catch(function(e){t.$message.error(e.message)}).finally(function(){t.saveLoading=!1})},handleCancel:function(){var e=this;this.$confirm({title:"表单存在内容",content:"表单上已有输入的信息，关闭后信息会清空，确认关闭吗？",onOk:function(){e.$message.info("触发关闭事件"),e.$refs.crm.close()},onCancel:function(){}})},selectTableKeysChangeFromQFT:function(e){this.selectTableKeys=e},formQuery:function(e){this.loadDBData({},e)},dbClick:function(){},reloadData:function(e){if("{}"!==JSON.stringify(e)){var t=e.pageNum,a=e.pageSize;this.tableData.pageNum=t,this.tableData.pageSize=a}this.loadDBData({},null)}}},l=o,d=a("2877"),c=Object(d["a"])(l,n,r,!1,null,null,null);t["default"]=c.exports},b421:function(e,t,a){"use strict";a.r(t);var n=function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("div",{attrs:{id:"codePreview"}},[n("c-resizable-modal",{ref:"crm",attrs:{footer:null,title:"代码预览"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("a-spin",{attrs:{tip:"正在请求数据...",spinning:a.spinning}},[n("a-tabs",a._l(a.previewData,function(e,t){return n("a-tab-pane",{key:t,staticClass:"preview-box",attrs:{tab:t.substring(t.lastIndexOf("/")+1,t.indexOf(".vm")),name:t.substring(t.lastIndexOf("/")+1,t.indexOf(".vm"))}},[n("a-button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e,expression:"value"},{name:"clipboard",rawName:"v-clipboard:success",value:a.clipboardSuccessHandler,expression:"clipboardSuccessHandler",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:a.clipboardErrorHandler,expression:"clipboardErrorHandler",arg:"error"}],staticClass:"copy-btn",attrs:{icon:"copy",type:"dashed"}},[a._v("复制")]),n("pre",[n("code",{staticClass:"hljs",domProps:{innerHTML:a._s(a.highlightedCode(e,t))}})])],1)}),1)],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:a.handleCancel}},[a._v("取 消")]),n("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:a.saveLoading},on:{click:a.handleSave}},[a._v("保存")])],1)])],1)},r=[],s=(a("d3b7"),a("e40b")),i=a("1487"),o=a.n(i);a("e619");o.a.registerLanguage("java",a("332f")),o.a.registerLanguage("xml",a("8dcb")),o.a.registerLanguage("html",a("8dcb")),o.a.registerLanguage("vue",a("8dcb")),o.a.registerLanguage("javascript",a("4dd1")),o.a.registerLanguage("sql",a("de09"));var l={data:function(){return{saveLoading:!1,spinning:!0,previewData:{}}},methods:{clipboardSuccessHandler:function(e){e.value,e.event;this.$message.success("已复制")},clipboardErrorHandler:function(e){e.value,e.event},reset:function(){this.previewData={}},open:function(e){var t=this;this.reset(),this.spinning=!0,Object(s["g"])(e).then(function(e){t.previewData=e.data}).finally(function(){t.spinning=!1}),this.$refs.crm.open()},handleSave:function(){var e=this;this.saveLoading=!0,setTimeout(function(){e.saveLoading=!1,e.$refs.crm.close()},2e3),this.$message.success("触发保存事件")},handleCancel:function(){this.$refs.crm.close()},highlightedCode:function(e,t){var a=t.substring(t.lastIndexOf("/")+1,t.indexOf(".vm")),n=a.substring(a.indexOf(".")+1,a.length),r=o.a.highlight(n,e||"",!0);return r.value||"&nbsp;"}}},d=l,c=(a("7849"),a("2877")),u=Object(c["a"])(d,n,r,!1,null,"47d29d6a",null);t["default"]=u.exports},ba4d:function(e,t,a){"use strict";a.r(t);var n=function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("div",{staticClass:"user-online white-back-box",attrs:{id:"userOnline"}},[n("c-query-form-table",{attrs:{searchParams:a.par,tableData:a.tableData,tableColumns:a.tableColumns,needTableCheckList:!0,selectTableKeys:a.selectTableKeys,loadingFlag:a.loadingFlag,dataKeyName:["tokenId"]},on:{selectTableKeysChangeFromQFT:a.selectTableKeysChangeFromQFT,formQuery:a.formQuery,dbClick:a.dbClick,reloadData:a.reloadData},scopedSlots:a._u([{key:"status",fn:function(e){return n("span",{},[n("span",[a._v(a._s(a.statusParam[e.data.status]))])])}},{key:"tableActionBox",fn:function(t){return[n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:useronline:forceLogout"],expression:"['system:useronline:forceLogout']"}],attrs:{type:"link"},on:{click:function(e){return a.handleForceLogoutUser([t.data.tokenId])}}},[a._v("强制退出")])]}}])},[n("template",{staticClass:"btn-box",slot:"functionBtnBox"},[n("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:useronline:forceLogout"],expression:"['system:useronline:forceLogout']"}],staticClass:"margin-box",attrs:{type:"danger",disabled:0==a.selectTableKeys.length,icon:"delete"},on:{click:function(e){return a.handleForceLogoutUser(a.selectTableKeys)}}},[a._v("强制退出用户")])],1)],2)],1)},r=[],s=(a("d81d"),a("7db0"),a("d3b7"),a("25f0"),a("712b")),i=a("f5ef"),o={data:function(){return{selectTableKeys:[],loadingFlag:!1,isExportTplBtnLoad:!1,isExportBtnLoad:!1,queryParam:{},par:[{label:"会话编号",type:"input",name:"tokenId"},{label:"用户名称",type:"input",name:"userName"},{label:"登录IP地址",type:"input",name:"ipaddr"},{label:"登录地址",type:"input",name:"loginLocation"},{label:"浏览器类型",type:"input",name:"browser"},{label:"操作系统",type:"input",name:"os"},{label:"登录时间",type:"input",name:"loginTime"}],tableData:{pageSize:10,pageNum:1,totalPages:1,totalSize:1,content:[]},tableColumns:[{title:"会话编号",dataIndex:"tokenId",key:"tokenId"},{title:"用户名称",dataIndex:"userName",key:"userName"},{title:"登录IP地址",dataIndex:"ipaddr",key:"ipaddr"},{title:"登录地址",dataIndex:"loginLocation",key:"loginLocation"},{title:"浏览器类型",dataIndex:"browser",key:"browser"},{title:"操作系统",dataIndex:"os",key:"os"},{title:"登录时间",dataIndex:"loginTime",key:"loginTime"}],selectedKeys:[]}},mounted:function(){this.treeData=this.tableData.content;var e=this,t=this.tableData,a=t.pageNum,n=t.pageSize;this.handleLoadData({pageNum:a,pageSize:n},null),i["a"].$on("reloadData",function(){e.reloadData({},{})})},methods:{handleForceLogoutUser:function(t){this.$createElement;var a=[],n=this;t.map(function(t){var e=n.tableData.content.find(function(e){return t===e.tokenId});a.push(e.userName)}),this.$confirm({title:"强制用户退出确认",content:function(e){return e("p",["该操作会让用户【",a.toString().replaceAll(",","、"),"】",e("span",{class:"textRed"},["强制性注销并退出系统"]),"，确认此操作？"])},onOk:function(){var e={countNum:t.length,tokenId:t.toString()};Object(s["a"])(e).then(function(e){n.$message.success("强制用户退出操作".concat(e.msg)),n.selectTableKeys=[],n.reloadData({},{})})},onCancel:function(){}})},handleLoadData:function(e,t){var a=this;"{}"===JSON.stringify(e)&&(e.pageNum=this.tableData.pageNum,e.pageSize=this.tableData.pageSize),this.loadingFlag=!0,this.selectTableKeys=[],Object(s["b"])(e.pageNum,e.pageSize,t).then(function(e){a.$nextTick(function(){a.tableData.content=e.rows,a.tableData.totalSize=e.total,a.tableData.totalPages=Math.ceil(a.tableData.totalSize/a.tableData.pageSize)})}).finally(function(){setTimeout(function(){a.loadingFlag=!1},500)})},reloadData:function(e){if("{}"!==JSON.stringify(e)){var t=e.pageNum,a=e.pageSize;this.tableData.pageNum=t,this.tableData.pageSize=a}this.handleLoadData({},null)},formQuery:function(e){this.queryParam=e,this.handleLoadData({},e)},dbClick:function(e){},selectTableKeysChangeFromQFT:function(e){this.selectTableKeys=e}},components:{}},l=o,d=(a("e39b"),a("2877")),c=Object(d["a"])(l,n,r,!1,null,"47753fba",null);t["default"]=c.exports},bf21:function(e,t,a){},c01b:function(e,t,a){"use strict";a.r(t);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"orgDetail"}},[a("c-resizable-modal",{ref:"crm",attrs:{title:t.title,modalWidth:"50%"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("a-steps",{staticClass:"step-box",attrs:{current:t.currentStep,size:"small"}},[a("a-step",{attrs:{title:"选择机构"}}),a("a-step",{attrs:{title:"选择主机构"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.currentStep,expression:"currentStep === 0"}]},[a("a-spin",{attrs:{tip:"正在请求数据...",spinning:t.spinning}},[a("c-check-tree",{attrs:{propTreeData:t.treeData,checkedKeys:t.checkedKeys},on:{changeCheckedKeys:t.changeCheckedKeys}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.currentStep,expression:"currentStep === 1"}]},[a("h4",[t._v("请在已选的机构信息里选择一项作为主机构。")]),a("a-radio-group",{attrs:{"button-style":"solid"},model:{value:t.isMain,callback:function(e){t.isMain=e},expression:"isMain"}},t._l(t.selectItems,function(e){return a("a-radio-button",{key:e.key,attrs:{value:e.key}},[t._v(" "+t._s(e.title)+" ")])}),1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{directives:[{name:"show",rawName:"v-show",value:1===t.currentStep,expression:"currentStep===1"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"left"},on:{click:function(e){t.currentStep--}}},[t._v("上一部分")]),a("a-button",{directives:[{name:"show",rawName:"v-show",value:0===t.currentStep,expression:"currentStep===0"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"right",disabled:0===t.checkedKeys.length},on:{click:t.handleNextStep}},[t._v("下一部分")]),a("a-button",{directives:[{name:"show",rawName:"v-show",value:1===t.currentStep,expression:"currentStep===1"},{name:"hasPermi",rawName:"v-hasPermi",value:["system:user:updateUserOrgRel"],expression:"['system:user:updateUserOrgRel']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:t.saveLoading},on:{click:t.handleSave}},[t._v("更 新")])],1)])],1)},r=[],s=(a("99af"),a("d3b7"),a("25f0"),a("d81d"),a("c0c7")),i=a("ed08"),o={data:function(){return{isSelectAll:!1,saveLoading:!1,treeData:[],checkedKeys:[],defaultExpandedKeys:[],spinning:!0,userInfo:{},currentStep:0,selectItems:[],isMain:""}},computed:{title:function(){var e=this.userInfo,t=e.userName,a=e.userCode;return"对用户 “ ".concat(t,"（").concat(a,"）”的机构设置")}},methods:{reset:function(){this.defaultExpandedKeys=[],this.checkedKeys=[],this.treeData=[],this.isMain="",this.currentStep=0},open:function(e){this.userInfo=e,this.reset(),this.spinning=!0,this.$refs.crm.open(),this.getTreeData()},changeCheckedKeys:function(e){this.checkedKeys=e},handleSave:function(){var t=this;if(""===this.isMain)return this.$warning({content:"请选择一个机构作为用户的主机构"}),!1;this.saveLoading=!0;var e={userSid:this.userInfo.sid,orgSid:this.checkedKeys.toString(),isMain:this.isMain,isRelation:"0"};Object(s["n"])(e).then(function(e){if(!Object(i["l"])(e))throw new Error(e.msg);t.$message.success("用户与机构的信息更新成功"),t.$refs.crm.close()}).catch(function(e){t.$message.error(e.message)}).finally(function(){t.saveLoading=!1})},getItemByRecursion:function(e,t){var a={};for(var n in e){var r=e[n];if(r.key===t){a=r;break}if(r.children&&r.children.length>0&&(a=this.getItemByRecursion(r.children,t),a.title))break}return a},checkKeys:function(e){var t=[],a=[];for(var n in e){var r=e[n];"0"===r.isChecked&&(t.push(r.key),a.push(r.title)),r.children&&r.children.length>0&&t.push.apply(t,this.checkKeys(r.children))}return t},getTreeData:function(){var t=this,e=this.userInfo.sid;Object(s["g"])(e).then(function(e){t.treeData=e.data.orgTree,t.isMain=e.data.isMain,t.checkedKeys=t.checkKeys(e.data.orgTree),t.spinning=!1})},handleCancel:function(){var e=this;this.$confirm({title:"表单存在内容",onOk:function(){e.$message.info("触发关闭事件"),e.$refs.crm.close()},onCancel:function(){}})},handleNextStep:function(){var t=this;this.currentStep++;var a=[];this.checkedKeys.map(function(e){a.push(t.getItemByRecursion(t.treeData,e))}),this.selectItems=a}}},l=o,d=(a("1bb1"),a("2877")),c=Object(d["a"])(l,n,r,!1,null,"636f0dd2",null);t["default"]=c.exports},c918:function(e,t,a){"use strict";a("ff83")},d71a:function(e,t,a){},dfaef:function(e,t,a){"use strict";a("245c")},e222:function(e,t,a){"use strict";a("bf21")},e39b:function(e,t,a){"use strict";a("5182")},ea68:function(e,t,a){},ff83:function(e,t,a){}}]);