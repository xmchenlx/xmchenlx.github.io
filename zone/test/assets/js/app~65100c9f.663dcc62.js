(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app~65100c9f"],{"01f3":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"codePreview"}},[a("c-resizable-modal",{ref:"crm",attrs:{footer:null,title:"代码预览"}},[a("a-spin",{attrs:{tip:"正在请求数据...",spinning:e.spinning}},[a("div",{staticClass:"preview-box"},[a("a-button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.previewData,expression:"previewData"},{name:"clipboard",rawName:"v-clipboard:success",value:e.clipboardSuccessHandler,expression:"clipboardSuccessHandler",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.clipboardErrorHandler,expression:"clipboardErrorHandler",arg:"error"}],staticClass:"copy-btn",attrs:{icon:"copy",type:"dashed"}},[e._v("复制")]),a("pre",[a("code",{staticClass:"hljs",domProps:{innerHTML:e._s(e.highlightedCode(e.previewData))}})])],1)]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:e.handleCancel}},[e._v("取 消")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:e.saveLoading},on:{click:e.handleSave}},[e._v("保存")])],1)],1)],1)},n=[],s=(a("ac1f"),a("1276"),a("d3b7"),a("d81d"),a("fe40")),l=a("1487"),o=a.n(l);a("e619");o.a.registerLanguage("sql",a("de09"));var r={data:function(){return{saveLoading:!1,spinning:!0,previewData:""}},methods:{clipboardSuccessHandler:function(e){e.value,e.event;this.$message.success("已复制")},clipboardErrorHandler:function(e){e.value,e.event},reset:function(){this.previewData=""},open:function(e){var a=this;this.reset(),this.spinning=!0;var t=e.split("#")[0],i=e.split("#")[1];Object(s["d"])(t,i).then(function(e){var t="";e.data.sqlList.map(function(e){t+=e.statement}),a.$nextTick(function(){a.previewData=t})}).finally(function(){a.spinning=!1}),this.$refs.crm.open()},handleSave:function(){var e=this;this.saveLoading=!0,setTimeout(function(){e.saveLoading=!1,e.$refs.crm.close()},2e3),this.$message.success("触发保存事件")},handleCancel:function(){this.$refs.crm.close()},highlightedCode:function(e){var t=o.a.highlight("sql",e||"",!0);return t.value||"&nbsp;"}}},d=r,c=(a("4105"),a("2877")),u=Object(c["a"])(d,i,n,!1,null,"70305bc4",null);t["default"]=u.exports},"07ca":function(e,t,a){"use strict";a("ec67")},"12ed":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"menuAccr"}},[a("c-resizable-modal",{ref:"crm",attrs:{title:e.title}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("a-spin",{attrs:{tip:"正在请求数据...",spinning:e.spinning}},[a("c-check-tree",{attrs:{propTreeData:e.treeData,checkedKeys:e.checkedKeys},on:{changeCheckedKeys:e.changeCheckedKeys}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:e.handleCancel}},[e._v("取 消")]),a("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:role:updateRoleMenuRel"],expression:"['system:role:updateRoleMenuRel']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:e.saveLoading},on:{click:e.handleSave}},[e._v("更 新")])],1)])],1)},n=[],s=(a("99af"),a("d3b7"),a("25f0"),a("3528")),l=a("ed08"),o={data:function(){return{saveLoading:!1,roleInfo:{},spinning:!0,treeData:[],checkedKeys:[]}},computed:{title:function(){var e=this.roleInfo,t=e.roleName,a=e.roleCode;return"角色“".concat(t,"（").concat(a,"）”的菜单授权")}},methods:{reset:function(){this.leftSourceData=[],this.rightTargetKeys=[],this.saveLoading=!1,this.checkedKeys=[],this.treeData=[]},open:function(e){this.roleInfo=e,this.reset(),this.loadTreeData(),this.spinning=!0,this.$refs.crm.open()},loadTreeData:function(){var t=this;Object(s["e"])(this.roleInfo.sid).then(function(e){if(!Object(l["l"])(e))throw new Error(e.msg);t.treeData=e.data,t.checkedKeys=t.checkKeys(t.treeData)}).catch(function(e){t.$message.error(e.message)}).finally(function(){t.spinning=!1})},checkKeys:function(e){var t=[],a=[];for(var i in e){var n=e[i];"0"===n.isChecked&&(t.push(n.key),a.push(n.title)),n.children&&n.children.length>0&&t.push.apply(t,this.checkKeys(n.children))}return t},handleSave:function(){var t=this;this.saveLoading=!0;var a=this,e={roleSid:this.roleInfo.sid,menuSid:this.checkedKeys.toString(),isRelation:"0"};Object(s["j"])(e).then(function(e){if(!l["l"])throw new Error(e.msg);t.$message.success("角色与菜单的信息已更新"),a.$refs.crm.close()}).catch(function(e){t.$message.error("错误："+e.message)}).finally(function(){t.saveLoading=!1})},changeCheckedKeys:function(e){this.checkedKeys=e},handleCancel:function(){var e=this;e.$refs.crm.close()}}},r=o,d=a("2877"),c=Object(d["a"])(r,i,n,!1,null,"2ec7351d",null);t["default"]=c.exports},"20b7":function(e,t,a){"use strict";a.r(t);var i=function(){var a=this,e=a.$createElement,i=a._self._c||e;return i("div",[i("c-query-form-table",{attrs:{searchParams:a.par,tableData:a.tableData,tableColumns:a.tableColumns,needTableCheckList:!0,selectTableKeys:a.selectTableKeys,loadingFlag:a.loadingFlag},on:{selectTableKeysChangeFromQFT:a.selectTableKeysChangeFromQFT,formQuery:a.formQuery,dbClick:a.dbClick,reloadData:a.reloadData},scopedSlots:a._u([{key:"tableActionBox",fn:function(t){return[i("a-button",{attrs:{type:"link",size:"small"},on:{click:function(e){return a.handleEdit(t.data.sid)}}},[a._v("修改")]),i("a-button",{attrs:{type:"link",size:"small"},on:{click:function(e){return a.handleDelete([t.data.sid])}}},[a._v("删除")])]}}])},[i("template",{staticClass:"btn-box",slot:"functionBtnBox"},[i("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"plus"},on:{click:a.handleAdd}},[a._v("新增")]),i("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"edit",disabled:1!==a.selectTableKeys.length},on:{click:function(e){return a.handleEdit(a.selectTableKeys[0])}}},[a._v("修改")]),i("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"delete",disabled:0===a.selectTableKeys.length},on:{click:function(e){return a.handleDelete(a.selectTableKeys)}}},[a._v("删除")]),i("a-button",{staticClass:"margin-btn",attrs:{type:"primary",disabled:1!==a.selectTableKeys.length,icon:"delete"},on:{click:function(e){return a.handleSortUp(a.selectTableKeys[0])}}},[a._v("上升")]),i("a-button",{staticClass:"margin-btn",attrs:{type:"primary",disabled:1!==a.selectTableKeys.length,icon:"delete"},on:{click:function(e){return a.handleSortDown(a.selectTableKeys[0])}}},[a._v("下降")]),i("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"delete"},on:{click:function(e){return a.handleOpenOriginalTableHead()}}},[a._v("原始表头编辑")])],1)],2),i("fieldDetail",{ref:"fieldDetail"}),i("originalTableHeadDefine",{ref:"originalTableHeadDefine"})],1)},n=[],s=a("5530"),l=(a("d3b7"),a("25f0"),a("c740"),a("77e3")),o=a("ae75"),r=a("79e9"),d=a("c515"),c=a("ed08"),u=a("f5ef"),m={data:function(){return{par:[{name:"sid",label:"编号",type:"input"},{name:"datasetSid",label:"数据集执行语句编号",type:"input"},{name:"sort",label:"序号",type:"input"},{name:"fieldNameEn",label:"字段英文名",type:"input"},{name:"fieldNameCn",label:"字段中文名",type:"input"},{name:"keyFlag",label:"主键标识符",type:"select",selectList:[{key:"0",value:"否"},{key:"1",value:"是"}]},{name:"isHidden",label:"是否隐藏",type:"select",selectList:[{key:"0",value:"否"},{key:"1",value:"是"}]},{name:"isQueryField",label:"是否查询字段",type:"select",selectList:[{key:"0",value:"否"},{key:"1",value:"是"}]},{name:"queryFieldType",label:"查询方式",type:"select",selectList:[{value:"=",key:"EQ"},{value:"!=",key:"NE"},{value:"＞",key:"GT"},{value:"＞=",key:"GTE"},{value:"＜",key:"LT"},{value:"＜=",key:"LTE"},{value:"like",key:"LIKE"},{value:"between",key:"BETWEEN"}]},{name:"fieldType",label:"字段类型",type:"select",selectList:[{key:"text",value:"文本"},{key:"number",value:"数值"},{key:"date",value:"日期"}]},{name:"fieldTypeFormat",label:"字段类型格式",type:"input"},{name:"isReadonly",label:"是否只读",type:"select",selectList:[{key:"0",value:"否"},{key:"1",value:"是"}]},{name:"listHidden",label:"列表不展现",type:"select",selectList:[{key:"0",value:"否"},{key:"1",value:"是"}]},{name:"isRequired",label:"是否必输",type:"select",selectList:[{key:"0",value:"否"},{key:"1",value:"是"}]},{name:"isEncryption",label:"是否加密",type:"select",selectList:[{key:"0",value:"否"},{key:"1",value:"是"}]},{name:"maxLength",label:"最长长度",type:"input"},{name:"minLength",label:"最小长度",type:"input"},{name:"inputFieldType",label:"输入框类型",type:"select",selectList:[{key:"input",value:"文本框"},{key:"date",value:"日期选择框（YYYYMMDD）"},{key:"datetime",value:"日期选择框（YYYYMMDD 24hi）"},{key:"select",value:"下拉框"},{key:"tree",value:"树形结构"}]},{name:"inputFieldDatasource",label:"输入框数据源",type:"input"},{name:"defaultFetchdataWay",label:"默认取值方式",type:"select",selectList:[{key:"0",value:"不启用"},{key:"1",value:"默认取值"},{key:"2",value:"函数取值"},{key:"3",value:"存过取值"}]},{name:"defaultVal",label:"默认值",type:"input"}],selectTableKeys:[],querySet:[{value:"=",key:"EQ"},{value:"!=",key:"NE"},{value:"＞",key:"GT"},{value:"＞=",key:"GTE"},{value:"＜",key:"LT"},{value:"＜=",key:"LTE"},{value:"like",key:"LIKE"},{value:"between",key:"BETWEEN"}],tableColumns:[{dataIndex:"sid",key:"sid",title:"编号"},{dataIndex:"datasetSid",key:"datasetSid",title:"数据集执行语句编号"},{dataIndex:"sort",key:"sort",title:"序号"},{dataIndex:"fieldNameEn",key:"fieldNameEn",title:"字段英文名"},{dataIndex:"fieldNameCn",key:"fieldNameCn",title:"字段中文名"},{dataIndex:"keyFlag",key:"keyFlag",title:"主键标识符 "},{dataIndex:"isHidden",key:"isHidden",title:"是否隐藏"},{dataIndex:"isQueryField",key:"isQueryField",title:"是否查询字段"},{dataIndex:"queryFieldType",key:"queryFieldType",title:"查询方式"},{dataIndex:"fieldType",key:"fieldType",title:"字段类型"},{dataIndex:"fieldTypeFormat",key:"fieldTypeFormat",title:"字段类型格式"},{dataIndex:"isReadonly",key:"isReadonly",title:"是否只读"},{dataIndex:"listHidden",key:"listHidden",title:"列表不展现"},{dataIndex:"isRequired",key:"isRequired",title:"是否必输"},{dataIndex:"isEncryption",key:"isEncryption",title:"是否加密"},{dataIndex:"maxLength",key:"maxLength",title:"最长长度"},{dataIndex:"minLength",key:"minLength",title:"最小长度"},{dataIndex:"inputFieldType",key:"inputFieldType",title:"输入框类型"},{dataIndex:"inputFieldDatasource",key:"inputFieldDatasource",title:"输入框数据源"},{dataIndex:"defaultFetchdataWay",key:"defaultFetchdataWay",title:"默认取值方式"},{dataIndex:"defaultVal",key:"defaultVal",title:"默认值"},{dataIndex:"remark",key:"remark",title:"备注"}],dataSetSid:"",loadingFlag:!1,tableData:{pageSize:10,pageNum:1,totalPages:1,totalSize:1,content:[]},isDataLoaded:!1,saveLoading:!1}},props:["datasetItem"],components:{fieldDetail:r["default"],originalTableHeadDefine:d["default"]},methods:{handleOpenOriginalTableHead:function(){this.$refs.originalTableHeadDefine.open(this.datasetItem)},handleSortDown:function(e){var t=this;Object(l["f"])(e).then(function(e){t.formQuery({})})},handleSortUp:function(e){var t=this;Object(l["g"])(e).then(function(e){t.formQuery({})})},handleAdd:function(){var e=this.datasetItem.sid;this.$refs.fieldDetail.open({mode:"insert",datasetSid:e})},handleEdit:function(e){this.$refs.fieldDetail.open({mode:"edit",sid:e})},handleDelete:function(t){this.$createElement;var e=this;this.$confirm({title:"删除字段确认",content:function(e){return e("div",["即将",e("span",{class:"textRed"},["以物理方式删除",t.length,"项"]),"字段信息，是否确认删除？"])},onOk:function(){e.deleteOperate(t),e.reloadData()},onCancel:function(){}})},deleteOperate:function(e){var t=this,a={countNum:e.length,id:e.toString()};Object(l["b"])(a).then(function(e){t.$message.success("删除操作".concat(e.msg))}).catch(function(e){t.$message.error("删除失败。".concat(e.message))})},dbClick:function(e){this.handleEdit(e.sid)},formQuery:function(e){var t=this.datasetSid;this.loadOriginalData({},Object(s["a"])(Object(s["a"])({},e),{},{datasetSid:t}))},selectTableKeysChangeFromQFT:function(e){this.selectTableKeys=e},init:function(){var e=this;this.$nextTick(function(){e.loadOriginalData({},{})})},onTabsChange:function(e){this.tableData.content=this.datas[e]},onSelectChange:function(e,t,a){var i=this.tableData.content.findIndex(function(e){return e.sid===a});this.tableData.content[i][t]=e},onCheckedChange:function(e,t){var a=this.tableData.content,i=a.findIndex(function(e){return e.sid===t.sid}),n="1"===this.tableData.content[i][e]?"0":"1";this.tableData.content[i][e]=n},convertColumnsInfo:function(e){var t=[];for(var a in e)t.push({dataIndex:e[a].columnName,key:e[a].columnName,title:e[a].columnComment});return t},reloadData:function(e){var t=this.datasetSid;if(void 0!==e&&"{}"!==JSON.stringify(e)){var a=e.pageNum,i=e.pageSize;this.tableData.pageNum=a,this.tableData.pageSize=i}this.loadOriginalData({},{datasetSid:t})},loadOriginalData:function(e,t){var s=this;"{}"===JSON.stringify(e)&&(e.pageNum=this.tableData.pageNum,e.pageSize=this.tableData.pageSize),t.datasetSid||(t.datasetSid=this.datasetItem.sid),this.loadingFlag=!0,Object(l["c"])(e.pageNum,e.pageSize,t).then(function(e){var t=s.tableData,a=t.pageNum,i=t.pageSize,n={content:e.rows,pageNum:a,pageSize:i,totalPages:Math.ceil(e.total/i),totalSize:e.total};s.tableData=n}).catch(function(e){s.$message.error("表格数据获取失败。".concat(e.message))}).finally(function(){s.loadingFlag=!1})},handleSave:function(){var t=this;this.addForm.columns=this.tableData.content,this.saveLoading=!0,updateInfo(this.addForm).then(function(e){if(!Object(c["l"])(e))throw new Error(e.msg);t.$message.success("成功"),t.$refs.crm.close()}).catch(function(e){t.$message.error(e.message)}).finally(function(){t.saveLoading=!1})},handleCancel:function(){this.$refs.crm.close()},handleExportOrgData:function(){var t=this;this.isExportBtnLoad=!0,Object(o["c"])(this.queryParam).then(function(e){if(e.data.msg)throw new Error(e.msg);convertToDownloadFile(e)}).catch(function(e){t.$message.warning(e.message)}).finally(function(){t.isExportBtnLoad=!1})},handleExportTemplate:function(){var t=this;this.isExportTplBtnLoad=!0,exportOrgTemplate(this.queryParam).then(function(e){if(e.data.msg)throw new Error(e.msg);convertToDownloadFile(e)}).catch(function(e){t.$message.warning(e.message)}).finally(function(){t.isExportTplBtnLoad=!1})}},mounted:function(){var e=this;u["a"].$on("reloadData",function(){e.reloadData({})})}},p=m,f=(a("07ca"),a("2877")),h=Object(f["a"])(p,i,n,!1,null,"34191424",null);t["default"]=h.exports},2655:function(e,t,a){"use strict";a.r(t);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"55%",title:("insert"==t.mode?"新增":"编辑")+"归档字段信息"}},[a("a-spin",{attrs:{spinning:t.spin}},[a("a-form-model",{ref:"addForm",attrs:{model:t.addForm,labelCol:{span:6},wrapperCol:{span:18},rules:t.addFormRule}},[a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"数据集执行语句编号",prop:"datasetSid"}},[a("a-input",{attrs:{disabled:""},model:{value:t.addForm.datasetSid,callback:function(e){t.$set(t.addForm,"datasetSid",e)},expression:"addForm.datasetSid"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"排序",prop:"sort"}},[a("a-input-number",{staticStyle:{width:"100%"},model:{value:t.addForm.sort,callback:function(e){t.$set(t.addForm,"sort",e)},expression:"addForm.sort"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"字段英文名",prop:"fieldNameEn"}},[a("a-input",{model:{value:t.addForm.fieldNameEn,callback:function(e){t.$set(t.addForm,"fieldNameEn",e)},expression:"addForm.fieldNameEn"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"字段中文名",prop:"fieldNameCn"}},[a("a-input",{model:{value:t.addForm.fieldNameCn,callback:function(e){t.$set(t.addForm,"fieldNameCn",e)},expression:"addForm.fieldNameCn"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"主键标识符",prop:"keyFlag"}},[a("a-radio-group",{attrs:{name:"radioGroup"},model:{value:t.addForm.keyFlag,callback:function(e){t.$set(t.addForm,"keyFlag",e)},expression:"addForm.keyFlag"}},[a("a-radio",{attrs:{value:"0"}},[t._v(" 否 ")]),a("a-radio",{attrs:{value:"1"}},[t._v(" 是 ")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"是否隐藏",prop:"isHidden"}},[a("a-radio-group",{attrs:{name:"radioGroup"},model:{value:t.addForm.isHidden,callback:function(e){t.$set(t.addForm,"isHidden",e)},expression:"addForm.isHidden"}},[a("a-radio",{attrs:{value:"0"}},[t._v(" 否 ")]),a("a-radio",{attrs:{value:"1"}},[t._v(" 是 ")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"是否查询字段",prop:"isQueryField"}},[a("a-radio-group",{attrs:{name:"radioGroup"},model:{value:t.addForm.isQueryField,callback:function(e){t.$set(t.addForm,"isQueryField",e)},expression:"addForm.isQueryField"}},[a("a-radio",{attrs:{value:"0"}},[t._v(" 否 ")]),a("a-radio",{attrs:{value:"1"}},[t._v(" 是 ")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"查询方式",prop:"queryFieldType"}},[a("a-select",{staticStyle:{width:"100%"},model:{value:t.addForm.queryFieldType,callback:function(e){t.$set(t.addForm,"queryFieldType",e)},expression:"addForm.queryFieldType"}},[a("a-select-option",{attrs:{value:"EQ"}},[t._v(" 等于 ")]),a("a-select-option",{attrs:{value:"NE"}},[t._v(" 不等于 ")]),a("a-select-option",{attrs:{value:"GT"}},[t._v("大于 ")]),a("a-select-option",{attrs:{value:"GTE"}},[t._v("大于等于 ")]),a("a-select-option",{attrs:{value:"LT"}},[t._v("小于")]),a("a-select-option",{attrs:{value:"LTE"}},[t._v("小于等于")]),a("a-select-option",{attrs:{value:"LIKE"}},[t._v("模糊查询")]),a("a-select-option",{attrs:{value:"BETWEEN"}},[t._v("区间查询")]),a("a-select-option",{attrs:{value:"MACROVARIABLES"}},[t._v("宏变量查询")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"字段类型",prop:"fieldType"}},[a("a-select",{staticStyle:{width:"100%"},model:{value:t.addForm.fieldType,callback:function(e){t.$set(t.addForm,"fieldType",e)},expression:"addForm.fieldType"}},[a("a-select-option",{attrs:{value:"text"}},[t._v(" 文本 ")]),a("a-select-option",{attrs:{value:"number"}},[t._v(" 数值 ")]),a("a-select-option",{attrs:{value:"date"}},[t._v("日期 ")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"字段类型格式",prop:"fieldTypeFormat"}},[a("a-input",{model:{value:t.addForm.fieldTypeFormat,callback:function(e){t.$set(t.addForm,"fieldTypeFormat",e)},expression:"addForm.fieldTypeFormat"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"是否只读",prop:"isReadonly"}},[a("a-radio-group",{attrs:{name:"radioGroup"},model:{value:t.addForm.isReadonly,callback:function(e){t.$set(t.addForm,"isReadonly",e)},expression:"addForm.isReadonly"}},[a("a-radio",{attrs:{value:"0"}},[t._v(" 否 ")]),a("a-radio",{attrs:{value:"1"}},[t._v(" 是 ")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"列表不展现",prop:"listHidden"}},[a("a-radio-group",{attrs:{name:"radioGroup"},model:{value:t.addForm.listHidden,callback:function(e){t.$set(t.addForm,"listHidden",e)},expression:"addForm.listHidden"}},[a("a-radio",{attrs:{value:"0"}},[t._v(" 否 ")]),a("a-radio",{attrs:{value:"1"}},[t._v(" 是 ")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"是否必填",prop:"isRequired"}},[a("a-radio-group",{attrs:{name:"radioGroup"},model:{value:t.addForm.isRequired,callback:function(e){t.$set(t.addForm,"isRequired",e)},expression:"addForm.isRequired"}},[a("a-radio",{attrs:{value:"0"}},[t._v(" 否 ")]),a("a-radio",{attrs:{value:"1"}},[t._v(" 是 ")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"是否加密",prop:"isEncryption"}},[a("a-radio-group",{attrs:{name:"radioGroup"},model:{value:t.addForm.isEncryption,callback:function(e){t.$set(t.addForm,"isEncryption",e)},expression:"addForm.isEncryption"}},[a("a-radio",{attrs:{value:"0"}},[t._v(" 否 ")]),a("a-radio",{attrs:{value:"1"}},[t._v(" 是 ")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"最长长度",prop:"maxLength"}},[a("a-input-number",{staticStyle:{width:"100%"},model:{value:t.addForm.maxLength,callback:function(e){t.$set(t.addForm,"maxLength",e)},expression:"addForm.maxLength"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"最小长度",prop:"minLength"}},[a("a-input-number",{staticStyle:{width:"100%"},model:{value:t.addForm.minLength,callback:function(e){t.$set(t.addForm,"minLength",e)},expression:"addForm.minLength"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"输入框类型",prop:"inputFieldType"}},[a("a-select",{staticStyle:{width:"100%"},model:{value:t.addForm.inputFieldType,callback:function(e){t.$set(t.addForm,"inputFieldType",e)},expression:"addForm.inputFieldType"}},[a("a-select-option",{attrs:{value:"input"}},[t._v(" 文本框 ")]),a("a-select-option",{attrs:{value:"date"}},[t._v(" 日期选择框 ")]),a("a-select-option",{attrs:{value:"select"}},[t._v("下拉框 ")]),a("a-select-option",{attrs:{value:"tree"}},[t._v("树形结构")]),a("a-select-option",{attrs:{value:"datetimeRange"}},[t._v("时间区间选择")])],1)],1)],1),"date"===t.addForm.inputFieldType?a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"日期格式",prop:"inputFieldFormat"}},[a("a-input",{attrs:{placeholder:"输入日期的显示格式，如：YYYY-MM-DD"},model:{value:t.addForm.inputFieldFormat,callback:function(e){t.$set(t.addForm,"inputFieldFormat",e)},expression:"addForm.inputFieldFormat"}})],1)],1):t._e(),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"输入框数据源",prop:"inputFieldDatasource"}},[a("c-more-func-list-select",{staticStyle:{width:"100%"},attrs:{placeholder:"单击选择输入框数据源或输入关键字搜索...",valueModel:t.addForm.inputFieldDatasource,listData:t.dataSource,showKey:!1},on:{valueChange:t.dataSourceSelectValueChange,research:t.dataSourceListSelectResearch}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"默认取值方式",prop:"defaultFetchdataWay"}},[a("a-select",{staticStyle:{width:"100%"},model:{value:t.addForm.defaultFetchdataWay,callback:function(e){t.$set(t.addForm,"defaultFetchdataWay",e)},expression:"addForm.defaultFetchdataWay"}},[a("a-select-option",{attrs:{value:"0"}},[t._v(" 不启用 ")]),a("a-select-option",{attrs:{value:"1"}},[t._v(" 默认取值 ")]),a("a-select-option",{attrs:{value:"2"}},[t._v(" 宏变量取值 ")]),a("a-select-option",{attrs:{value:"3"}},[t._v(" 函数取值 ")]),a("a-select-option",{attrs:{value:"4"}},[t._v("存储过程取值 ")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"默认值",prop:"defaultVal"}},[a("a-input",{model:{value:t.addForm.defaultVal,callback:function(e){t.$set(t.addForm,"defaultVal",e)},expression:"addForm.defaultVal"}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"备注",prop:"note",labelCol:{span:3},wrapperCol:{span:21}}},[a("a-input",{attrs:{type:"textarea"},model:{value:t.addForm.remark,callback:function(e){t.$set(t.addForm,"remark",e)},expression:"addForm.remark"}})],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:t.handleCancel}},[t._v("取 消")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:t.saveLoading},on:{click:t.handleSave}},[t._v("保存")])],1)],1)],1)},n=[],s=(a("b0c0"),a("d3b7"),a("f5ef")),l=a("3124"),o=a("ed08"),r={data:function(){return{mode:"read",spin:!1,isModalVisible:!1,saveLoading:!1,treeData:[],dataSource:{pageSize:10,pageNum:1,totalPages:1,totalSize:1,content:[]},addForm:{},addFormRule:{orgCode:[{required:!0,message:"机构编号不允许为空",trigger:"blur"}],orgName:[{required:!0,message:"机构名称不允许为空",trigger:"blur"}],orgLevel:[{required:!0,message:"必须选择一个机构级别",trigger:"blur"}],orgType:[{required:!0,message:"必须选择一个机构类型",trigger:"blur"}],status:[{required:!0,message:"必须给定一个状态",trigger:"blur"}],beginDate:[{required:!0,message:"必须填写日期",trigger:"blur"}],inputFieldFormat:[{require:!1,validator:o["m"],trigger:"change"}],endDate:[{required:!0,message:"必须填写日期",trigger:"blur"}]},leaderList:[]}},methods:{dataSourceSelectValueChange:function(e){this.addForm.inputFieldDatasource=e,this.$forceUpdate()},dataSourceListSelectResearch:function(e,t){t&&t.name&&(t.inputName=t.name,delete t.name),this.loadDataSource(e,t)},loadDataSource:function(e,t){var a=this;"{}"===JSON.stringify(e)&&(e.pageNum=1,e.pageSize=5),Object(l["e"])(e.pageNum,e.pageSize,t).then(function(e){var t={total:e.total,data:Object(o["b"])(e.rows,["inputName"],"sid")};a.dataSource=t})},getDefaultValue:function(){return{sid:"",datasetSid:"",sort:"",fieldNameEn:"",fieldNameCn:"",keyFlag:"0",isHidden:"0",isQueryField:"0",queryFieldType:"EQ",fieldType:"1",fieldTypeFormat:"",isReadonly:"0",listHidden:"0",isRequired:"0",isEncryption:"0",maxLength:"",minLength:"0",inputFieldType:"1",inputFieldDatasource:"",defaultFetchdataWay:"0",defaultVal:"",remark:""}},open:function(e){this.addForm=this.getDefaultValue(),this.mode=e.mode,this.$refs.crm.open(),this.loadDataSource({},{}),"edit"==this.mode?(this.spin=!0,this.getDataBySid(e.sid)):this.addForm.datasetSid=e.datasetSid},getDataBySid:function(e){var t=this;Object(l["d"])(e).then(function(e){t.addForm=e.data}).finally(function(){t.spin=!1})},handleSave:function(){var t=this;this.$refs.addForm.validate(function(e){e&&(t.saveLoading=!0,"insert"==t.mode?t.createOrg():t.editOrg())})},editOrg:function(){var t=this;Object(l["h"])(this.addForm).then(function(e){if(!Object(o["l"])(e))throw new Error(e.msg);t.$message.success("数据已更新")}).catch(function(e){t.$message.error("请求异常："+e.message)}).finally(function(){t.saveLoading=!1,s["a"].$emit("reloadData"),t.$refs.crm.close()})},createOrg:function(){var t=this;Object(l["a"])(this.addForm).then(function(e){t.$message.success("归档字段新增操作结果：".concat(e.msg)),s["a"].$emit("reloadData"),t.$refs.crm.close()}).catch(function(e){t.$message.error("归档字段新增操作失败。".concat(e.message))}).finally(function(){t.saveLoading=!1})},handleCancel:function(){var e=this;e.$refs.crm.close()}}},d=r,c=a("2877"),u=Object(c["a"])(d,i,n,!1,null,null,null);t["default"]=u.exports},4105:function(e,t,a){"use strict";a("ffed")},"468c":function(e,t,a){},4695:function(e,t,a){"use strict";a("468c")},4931:function(e,t,a){"use strict";a("8c7f")},5979:function(e,t,a){"use strict";a("d142")},"5b00":function(e,t,a){},"79e9":function(e,t,a){"use strict";a.r(t);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"55%",title:("insert"==t.mode?"新增":"编辑")+"原始字段信息"}},[a("a-spin",{attrs:{spinning:t.spin}},[a("a-form-model",{ref:"addForm",attrs:{model:t.addForm,labelCol:{span:6},wrapperCol:{span:18},rules:t.addFormRule}},[a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"数据集执行语句编号",prop:"datasetSid"}},[a("a-input",{attrs:{disabled:""},model:{value:t.addForm.datasetSid,callback:function(e){t.$set(t.addForm,"datasetSid",e)},expression:"addForm.datasetSid"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"排序",prop:"sort"}},[a("a-input-number",{staticStyle:{width:"100%"},model:{value:t.addForm.sort,callback:function(e){t.$set(t.addForm,"sort",e)},expression:"addForm.sort"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"字段英文名",prop:"fieldNameEn"}},[a("a-input",{model:{value:t.addForm.fieldNameEn,callback:function(e){t.$set(t.addForm,"fieldNameEn",e)},expression:"addForm.fieldNameEn"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"字段中文名",prop:"fieldNameCn"}},[a("a-input",{model:{value:t.addForm.fieldNameCn,callback:function(e){t.$set(t.addForm,"fieldNameCn",e)},expression:"addForm.fieldNameCn"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"主键标识符",prop:"keyFlag"}},[a("a-radio-group",{attrs:{name:"radioGroup"},model:{value:t.addForm.keyFlag,callback:function(e){t.$set(t.addForm,"keyFlag",e)},expression:"addForm.keyFlag"}},[a("a-radio",{attrs:{value:"0"}},[t._v(" 否 ")]),a("a-radio",{attrs:{value:"1"}},[t._v(" 是 ")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"是否隐藏",prop:"isHidden"}},[a("a-radio-group",{attrs:{name:"radioGroup"},model:{value:t.addForm.isHidden,callback:function(e){t.$set(t.addForm,"isHidden",e)},expression:"addForm.isHidden"}},[a("a-radio",{attrs:{value:"0"}},[t._v(" 否 ")]),a("a-radio",{attrs:{value:"1"}},[t._v(" 是 ")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"是否查询字段",prop:"isQueryField"}},[a("a-radio-group",{attrs:{name:"radioGroup"},model:{value:t.addForm.isQueryField,callback:function(e){t.$set(t.addForm,"isQueryField",e)},expression:"addForm.isQueryField"}},[a("a-radio",{attrs:{value:"0"}},[t._v(" 否 ")]),a("a-radio",{attrs:{value:"1"}},[t._v(" 是 ")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"查询方式",prop:"queryFieldType"}},[a("a-select",{staticStyle:{width:"100%"},model:{value:t.addForm.queryFieldType,callback:function(e){t.$set(t.addForm,"queryFieldType",e)},expression:"addForm.queryFieldType"}},[a("a-select-option",{attrs:{value:"EQ"}},[t._v(" 等于 ")]),a("a-select-option",{attrs:{value:"NE"}},[t._v(" 不等于 ")]),a("a-select-option",{attrs:{value:"GT"}},[t._v("大于 ")]),a("a-select-option",{attrs:{value:"GTE"}},[t._v("大于等于 ")]),a("a-select-option",{attrs:{value:"LT"}},[t._v("小于")]),a("a-select-option",{attrs:{value:"LTE"}},[t._v("小于等于")]),a("a-select-option",{attrs:{value:"LIKE"}},[t._v("模糊查询")]),a("a-select-option",{attrs:{value:"BETWEEN"}},[t._v("区间查询")]),a("a-select-option",{attrs:{value:"MACROVARIABLES"}},[t._v("宏变量查询")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"字段类型",prop:"fieldType"}},[a("a-select",{staticStyle:{width:"100%"},model:{value:t.addForm.fieldType,callback:function(e){t.$set(t.addForm,"fieldType",e)},expression:"addForm.fieldType"}},[a("a-select-option",{attrs:{value:"text"}},[t._v(" 文本 ")]),a("a-select-option",{attrs:{value:"number"}},[t._v(" 数值 ")]),a("a-select-option",{attrs:{value:"date"}},[t._v("日期 ")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"字段类型格式",prop:"fieldTypeFormat"}},[a("a-input",{model:{value:t.addForm.fieldTypeFormat,callback:function(e){t.$set(t.addForm,"fieldTypeFormat",e)},expression:"addForm.fieldTypeFormat"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"是否只读",prop:"isReadonly"}},[a("a-radio-group",{attrs:{name:"radioGroup"},model:{value:t.addForm.isReadonly,callback:function(e){t.$set(t.addForm,"isReadonly",e)},expression:"addForm.isReadonly"}},[a("a-radio",{attrs:{value:"0"}},[t._v(" 否 ")]),a("a-radio",{attrs:{value:"1"}},[t._v(" 是 ")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"列表不展现",prop:"listHidden"}},[a("a-radio-group",{attrs:{name:"radioGroup"},model:{value:t.addForm.listHidden,callback:function(e){t.$set(t.addForm,"listHidden",e)},expression:"addForm.listHidden"}},[a("a-radio",{attrs:{value:"0"}},[t._v(" 否 ")]),a("a-radio",{attrs:{value:"1"}},[t._v(" 是 ")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"是否必填",prop:"isRequired"}},[a("a-radio-group",{attrs:{name:"radioGroup"},model:{value:t.addForm.isRequired,callback:function(e){t.$set(t.addForm,"isRequired",e)},expression:"addForm.isRequired"}},[a("a-radio",{attrs:{value:"0"}},[t._v(" 否 ")]),a("a-radio",{attrs:{value:"1"}},[t._v(" 是 ")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"是否加密",prop:"isEncryption"}},[a("a-radio-group",{attrs:{name:"radioGroup"},model:{value:t.addForm.isEncryption,callback:function(e){t.$set(t.addForm,"isEncryption",e)},expression:"addForm.isEncryption"}},[a("a-radio",{attrs:{value:"0"}},[t._v(" 否 ")]),a("a-radio",{attrs:{value:"1"}},[t._v(" 是 ")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"最长长度",prop:"maxLength"}},[a("a-input-number",{staticStyle:{width:"100%"},model:{value:t.addForm.maxLength,callback:function(e){t.$set(t.addForm,"maxLength",e)},expression:"addForm.maxLength"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"最小长度",prop:"minLength"}},[a("a-input-number",{staticStyle:{width:"100%"},model:{value:t.addForm.minLength,callback:function(e){t.$set(t.addForm,"minLength",e)},expression:"addForm.minLength"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"输入框类型",prop:"inputFieldType"}},[a("a-select",{staticStyle:{width:"100%"},model:{value:t.addForm.inputFieldType,callback:function(e){t.$set(t.addForm,"inputFieldType",e)},expression:"addForm.inputFieldType"}},[a("a-select-option",{attrs:{value:"input"}},[t._v(" 文本框 ")]),a("a-select-option",{attrs:{value:"date"}},[t._v(" 日期选择框 ")]),a("a-select-option",{attrs:{value:"select"}},[t._v("下拉框 ")]),a("a-select-option",{attrs:{value:"tree"}},[t._v("树形结构")]),a("a-select-option",{attrs:{value:"datetimeRange"}},[t._v("时间区间选择")])],1)],1)],1),"date"===t.addForm.inputFieldType?a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"日期格式",prop:"inputFieldFormat"}},[a("a-input",{attrs:{placeholder:"输入日期的显示格式，如：YYYY-MM-DD"},model:{value:t.addForm.inputFieldFormat,callback:function(e){t.$set(t.addForm,"inputFieldFormat",e)},expression:"addForm.inputFieldFormat"}})],1)],1):t._e(),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"输入框数据源",prop:"inputFieldDatasource"}},[a("c-more-func-list-select",{staticStyle:{width:"100%"},attrs:{placeholder:"单击选择输入框数据源或输入关键字搜索...",valueModel:t.addForm.inputFieldDatasource,listData:t.dataSource,showKey:!1},on:{valueChange:t.dataSourceSelectValueChange,research:t.dataSourceListSelectResearch}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"默认取值方式",prop:"defaultFetchdataWay"}},[a("a-select",{staticStyle:{width:"100%"},model:{value:t.addForm.defaultFetchdataWay,callback:function(e){t.$set(t.addForm,"defaultFetchdataWay",e)},expression:"addForm.defaultFetchdataWay"}},[a("a-select-option",{attrs:{value:"0"}},[t._v(" 不启用 ")]),a("a-select-option",{attrs:{value:"1"}},[t._v(" 默认取值 ")]),a("a-select-option",{attrs:{value:"2"}},[t._v(" 宏变量取值 ")]),a("a-select-option",{attrs:{value:"3"}},[t._v(" 函数取值 ")]),a("a-select-option",{attrs:{value:"4"}},[t._v("存储过程取值 ")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"默认值",prop:"defaultVal"}},[a("a-input",{model:{value:t.addForm.defaultVal,callback:function(e){t.$set(t.addForm,"defaultVal",e)},expression:"addForm.defaultVal"}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"备注",prop:"note",labelCol:{span:3},wrapperCol:{span:21}}},[a("a-input",{attrs:{type:"textarea"},model:{value:t.addForm.remark,callback:function(e){t.$set(t.addForm,"remark",e)},expression:"addForm.remark"}})],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:t.handleCancel}},[t._v("取 消")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:t.saveLoading},on:{click:t.handleSave}},[t._v("保A存")])],1)],1)],1)},n=[],s=(a("b0c0"),a("d3b7"),a("f5ef")),l=a("77e3"),o=a("ed08"),r={data:function(){return{mode:"read",spin:!1,isModalVisible:!1,saveLoading:!1,treeData:[],dataSource:{pageSize:10,pageNum:1,totalPages:1,totalSize:1,content:[]},addForm:{},addFormRule:{orgCode:[{required:!0,message:"机构编号不允许为空",trigger:"blur"}],orgName:[{required:!0,message:"机构名称不允许为空",trigger:"blur"}],orgLevel:[{required:!0,message:"必须选择一个机构级别",trigger:"blur"}],orgType:[{required:!0,message:"必须选择一个机构类型",trigger:"blur"}],status:[{required:!0,message:"必须给定一个状态",trigger:"blur"}],beginDate:[{required:!0,message:"必须填写日期",trigger:"blur"}],inputFieldFormat:[{require:!1,validator:o["m"],trigger:"change"}],endDate:[{required:!0,message:"必须填写日期",trigger:"blur"}]},leaderList:[]}},methods:{dataSourceSelectValueChange:function(e){this.addForm.inputFieldDatasource=e,this.$forceUpdate()},dataSourceListSelectResearch:function(e,t){t&&t.name&&(t.inputName=t.name,delete t.name),this.loadDataSource(e,t)},loadDataSource:function(e,t){var a=this;"{}"===JSON.stringify(e)&&(e.pageNum=1,e.pageSize=5),Object(l["e"])(e.pageNum,e.pageSize,t).then(function(e){var t={total:e.total,data:Object(o["b"])(e.rows,["inputName"],"sid")};a.dataSource=t})},getDefaultValue:function(){return{sid:"",datasetSid:"",sort:"",fieldNameEn:"",fieldNameCn:"",keyFlag:"0",isHidden:"0",isQueryField:"0",queryFieldType:"EQ",fieldType:"1",fieldTypeFormat:"",isReadonly:"0",listHidden:"0",isRequired:"0",isEncryption:"0",maxLength:"",minLength:"0",inputFieldType:"1",inputFieldDatasource:"",defaultFetchdataWay:"0",defaultVal:"",remark:""}},open:function(e){this.addForm=this.getDefaultValue(),this.mode=e.mode,this.$refs.crm.open(),this.loadDataSource({},{}),"edit"==this.mode?(this.spin=!0,this.getDataBySid(e.sid)):this.addForm.datasetSid=e.datasetSid},getDataBySid:function(e){var t=this;Object(l["d"])(e).then(function(e){t.addForm=e.data}).finally(function(){t.spin=!1})},handleSave:function(){var t=this;this.$refs.addForm.validate(function(e){e&&(t.saveLoading=!0,"insert"==t.mode?t.createOrg():t.editOrg())})},editOrg:function(){var t=this;Object(l["h"])(this.addForm).then(function(e){if(!Object(o["l"])(e))throw new Error(e.msg);t.$message.success("数据已更新")}).catch(function(e){t.$message.error("请求异常："+e.message)}).finally(function(){t.saveLoading=!1,s["a"].$emit("reloadData"),t.$refs.crm.close()})},createOrg:function(){var t=this;Object(l["a"])(this.addForm).then(function(e){t.$message.success("原始字段新增操作结果：".concat(e.msg)),s["a"].$emit("reloadData"),t.$refs.crm.close()}).catch(function(e){t.$message.error("原始字段新增操作失败。".concat(e.message))}).finally(function(){t.saveLoading=!1})},handleCancel:function(){var e=this;e.$refs.crm.close()}}},d=r,c=a("2877"),u=Object(c["a"])(d,i,n,!1,null,null,null);t["default"]=u.exports},"79f3":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"menuAccr"}},[a("c-resizable-modal",{ref:"crm",attrs:{title:"查阅 “ "+e.pInfos.names+" ” 数据集子节点"}},[a("a-spin",{attrs:{tip:"正在请求数据...",spinning:e.spinning}},[a("c-check-tree",{attrs:{propTreeData:e.treeData,checkable:!1,checkedKeys:e.checkedKeys},on:{changeCheckedKeys:e.changeCheckedKeys}})],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:e.handleCancel}},[e._v("取 消")]),e.treeData.length>0?a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:e.saveLoading},on:{click:e.handleSave}},[e._v("更 新")]):e._e()],1)],1)],1)},n=[],s=(a("d3b7"),a("25f0"),a("c41f")),l=a("ed08"),o={data:function(){return{saveLoading:!1,pInfos:{},spinning:!0,treeData:[],checkedKeys:[]}},methods:{reset:function(){this.leftSourceData=[],this.rightTargetKeys=[],this.saveLoading=!1,this.checkedKeys=[],this.treeData=[]},open:function(e){this.pInfos.sids=e.itemsSid,this.pInfos.names=e.itemsName,this.reset(),this.loadTreeData(),this.spinning=!0,this.$refs.crm.open()},loadTreeData:function(){var t=this,e=this.pInfos.sids;Object(s["e"])(e).then(function(e){if(!Object(l["l"])(e))throw new Error(e.msg);t.treeData=e.data,t.checkedKeys=t.checkKeys(t.treeData)}).catch(function(e){t.$message.error(e.message)}).finally(function(){t.spinning=!1})},checkKeys:function(e){var t=[],a=[];for(var i in e){var n=e[i];"0"===n.isChecked&&(t.push(n.key),a.push(n.title)),n.children&&n.children.length>0&&t.push.apply(t,this.checkKeys(n.children))}return t},handleSave:function(){var t=this;this.saveLoading=!0;var a=this,e={reportSid:this.pInfos.sids.toString(),versionSid:this.checkedKeys.toString(),isRelation:"0"};updateVersionByReportSid(e).then(function(e){if(!l["l"])throw new Error(e.msg);t.$message.success("报表与模块版本关系授权已更新"),a.$refs.crm.close()}).catch(function(e){t.$message.error("错误："+e.message)}).finally(function(){t.saveLoading=!1})},changeCheckedKeys:function(e){this.checkedKeys=e},handleCancel:function(){var e=this;e.$refs.crm.close()}}},r=o,d=a("2877"),c=Object(d["a"])(r,i,n,!1,null,"46bec266",null);t["default"]=c.exports},"7e02":function(e,t,a){"use strict";a.r(t);var i=function(){var a=this,e=a.$createElement,i=a._self._c||e;return i("div",[i("c-query-form-table",{attrs:{searchParams:a.par,tableData:a.tableData,tableColumns:a.tableColumns,needTableCheckList:!0,selectTableKeys:a.selectTableKeys,loadingFlag:a.loadingFlag},on:{selectTableKeysChangeFromQFT:a.selectTableKeysChangeFromQFT,formQuery:a.formQuery,dbClick:a.dbClick,reloadData:a.reloadData},scopedSlots:a._u([{key:"tableActionBox",fn:function(t){return[i("a-button",{attrs:{type:"link",size:"small"},on:{click:function(e){return a.handleEdit(t.data.sid)}}},[a._v("修改")]),i("a-button",{attrs:{type:"link",size:"small"},on:{click:function(e){return a.handleDelete([t.data.sid])}}},[a._v("删除")])]}}])},[i("template",{staticClass:"btn-box",slot:"functionBtnBox"},[i("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"plus"},on:{click:a.handleAdd}},[a._v("新增")]),i("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"edit",disabled:1!==a.selectTableKeys.length},on:{click:function(e){return a.handleEdit(a.selectTableKeys[0])}}},[a._v("修改")]),i("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"delete",disabled:0===a.selectTableKeys.length},on:{click:function(e){return a.handleDelete(a.selectTableKeys)}}},[a._v("删除")]),i("a-button",{staticClass:"margin-btn",attrs:{type:"primary",disabled:1!==a.selectTableKeys.length,icon:"delete"},on:{click:function(e){return a.handleSortUp(a.selectTableKeys[0])}}},[a._v("上升")]),i("a-button",{staticClass:"margin-btn",attrs:{type:"primary",disabled:1!==a.selectTableKeys.length,icon:"delete"},on:{click:function(e){return a.handleSortDown(a.selectTableKeys[0])}}},[a._v("下降")]),i("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"delete"},on:{click:function(e){return a.handleOpenOriginalTableHead()}}},[a._v("归档表头编辑")])],1)],2),i("fieldDetail",{ref:"fieldDetail"}),i("originalTableHeadDefine",{ref:"originalTableHeadDefine"})],1)},n=[],s=a("5530"),l=(a("d3b7"),a("25f0"),a("3124")),o=a("2655"),r=a("98d7"),d=a("ed08"),c=a("f5ef"),u={data:function(){return{par:[{name:"sid",label:"编号",type:"input"},{name:"datasetSid",label:"数据集执行语句编号",type:"input"},{name:"sort",label:"序号",type:"input"},{name:"fieldNameEn",label:"字段英文名",type:"input"},{name:"fieldNameCn",label:"字段中文名",type:"input"},{name:"keyFlag",label:"主键标识符",type:"select",selectList:[{key:"0",value:"否"},{key:"1",value:"是"}]},{name:"isHidden",label:"是否隐藏",type:"select",selectList:[{key:"0",value:"否"},{key:"1",value:"是"}]},{name:"isQueryField",label:"是否查询字段",type:"select",selectList:[{key:"0",value:"否"},{key:"1",value:"是"}]},{name:"queryFieldType",label:"查询方式",type:"select",selectList:[{value:"=",key:"EQ"},{value:"!=",key:"NE"},{value:"＞",key:"GT"},{value:"＞=",key:"GTE"},{value:"＜",key:"LT"},{value:"＜=",key:"LTE"},{value:"like",key:"LIKE"},{value:"between",key:"BETWEEN"}]},{name:"fieldType",label:"字段类型",type:"select",selectList:[{key:"text",value:"文本"},{key:"number",value:"数值"},{key:"date",value:"日期"}]},{name:"fieldTypeFormat",label:"字段类型格式",type:"input"},{name:"isReadonly",label:"是否只读",type:"select",selectList:[{key:"0",value:"否"},{key:"1",value:"是"}]},{name:"listHidden",label:"列表不展现",type:"select",selectList:[{key:"0",value:"否"},{key:"1",value:"是"}]},{name:"isRequired",label:"是否必输",type:"select",selectList:[{key:"0",value:"否"},{key:"1",value:"是"}]},{name:"isEncryption",label:"是否加密",type:"select",selectList:[{key:"0",value:"否"},{key:"1",value:"是"}]},{name:"maxLength",label:"最长长度",type:"input"},{name:"minLength",label:"最小长度",type:"input"},{name:"inputFieldType",label:"输入框类型",type:"select",selectList:[{key:"input",value:"文本框"},{key:"date",value:"日期选择框（YYYYMMDD）"},{key:"datetime",value:"日期选择框（YYYYMMDD 24hi）"},{key:"select",value:"下拉框"},{key:"tree",value:"树形结构"}]},{name:"inputFieldDatasource",label:"输入框数据源",type:"input"},{name:"defaultFetchdataWay",label:"默认取值方式",type:"select",selectList:[{key:"0",value:"不启用"},{key:"1",value:"默认取值"},{key:"2",value:"函数取值"},{key:"3",value:"存过取值"}]},{name:"defaultVal",label:"默认值",type:"input"}],selectTableKeys:[],querySet:[{value:"=",key:"EQ"},{value:"!=",key:"NE"},{value:"＞",key:"GT"},{value:"＞=",key:"GTE"},{value:"＜",key:"LT"},{value:"＜=",key:"LTE"},{value:"like",key:"LIKE"},{value:"between",key:"BETWEEN"}],tableColumns:[{dataIndex:"sid",key:"sid",title:"编号"},{dataIndex:"datasetSid",key:"datasetSid",title:"数据集执行语句编号"},{dataIndex:"sort",key:"sort",title:"序号"},{dataIndex:"fieldNameEn",key:"fieldNameEn",title:"字段英文名"},{dataIndex:"fieldNameCn",key:"fieldNameCn",title:"字段中文名"},{dataIndex:"keyFlag",key:"keyFlag",title:"主键标识符 "},{dataIndex:"isHidden",key:"isHidden",title:"是否隐藏"},{dataIndex:"isQueryField",key:"isQueryField",title:"是否查询字段"},{dataIndex:"queryFieldType",key:"queryFieldType",title:"查询方式"},{dataIndex:"fieldType",key:"fieldType",title:"字段类型"},{dataIndex:"fieldTypeFormat",key:"fieldTypeFormat",title:"字段类型格式"},{dataIndex:"isReadonly",key:"isReadonly",title:"是否只读"},{dataIndex:"listHidden",key:"listHidden",title:"列表不展现"},{dataIndex:"isRequired",key:"isRequired",title:"是否必输"},{dataIndex:"isEncryption",key:"isEncryption",title:"是否加密"},{dataIndex:"maxLength",key:"maxLength",title:"最长长度"},{dataIndex:"minLength",key:"minLength",title:"最小长度"},{dataIndex:"inputFieldType",key:"inputFieldType",title:"输入框类型"},{dataIndex:"inputFieldDatasource",key:"inputFieldDatasource",title:"输入框数据源"},{dataIndex:"defaultFetchdataWay",key:"defaultFetchdataWay",title:"默认取值方式"},{dataIndex:"defaultVal",key:"defaultVal",title:"默认值"},{dataIndex:"remark",key:"remark",title:"备注"}],dataSetSid:"",loadingFlag:!1,tableData:{pageSize:10,pageNum:1,totalPages:1,totalSize:1,content:[]},isDataLoaded:!1,saveLoading:!1}},props:["datasetItem"],components:{fieldDetail:o["default"],originalTableHeadDefine:r["default"]},methods:{handleOpenOriginalTableHead:function(){this.$refs.originalTableHeadDefine.open(this.datasetItem)},handleSortDown:function(e){var t=this;Object(l["f"])(e).then(function(){t.formQuery({})})},handleSortUp:function(e){var t=this;Object(l["g"])(e).then(function(){t.formQuery({})})},handleAdd:function(){var e=this.datasetItem.sid;this.$refs.fieldDetail.open({mode:"insert",datasetSid:e})},handleEdit:function(e){this.$refs.fieldDetail.open({mode:"edit",sid:e})},handleDelete:function(t){this.$createElement;var e=this;this.$confirm({title:"删除字段确认",content:function(e){return e("div",["即将",e("span",{class:"textRed"},["以物理方式删除",t.length,"项"]),"字段信息，是否确认删除？"])},onOk:function(){e.deleteOperate(t),e.reloadData()},onCancel:function(){}})},deleteOperate:function(e){var t=this,a={countNum:e.length,id:e.toString()};Object(l["b"])(a).then(function(e){t.$message.success("删除操作".concat(e.msg))}).catch(function(e){t.$message.error("删除失败。".concat(e.message))})},dbClick:function(e){this.handleEdit(e.sid)},formQuery:function(e){this.loadData({},Object(s["a"])({},e))},selectTableKeysChangeFromQFT:function(e){this.selectTableKeys=e},init:function(){var e=this;this.$nextTick(function(){e.loadData({},{})})},reloadData:function(e){var t=this.datasetSid;if(void 0!==e&&"{}"!==JSON.stringify(e)){var a=e.pageNum,i=e.pageSize;this.tableData.pageNum=a,this.tableData.pageSize=i}this.loadData({},{datasetSid:t})},loadData:function(e,t){var s=this;"{}"===JSON.stringify(e)&&(e.pageNum=this.tableData.pageNum,e.pageSize=this.tableData.pageSize),t.datasetSid||(t.datasetSid=this.datasetItem.sid),this.loadingFlag=!0,Object(l["c"])(e.pageNum,e.pageSize,t).then(function(e){var t=s.tableData,a=t.pageNum,i=t.pageSize,n={content:e.rows,pageNum:a,pageSize:i,totalPages:Math.ceil(e.total/i),totalSize:e.total};s.tableData=n}).catch(function(e){s.$message.error("表格数据获取失败。".concat(e.message))}).finally(function(){s.loadingFlag=!1})},handleSave:function(){var t=this;this.addForm.columns=this.tableData.content,this.saveLoading=!0,updateInfo(this.addForm).then(function(e){if(!Object(d["l"])(e))throw new Error(e.msg);t.$message.success("成功"),t.$refs.crm.close()}).catch(function(e){t.$message.error(e.message)}).finally(function(){t.saveLoading=!1})},handleCancel:function(){this.$refs.crm.close()}},mounted:function(){var e=this;c["a"].$on("reloadData",function(){e.reloadData({})})}},m=u,p=(a("4931"),a("2877")),f=Object(p["a"])(m,i,n,!1,null,"0b747292",null);t["default"]=f.exports},"8af3":function(e,t,a){"use strict";a.r(t);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"userAddBox"}},[a("c-resizable-modal",{ref:"crm",attrs:{title:"新增角色"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t.isSave?a("a-result",{attrs:{status:"success",title:"已保存数据","sub-title":"窗口将在1秒后关闭"}}):a("div",[a("div",{attrs:{id:"stepBox"}},[a("a-steps",{attrs:{current:t.nowStep,size:"small"}},[a("a-step",{attrs:{title:"第一部分"}}),a("a-step",{attrs:{title:"第二部分"}}),a("a-step",{attrs:{title:"第三部分"}})],1)],1),a("a-form-model",{attrs:{"label-col":{span:4},"wrapper-col":{span:14}}},[0==t.nowStep?a("div",[a("a-form-model-item",{attrs:{label:"角色名称"}},[a("a-input")],1),a("a-form-model-item",{attrs:{label:"角色别名"}},[a("a-input")],1),a("a-form-model-item",{attrs:{label:"角色状态"}},[a("a-radio-group",{attrs:{options:t.roleStatusGroup,"default-value":t.roleStatusGroup[0]}})],1),a("a-form-model-item",{attrs:{label:"项目授权"}},[a("c-check-tree",{attrs:{propTreeData:t.treeData},model:{value:t.xmsq,callback:function(e){t.xmsq=e},expression:"xmsq"}})],1),a("a-form-model-item",{attrs:{label:"菜单授权"}},[a("c-check-tree",{attrs:{propTreeData:t.tree2data},model:{value:t.cdsq,callback:function(e){t.cdsq=e},expression:"cdsq"}})],1)],1):t._e(),1==t.nowStep?a("div",[a("a-form-model-item",{attrs:{label:"补录表授权"}},[a("c-check-tree",{attrs:{propTreeData:t.treeData},model:{value:t.xmsq,callback:function(e){t.xmsq=e},expression:"xmsq"}})],1),a("a-form-model-item",{attrs:{label:"备注"}},[a("a-input",{attrs:{type:"textarea"}})],1)],1):t._e()])],1)],1),a("template",{slot:"footer"},[a("a-button",{attrs:{icon:"left",disabled:0==t.nowStep},on:{click:function(e){t.nowStep--}}},[t._v("上一页")]),a("a-button",{attrs:{icon:"right",disabled:2==t.nowStep},on:{click:function(e){t.nowStep++}}},[t._v("下一页")]),a("a-button",{attrs:{type:"primary",icon:"check",disabled:t.isSave},on:{click:t.saveData}},[t._v(t._s(2==t.nowStep?"全部":"直接")+"保存")])],1)],2)],1)},n=[],s={data:function(){return{isModalVisible:!1,isSave:!1,confirmLoading:!1,roleStatusGroup:["正常","停用"],nowStep:0,cdsq:[],xmsq:[],modalStyle:{width:"70%",top:"50px",height:"auto"},treeData:[{title:"parent 1",key:"0-0",children:[{title:"parent 1-0",key:"0-0-0",disabled:!0,children:[{title:"leaf",key:"0-0-0-0",disableCheckbox:!0},{title:"leaf",key:"0-0-0-1",disableCheckbox:!0}]},{title:"parent 1-1",key:"0-0-1",children:[{key:"0-0-1-0",title:"title0010"},{key:"0-0-1-1",title:"title12310"}]},{title:"parent 1-2",key:"0-2-1",children:[{key:"0-20-1-0",title:"title0010"}]}]}],tree2data:[{title:"福建省",key:"fjs",children:[{title:"厦门市",key:"xms",disabled:!0,children:[{title:"湖里区",key:"0-0-0-0",disableCheckbox:!0},{title:"思明区",key:"0-0-0-1",disableCheckbox:!0}]},{title:"福州市",key:"0-0-1",children:[{key:"0-0-1-0",title:"鼓楼区"},{key:"0-0-1-1",title:"仓山区"}]},{title:"漳州市",key:"0-2-1",children:[{key:"0-20-1-0",title:"龙海区"}]}]},{title:"重庆市",key:"cq",children:[{title:"重庆市",key:"cqqq",children:[{title:"沙坪坝区",key:"qwghn"},{title:"南坪区",key:"sdg2"}]}]}]}},components:{},methods:{aa:function(){},open:function(){this.isSave=!1,this.$refs.crm.open(),this.nowStep=0},saveData:function(){var e=this;this.isSave=!0,setTimeout(function(){e.$refs.crm.close()},1e3)},handleOk:function(){},handleCancel:function(){this.$refs.crm.close()}}},l=s,o=(a("5979"),a("2877")),r=Object(o["a"])(l,i,n,!1,null,"0930c0e6",null);t["default"]=r.exports},"8c7f":function(e,t,a){},"93af":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("c-resizable-modal",{ref:"crm",attrs:{title:"模块授权"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("h4",[e._v(" 角色名称："+e._s(e.roleInfo.roleName)+" "),a("a-divider",{attrs:{type:"vertical"}}),e._v(" 角色编号："+e._s(e.roleInfo.roleCode)+" ")],1),a("a-spin",{attrs:{tip:"正在请求数据...",spinning:e.spinning}},[a("c-check-tree",{attrs:{propTreeData:e.treeData,checkedKeys:e.checkedKeys},on:{changeCheckedKeys:e.changeCheckedKeys,reloadTreeData:e.reloadTreeData}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:e.handleCancel}},[e._v("取 消")]),a("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:role:updateRoleModuleRel"],expression:"['system:role:updateRoleModuleRel']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:e.saveLoading},on:{click:e.handleSave}},[e._v("更 新")])],1)])],1)},n=[],s=(a("d3b7"),a("25f0"),a("3528")),l=a("ed08"),o={data:function(){return{saveLoading:!1,roleInfo:{},spinning:!0,treeData:[],checkedKeys:[]}},methods:{reset:function(){this.leftSourceData=[],this.rightTargetKeys=[],this.checkedKeys=[],this.treeData=[]},open:function(e){this.roleInfo=e,this.reset(),this.loadTreeData(),this.spinning=!0,this.$refs.crm.open()},reloadTreeData:function(){this.loadTreeData()},loadTreeData:function(){var t=this;Object(s["f"])(this.roleInfo.sid).then(function(e){if(!Object(l["l"])(e))throw new Error(e.msg);t.treeData=e.data,t.checkedKeys=t.checkKeys(t.treeData)}).catch(function(e){t.$message.error(e.message)}).finally(function(){t.spinning=!1})},checkKeys:function(e){var t=[],a=[];for(var i in e){var n=e[i];"0"===n.isChecked&&(t.push(n.key),a.push(n.title)),n.children&&n.children.length>0&&t.push.apply(t,this.checkKeys(n.children))}return t},handleSave:function(){this.saveLoading=!0;var t=this,e={roleSid:this.roleInfo.sid,moduleSid:this.checkedKeys.toString(),isRelation:"0"};Object(s["k"])(e).then(function(e){if(!Object(l["l"])(e))throw new Error(e.msg);t.$message.success("角色与项目的信息已更新"),t.$refs.crm.close()}).catch(function(e){t.$message.error("错误："+e.message)}).finally(function(){t.saveLoading=!1})},changeCheckedKeys:function(e){this.checkedKeys=e},handleCancel:function(){this.$refs.crm.close()}}},r=o,d=a("2877"),c=Object(d["a"])(r,i,n,!1,null,"26964f06",null);t["default"]=c.exports},9772:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"75%",title:"用户管理"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("h4",[e._v("角色名称："+e._s(e.roleInfo.roleName)+" "),a("a-divider",{attrs:{type:"vertical"}}),e._v(" 角色编号："+e._s(e.roleInfo.roleCode)+" ")],1),a("a-spin",{attrs:{tip:"正在请求数据...",spinning:e.spinning}},[a("a-transfer",{staticStyle:{margin:"0 auto"},attrs:{"list-style":{width:"45%",height:"300px"},dataSource:e.leftSourceData,targetKeys:e.rightTargetKeys,titles:["待分配角色","已选择角色"],"show-search":"","filter-option":e.filterOption,render:function(e){return e.title}},on:{change:e.handleChange}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:e.handleCancel}},[e._v("取 消")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:e.saveLoading},on:{click:e.handleSave}},[e._v("保存")])],1)])],1)},n=[],l=(a("d3b7"),a("25f0"),a("3528")),o=a("ed08"),s={data:function(){return{currentStep:0,isModalVisible:!1,saveLoading:!1,leftSourceData:[],rightTargetKeys:[],spinning:!0,roleInfo:{}}},methods:{reset:function(){this.leftSourceData=[],this.rightTargetKeys=[],this.roleInfo={}},open:function(e){this.reset(),this.roleInfo=e,this.getUserRoleData(e),this.$refs.crm.open()},getUserRoleData:function(e){var s=this,t=this;this.spinning=!0,Object(l["g"])(e.sid).then(function(e){if(!Object(o["l"])(e))throw new Error(e.msg);var t=[],a=[];for(var i in e.data){var n={key:e.data[i].sid,title:e.data[i].userName};t.push(n),"0"===e.data[i].isRelation&&a.push(e.data[i].sid)}s.$nextTick(function(){s.leftSourceData=t,s.rightTargetKeys=a})}).catch(function(e){s.$message.error("请求异常："+e.message)}).finally(function(){t.spinning=!1})},handleSave:function(){var t=this;this.saveLoading=!0;var e={roleSid:this.roleInfo.sid,userSid:this.rightTargetKeys.toString()};Object(l["l"])(e).then(function(e){if(!Object(o["l"])(e))throw new Error(e.msg);t.$message.success("角色与用户信息已更新"),t.$refs.crm.close()}).catch(function(e){t.$message.warning("角色与用户信息更新失败。"+e.message)}).finally(function(){t.saveLoading=!1})},handleCancel:function(){this.$refs.crm.close()},filterOption:function(e,t){return t.title.indexOf(e)>-1},handleChange:function(e,t,a){this.rightTargetKeys=e}}},r=s,d=a("2877"),c=Object(d["a"])(r,i,n,!1,null,"7dfa1b96",null);t["default"]=c.exports},"98d7":function(e,t,a){"use strict";a.r(t);var i=function(){var a=this,e=a.$createElement,i=a._self._c||e;return i("div",{staticClass:"role-config white-back-box"},[i("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"55%",title:"数据集归档数据定义"}},[i("c-query-form-table",{attrs:{searchParams:a.par,tableData:a.tableData,tableColumns:a.tableColumns,needTableCheckList:!0,selectTableKeys:a.selectTableKeys,loadingFlag:a.loadingFlag},on:{selectTableKeysChangeFromQFT:a.selectTableKeysChangeFromQFT,formQuery:a.formQuery,dbClick:a.dbClick,reloadData:a.reloadData},scopedSlots:a._u([{key:"tableActionBox",fn:function(t){return[i("a-button",{attrs:{type:"link"},on:{click:function(e){return a.handleEdit(t.data.sid)}}},[a._v("编辑")]),i("a-button",{attrs:{type:"link"},on:{click:function(e){return a.handleDelete([t.data.sid])}}},[a._v("删除")])]}}])},[i("template",{staticClass:"btn-box",slot:"functionBtnBox"},[i("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"plus"},on:{click:function(e){return a.handleAdd()}}},[a._v("新增")]),i("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"edit",disabled:1!==a.selectTableKeys.length},on:{click:function(e){return a.handleEdit(a.selectTableKeys[0])}}},[a._v("修改")]),i("a-button",{staticClass:"margin-btn",attrs:{type:"primary",disabled:0===a.selectTableKeys.length,icon:"delete"},on:{click:function(e){return a.handleDelete(a.selectTableKeys)}}},[a._v("删除")]),i("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"import"},on:{click:a.handleOpenImportBox}},[a._v("导入")])],1)],2)],1),i("role-detail-modal",{ref:"roleDetailModal"}),i("file-import-modal",{ref:"fileImportModal",attrs:{accept:".xls,.xlsx,.wps"},on:{readToPostFile:a.readToPostFile,uploadSuccess:a.uploadSuccess}})],1)},n=[],s=(a("d3b7"),a("25f0"),a("99af"),a("aeba")),l=a("c28a"),o=a("de38"),r=a("ed08"),d=a("f5ef"),c={data:function(){return{isExportBtnLoad:!1,queryParam:{},par:[{name:"datasetSid",label:"数据集sid",type:"input"},{name:"displayText",label:"展示文本",type:"input"},{name:"fieldSid",label:"原始字段编号",type:"input"},{name:"fieldRow",label:"行",type:"input"},{name:"fieldCol",label:"列",type:"input"},{name:"rowspan",label:"行合并",type:"input"},{name:"colspan",label:"列合并",type:"input"}],tableData:{pageSize:10,pageNum:1,totalPages:1,totalSize:1,content:[]},tableColumns:[{dataIndex:"sid",key:"sid",title:"编号"},{dataIndex:"datasetSid",key:"datasetSid",title:"数据集sid"},{dataIndex:"displayText",key:"displayText",title:"展示文本"},{dataIndex:"fieldSid",key:"fieldSid",title:"原始字段编号"},{dataIndex:"fieldRow",key:"fieldRow",title:"行"},{dataIndex:"fieldCol",key:"fieldCol",title:"列"},{dataIndex:"rowspan",key:"rowspan",title:"行合并"},{dataIndex:"colspan",key:"colspan",title:"列合并"}],selectTableKeys:[],loadingFlag:!1}},mounted:function(){var e=this;d["a"].$on("reloadData",function(){e.reloadData({},{})})},methods:{open:function(e){this.datasetItem=e,this.$refs.crm.open();var t=this.tableData,a=t.pageNum,i=t.pageSize;this.handleLoadData({pageNum:a,pageSize:i},{})},handleOpenImportBox:function(){this.$refs.fileImportModal.open()},readToPostFile:function(e){var a=this;Object(o["f"])(this.datasetItem.sid,e).then(function(e){var t=Object(r["l"])(e);a.$refs.fileImportModal.showImportResult(e,t)}).catch(function(e){a.$refs.fileImportModal.showImportResult(e.message,!1)})},uploadSuccess:function(){this.handleLoadData({},this.queryParam),this.$refs.fileImportModal.close()},getRoleInfoBySid:function(e){var t=this.tableData.content,a=0;for(a in t)if(t[a]["sid"]===e)break;return t[a]},onTreeSelect:function(e){this.formQuery({sid:e[0]})},handleLoadData:function(e,t){var a=this;"{}"===JSON.stringify(e)&&(e.pageNum=this.tableData.pageNum,e.pageSize=this.tableData.pageSize),t.datasetSid||(t.datasetSid=this.datasetItem.sid),this.loadingFlag=!0,this.selectTableKeys=[],Object(o["c"])(e.pageNum,e.pageSize,t).then(function(e){a.$nextTick(function(){a.tableData.content=e.rows,a.tableData.totalSize=e.total,a.tableData.totalPages=Math.ceil(a.tableData.totalSize/a.tableData.pageSize)})}).finally(function(){setTimeout(function(){a.loadingFlag=!1},500)})},handleDelete:function(t){this.$createElement;var e=this;this.$confirm({title:"删除数据确认",content:function(e){return e("div",["即将",e("span",{class:"textRed"},["以武力方式"]),"删除",t.length,"项数据，确认操作？"])},okType:"danger",closable:!0,onOk:function(){e.confirmOkToDelete(t)}})},confirmOkToDelete:function(t){var a=this,i=this,e={id:t.toString(),countNum:t.length};Object(o["b"])(e).then(function(e){i.selectTableKeys=[],i.reloadData({}),i.$message.success("删除".concat(t.length,"项数据结果：").concat(e.msg))}).catch(function(e){a.$message.error("请求错误："+e.message)})},reloadData:function(e){if("{}"!==JSON.stringify(e)){var t=e.pageNum,a=e.pageSize;this.tableData.pageNum=t,this.tableData.pageSize=a}this.handleLoadData({},null)},formQuery:function(e){this.queryParam=e,this.handleLoadData({},e)},dbClick:function(e){this.handleEdit(e.sid)},handleAdd:function(){var e=this.datasetItem.sid;this.$refs.roleDetailModal.open({mode:"insert",sid:e})},handleEdit:function(e){this.$refs.roleDetailModal.open({mode:"edit",sid:e})},selectTableKeysChangeFromQFT:function(e){this.selectTableKeys=e},handleOpenUserManageModal:function(e){var t=this.getRoleInfoBySid(e);this.$refs.ModalUserManage.open(t)},openReportIRAuthManageModal:function(){},handleOpenMenuManage:function(e){var t=this.getRoleInfoBySid(e);this.$refs.ModalMenuAuth.open(t)},handleOpenRoleProjectAuthModal:function(e){var t=this.getRoleInfoBySid(e);this.$refs.ModalRoleModuleAccredit.open(t)},editRole:function(e){this.$refs.roleDetailModal.open({mode:"edit",sid:e})},createNewRole:function(){this.$refs.roleDetailModal.open({mode:"insert"})},handleRoleStatusChange:function(e){}},components:{roleDetailModal:s["default"],fileImportModal:l["default"]}},u=c,m=(a("db99"),a("2877")),p=Object(m["a"])(u,i,n,!1,null,"64a34a94",null);t["default"]=p.exports},aa0d:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"codeDetail"}},[a("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"75%",title:"角色管理"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("h4",[e._v("用户名称："+e._s(e.userInfo.userName)+" "),a("a-divider",{attrs:{type:"vertical"}}),e._v(" 用户编号："+e._s(e.userInfo.userCode)+" ")],1),a("a-spin",{attrs:{tip:"正在请求数据...",spinning:e.spinning}},[a("a-transfer",{staticStyle:{margin:"0 auto"},attrs:{"list-style":{width:"45%",height:"300px"},dataSource:e.leftSourceData,targetKeys:e.rightTargetKeys,titles:["待分配角色","已选择角色"],"show-search":"","filter-option":e.filterOption,render:function(e){return e.title}},on:{change:e.handleChange}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:e.handleCancel}},[e._v("取 消")]),a("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:role:updateRoleUserRel"],expression:"['system:role:updateRoleUserRel']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:e.saveLoading},on:{click:e.handleSave}},[e._v("更 新")])],1)])],1)},n=[],l=(a("d3b7"),a("25f0"),a("c0c7")),o=a("ed08"),s={data:function(){return{isModalVisible:!1,saveLoading:!1,leftSourceData:[],rightTargetKeys:[],spinning:!0,userInfo:{}}},methods:{reset:function(){this.leftSourceData=[],this.rightTargetKeys=[],this.userInfo={}},open:function(e){this.reset(),this.userInfo=e,this.$refs.crm.open(),this.getUserRoleData(e)},getUserRoleData:function(e){var s=this,t=this;this.spinning=!0,Object(l["i"])(e.sid).then(function(e){if(!Object(o["l"])(e))throw new Error(e.msg);var t=[],a=[];for(var i in e.data){var n={key:e.data[i].sid,title:e.data[i].roleName};t.push(n),"0"===e.data[i].isRelation&&a.push(e.data[i].sid)}s.$nextTick(function(){s.leftSourceData=t,s.rightTargetKeys=a})}).catch(function(e){s.$message.error("请求异常："+e.message)}).finally(function(){t.spinning=!1})},handleSave:function(){var t=this;this.saveLoading=!0;var e={userSid:this.userInfo.sid,roleSid:this.rightTargetKeys.toString(),isRelation:"0"};Object(l["p"])(e).then(function(e){if(200!==e.code||!0!==e.status)throw new Error(e.msg);t.$message.success("用户角色信息已更新"),t.$refs.crm.close()}).catch(function(e){t.$message.warning("用户角色信息更新失败。"+e.message)}).finally(function(){t.saveLoading=!1})},handleCancel:function(){this.$refs.crm.close()},filterOption:function(e,t){return t.title.indexOf(e)>-1},handleChange:function(e,t,a){this.rightTargetKeys=e}}},r=s,d=a("2877"),c=Object(d["a"])(r,i,n,!1,null,null,null);t["default"]=c.exports},ac4b:function(e,t,a){"use strict";a.r(t);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"75%",title:"edit"==t.mode?"修改":"新增数据集原始表头定义表"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("a-spin",{attrs:{spinning:t.spin}},[a("a-form-model",{ref:"addForm",attrs:{model:t.addForm,labelCol:{span:6},wrapperCol:{span:18},rules:t.addFormRule}},[a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"数据集sid",prop:"datasetSid"}},[a("a-input",{attrs:{readOnly:""},model:{value:t.addForm.datasetSid,callback:function(e){t.$set(t.addForm,"datasetSid",e)},expression:"addForm.datasetSid"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"展示文本",prop:"displayText"}},[a("a-input",{model:{value:t.addForm.displayText,callback:function(e){t.$set(t.addForm,"displayText",e)},expression:"addForm.displayText"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"原始字段编号",prop:"fieldSid"}},[a("a-select",{model:{value:t.addForm.fieldSid,callback:function(e){t.$set(t.addForm,"fieldSid",e)},expression:"addForm.fieldSid"}},[t._l(t.fieldSidList,function(e){return a("a-select-option",{key:e.sid,attrs:{value:e.sid}},[t._v(t._s(e.fieldNameCn))])}),a("a-select-option",{attrs:{value:""}},[t._v("无")])],2)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"行",prop:"fieldRow"}},[a("a-input",{model:{value:t.addForm.fieldRow,callback:function(e){t.$set(t.addForm,"fieldRow",e)},expression:"addForm.fieldRow"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"列",prop:"fieldCol"}},[a("a-input",{model:{value:t.addForm.fieldCol,callback:function(e){t.$set(t.addForm,"fieldCol",e)},expression:"addForm.fieldCol"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"行合并",prop:"rowspan"}},[a("a-input",{model:{value:t.addForm.rowspan,callback:function(e){t.$set(t.addForm,"rowspan",e)},expression:"addForm.rowspan"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"列合并",prop:"colspan"}},[a("a-input",{model:{value:t.addForm.colspan,callback:function(e){t.$set(t.addForm,"colspan",e)},expression:"addForm.colspan"}})],1)],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:t.handleCancel}},[t._v("取 消")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:t.saveLoading},on:{click:t.handleSave}},[t._v("保存")])],1)])],1)},n=[],s=(a("d3b7"),a("7bec")),l=a("0e65"),o=(a("ed08"),a("f5ef")),r=s["a"].SHOW_PARENT,d={data:function(){return{mode:"read",SHOW_PARENT:r,isModalVisible:!1,saveLoading:!1,spin:!1,fieldSidList:[],addForm:{},treeData:[],addFormRule:{roleCode:[{required:!0,message:"请输入角色编号",trigger:"blur"}],roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}],status:[{required:!0,message:"请给定状态",trigger:"blur"}],builtIn:[{required:!0,message:"请给定内置角色标志",trigger:"blur"}],dataScope:[{required:!0,message:"请选择数据范围",trigger:"blur"}],delFlag:[{required:!0,message:"请给定删除标志状态",trigger:"blur"}]}}},methods:{getDefaultValue:function(){return{sid:"",datasetSid:"",displayText:"",fieldSid:"",fieldRow:"",fieldCol:"",rowspan:"",colspan:""}},getDataBySid:function(e){var t=this;this.spin=!0,Object(l["d"])(e).then(function(e){t.addForm=e.data}).finally(function(){t.spin=!1})},handleSave:function(){var t=this;this.$refs.addForm.validate(function(e){e&&(t.saveLoading=!0,"insert"==t.mode?t.createRole():t.editRole())})},loadDatasetSidList:function(){var t=this;Object(l["e"])().then(function(e){t.fieldSidList=e.rows})},editRole:function(){var t=this,e=this;Object(l["g"])(e.addForm).then(function(e){t.$message.success("数据更新结果:".concat(e.msg)),o["a"].$emit("reloadData"),t.$refs.crm.close()}).catch(function(e){t.$message.error("数据更新失败：",e)}).finally(function(){t.saveLoading=!1})},createRole:function(){var t=this;Object(l["a"])(this.addForm).then(function(e){t.$message.success("新增数据结果：".concat(e.msg)),o["a"].$emit("reloadData"),t.$refs.crm.close()}).catch(function(e){t.$message.error("新增失败。"+e.message)}).finally(function(){t.saveLoading=!1})},open:function(e){this.addForm=this.getDefaultValue(),this.mode=e.mode,"edit"==this.mode?(this.spin=!0,this.getDataBySid(e.sid)):this.addForm["datasetSid"]=e.sid,this.loadDatasetSidList(),this.$refs.crm.open()},handleCancel:function(){var e=this;e.$refs.crm.close()}}},c=d,u=a("2877"),m=Object(u["a"])(c,i,n,!1,null,"4e107b78",null);t["default"]=m.exports},aeba:function(e,t,a){"use strict";a.r(t);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"75%",title:"add"==t.mode?"新增":"修改数据集归档表头定义表"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("a-spin",{attrs:{spinning:t.spin}},[a("a-form-model",{ref:"addForm",attrs:{model:t.addForm,labelCol:{span:6},wrapperCol:{span:18},rules:t.addFormRule}},[a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"数据集sid",prop:"datasetSid"}},[a("a-input",{attrs:{readOnly:""},model:{value:t.addForm.datasetSid,callback:function(e){t.$set(t.addForm,"datasetSid",e)},expression:"addForm.datasetSid"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"展示文本",prop:"displayText"}},[a("a-input",{model:{value:t.addForm.displayText,callback:function(e){t.$set(t.addForm,"displayText",e)},expression:"addForm.displayText"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"原始字段编号",prop:"fieldSid"}},[a("a-select",{model:{value:t.addForm.fieldSid,callback:function(e){t.$set(t.addForm,"fieldSid",e)},expression:"addForm.fieldSid"}},[t._l(t.fieldSidList,function(e){return a("a-select-option",{key:e.sid,attrs:{value:e.sid}},[t._v(t._s(e.fieldNameCn))])}),a("a-select-option",{attrs:{value:""}},[t._v("无")])],2)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"行",prop:"fieldRow"}},[a("a-input",{model:{value:t.addForm.fieldRow,callback:function(e){t.$set(t.addForm,"fieldRow",e)},expression:"addForm.fieldRow"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"列",prop:"fieldCol"}},[a("a-input",{model:{value:t.addForm.fieldCol,callback:function(e){t.$set(t.addForm,"fieldCol",e)},expression:"addForm.fieldCol"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"行合并",prop:"rowspan"}},[a("a-input",{model:{value:t.addForm.rowspan,callback:function(e){t.$set(t.addForm,"rowspan",e)},expression:"addForm.rowspan"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"列合并",prop:"colspan"}},[a("a-input",{model:{value:t.addForm.colspan,callback:function(e){t.$set(t.addForm,"colspan",e)},expression:"addForm.colspan"}})],1)],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:t.handleCancel}},[t._v("取 消")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:t.saveLoading},on:{click:t.handleSave}},[t._v("保存")])],1)])],1)},n=[],s=(a("d3b7"),a("de38")),l=(a("ed08"),a("f5ef")),o={data:function(){return{mode:"read",isModalVisible:!1,saveLoading:!1,spin:!1,fieldSidList:[],addForm:{},treeData:[],addFormRule:{roleCode:[{required:!0,message:"请输入角色编号",trigger:"blur"}],roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}],status:[{required:!0,message:"请给定状态",trigger:"blur"}],builtIn:[{required:!0,message:"请给定内置角色标志",trigger:"blur"}],dataScope:[{required:!0,message:"请选择数据范围",trigger:"blur"}],delFlag:[{required:!0,message:"请给定删除标志状态",trigger:"blur"}]}}},methods:{getDefaultValue:function(){return{sid:"",datasetSid:"",displayText:"",fieldSid:"",fieldRow:"",fieldCol:"",rowspan:"",colspan:""}},getDataBySid:function(e){var t=this;this.spin=!0,Object(s["d"])(e).then(function(e){t.addForm=e.data}).finally(function(){t.spin=!1})},handleSave:function(){var t=this;this.$refs.addForm.validate(function(e){e&&(t.saveLoading=!0,"insert"==t.mode?t.createRole():t.editRole())})},loadDatasetSidList:function(){var t=this;Object(s["e"])().then(function(e){t.fieldSidList=e.rows})},editRole:function(){var t=this,e=this;Object(s["g"])(e.addForm).then(function(e){t.$message.success("数据更新结果:".concat(e.msg)),l["a"].$emit("reloadData"),t.$refs.crm.close()}).catch(function(e){t.$message.error("数据更新失败：",e)}).finally(function(){t.saveLoading=!1})},createRole:function(){var t=this;Object(s["a"])(this.addForm).then(function(e){t.$message.success("新增数据结果：".concat(e.msg)),l["a"].$emit("reloadData"),t.$refs.crm.close()}).catch(function(e){t.$message.error("新增失败。"+e.message)}).finally(function(){t.saveLoading=!1})},open:function(e){this.addForm=this.getDefaultValue(),this.mode=e.mode,"edit"==this.mode?(this.spin=!0,this.getDataBySid(e.sid)):this.addForm["datasetSid"]=e.sid,this.loadDatasetSidList(),this.$refs.crm.open()},handleCancel:function(){var e=this;e.$refs.crm.close()}}},r=o,d=a("2877"),c=Object(d["a"])(r,i,n,!1,null,"02bdc00a",null);t["default"]=c.exports},b415:function(e,t,a){"use strict";a.r(t);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"80%",footer:null,title:"数据集字段信息"}},[a("a-spin",{attrs:{spinning:t.spin}},[a("a-tabs",{attrs:{size:"small"},on:{change:t.onTabsChange},model:{value:t.tabsKey,callback:function(e){t.tabsKey=e},expression:"tabsKey"}},[a("a-tab-pane",{key:"Pigeonhole",attrs:{tab:"归档字段表"}},[a("modalFieldPigeonhole",{ref:"modalFieldPigeonhole",attrs:{datasetItem:t.datasetItem}})],1),a("a-tab-pane",{key:"Original",attrs:{tab:"原始字段表"}},[a("modalFieldOriginal",{ref:"modalFieldOriginal",attrs:{datasetItem:t.datasetItem}})],1)],1)],1)],1)],1)},n=[],s=a("20b7"),l=a("7e02"),o={data:function(){return{mode:"insert",spin:!1,tabsKey:"Pigeonhole",isDataLoaded:!1,saveLoading:!1,datasetItem:{}}},components:{modalFieldOriginal:s["default"],modalFieldPigeonhole:l["default"]},methods:{open:function(e){this.datasetItem=e,this.$refs.crm.open(),this.onTabsChange("Pigeonhole")},onTabsChange:function(e){var t=this,a="Original"===e?"modalFieldOriginal":"modalFieldPigeonhole";setTimeout(function(){t.$nextTick(function(){t.$refs[a].init()})},500)}}},r=o,d=(a("4695"),a("2877")),c=Object(d["a"])(r,i,n,!1,null,"80ee3da0",null);t["default"]=c.exports},b77a:function(e,t,a){},c20a:function(e,t,a){"use strict";a("5b00")},c515:function(e,t,a){"use strict";a.r(t);var i=function(){var a=this,e=a.$createElement,i=a._self._c||e;return i("div",{staticClass:"role-config white-back-box"},[i("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"55%",title:"数据集原始数据定义"}},[i("c-query-form-table",{attrs:{searchParams:a.par,tableData:a.tableData,tableColumns:a.tableColumns,needTableCheckList:!0,selectTableKeys:a.selectTableKeys,loadingFlag:a.loadingFlag},on:{selectTableKeysChangeFromQFT:a.selectTableKeysChangeFromQFT,formQuery:a.formQuery,dbClick:a.dbClick,reloadData:a.reloadData},scopedSlots:a._u([{key:"tableActionBox",fn:function(t){return[i("a-button",{attrs:{type:"link"},on:{click:function(e){return a.handleEdit(t.data.sid)}}},[a._v("编辑")]),i("a-button",{attrs:{type:"link"},on:{click:function(e){return a.handleDelete([t.data.sid])}}},[a._v("删除")])]}}])},[i("template",{staticClass:"btn-box",slot:"functionBtnBox"},[i("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"plus"},on:{click:function(e){return a.handleAdd()}}},[a._v("新增")]),i("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"edit",disabled:1!==a.selectTableKeys.length},on:{click:function(e){return a.editRole(a.selectTableKeys[0])}}},[a._v("修改")]),i("a-button",{staticClass:"margin-btn",attrs:{type:"primary",disabled:0===a.selectTableKeys.length,icon:"delete"},on:{click:function(e){return a.handleDelete(a.selectTableKeys)}}},[a._v("删除")]),i("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"import"},on:{click:a.handleOpenImportBox}},[a._v("导入")])],1)],2)],1),i("role-detail-modal",{ref:"roleDetailModal"}),i("file-import-modal",{ref:"fileImportModal",attrs:{accept:".xls,.xlsx,.wps"},on:{readToPostFile:a.readToPostFile,uploadSuccess:a.uploadSuccess}})],1)},n=[],s=(a("d3b7"),a("25f0"),a("99af"),a("ac4b")),l=a("c28a"),o=a("0e65"),r=a("ed08"),d=a("f5ef"),c={data:function(){return{isExportBtnLoad:!1,queryParam:{},par:[{name:"datasetSid",label:"数据集sid",type:"input"},{name:"displayText",label:"展示文本",type:"input"},{name:"fieldSid",label:"原始字段编号",type:"input"},{name:"fieldRow",label:"行",type:"input"},{name:"fieldCol",label:"列",type:"input"},{name:"rowspan",label:"行合并",type:"input"},{name:"colspan",label:"列合并",type:"input"}],datasetItem:{},tableData:{pageSize:10,pageNum:1,totalPages:1,totalSize:1,content:[]},tableColumns:[{dataIndex:"sid",key:"sid",title:"编号"},{dataIndex:"datasetSid",key:"datasetSid",title:"数据集sid"},{dataIndex:"displayText",key:"displayText",title:"展示文本"},{dataIndex:"fieldSid",key:"fieldSid",title:"原始字段编号"},{dataIndex:"fieldRow",key:"fieldRow",title:"行"},{dataIndex:"fieldCol",key:"fieldCol",title:"列"},{dataIndex:"rowspan",key:"rowspan",title:"行合并"},{dataIndex:"colspan",key:"colspan",title:"列合并"}],selectTableKeys:[],loadingFlag:!1}},mounted:function(){var e=this;d["a"].$on("reloadData",function(){e.reloadData({},{})})},methods:{open:function(e){this.datasetItem=e,this.$refs.crm.open();var t=this.tableData,a=t.pageNum,i=t.pageSize;this.handleLoadData({pageNum:a,pageSize:i},{})},handleOpenImportBox:function(){this.$refs.fileImportModal.open()},readToPostFile:function(e){var a=this;Object(o["f"])(this.datasetItem.sid,e).then(function(e){var t=Object(r["l"])(e);a.$refs.fileImportModal.showImportResult(e,t)}).catch(function(e){a.$refs.fileImportModal.showImportResult(e.message,!1)})},uploadSuccess:function(){this.handleLoadData({},this.queryParam),this.$refs.fileImportModal.close()},getRoleInfoBySid:function(e){var t=this.tableData.content,a=0;for(a in t)if(t[a]["sid"]===e)break;return t[a]},onTreeSelect:function(e){this.formQuery({sid:e[0]})},handleLoadData:function(e,t){var a=this;"{}"===JSON.stringify(e)&&(e.pageNum=this.tableData.pageNum,e.pageSize=this.tableData.pageSize),this.loadingFlag=!0,this.selectTableKeys=[],t.datasetSid||(t.datasetSid=this.datasetItem.sid),Object(o["c"])(e.pageNum,e.pageSize,t).then(function(e){a.$nextTick(function(){a.tableData.content=e.rows,a.tableData.totalSize=e.total,a.tableData.totalPages=Math.ceil(a.tableData.totalSize/a.tableData.pageSize)})}).finally(function(){setTimeout(function(){a.loadingFlag=!1},500)})},handleDelete:function(t){this.$createElement;var e=this;this.$confirm({title:"删除数据确认",content:function(e){return e("div",["即将",e("span",{class:"textRed"},["以武力方式"]),"删除",t.length,"项数据，确认操作？"])},okType:"danger",closable:!0,onOk:function(){e.confirmOkToDelete(t)}})},confirmOkToDelete:function(t){var a=this,i=this,e={id:t.toString(),countNum:t.length};Object(o["b"])(e).then(function(e){i.selectTableKeys=[],i.reloadData({}),i.$message.success("删除".concat(t.length,"项数据结果：").concat(e.msg))}).catch(function(e){a.$message.error("请求错误："+e.message)})},reloadData:function(e){if("{}"!==JSON.stringify(e)){var t=e.pageNum,a=e.pageSize;this.tableData.pageNum=t,this.tableData.pageSize=a}this.handleLoadData({},null)},formQuery:function(e){this.queryParam=e,this.handleLoadData({},e)},dbClick:function(e){this.handleEdit(e.sid)},handleAdd:function(){var e=this.datasetItem.sid;this.$refs.roleDetailModal.open({mode:"insert",sid:e})},handleEdit:function(e){this.$refs.roleDetailModal.open({mode:"edit",sid:e})},selectTableKeysChangeFromQFT:function(e){this.selectTableKeys=e},handleOpenUserManageModal:function(e){var t=this.getRoleInfoBySid(e);this.$refs.ModalUserManage.open(t)},openReportIRAuthManageModal:function(){},handleOpenMenuManage:function(e){var t=this.getRoleInfoBySid(e);this.$refs.ModalMenuAuth.open(t)},handleOpenRoleProjectAuthModal:function(e){var t=this.getRoleInfoBySid(e);this.$refs.ModalRoleModuleAccredit.open(t)},editRole:function(e){this.$refs.roleDetailModal.open({mode:"edit",sid:e})},createNewRole:function(){this.$refs.roleDetailModal.open({mode:"insert"})},handleRoleStatusChange:function(e){}},components:{roleDetailModal:s["default"],fileImportModal:l["default"]}},u=c,m=(a("c20a"),a("2877")),p=Object(m["a"])(u,i,n,!1,null,"27ab0560",null);t["default"]=p.exports},d142:function(e,t,a){},d57f:function(e,t,a){"use strict";a.r(t);var i=function(){var a=this,e=a.$createElement,i=a._self._c||e;return i("div",[i("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"50%",title:("insert"==a.mode?"新增":"编辑")+"数据集执行语句信息"}},[i("a-spin",{attrs:{spinning:a.spin}},[i("a-form-model",{ref:"addForm",attrs:{model:a.addForm,labelCol:{span:6},wrapperCol:{span:18},rules:a.addFormRule}},[i("a-row",[i("a-col",{attrs:{span:11}},[i("a-form-model-item",{attrs:{label:"数据集SID",prop:"datasetSid"}},[i("a-input",{attrs:{disabled:""},model:{value:a.addForm.datasetSid,callback:function(e){a.$set(a.addForm,"datasetSid",e)},expression:"addForm.datasetSid"}})],1)],1),i("a-col",{attrs:{span:24}},[i("a-form-model-item",{attrs:{label:"语句类型",prop:"sqlType",labelCol:{span:3},wrapperCol:{span:21}}},[i("a-radio-group",{model:{value:a.addForm.sqlType,callback:function(e){a.$set(a.addForm,"sqlType",e)},expression:"addForm.sqlType"}},[i("a-radio",{attrs:{value:"1"}},[a._v("查询归档语句")]),i("a-radio",{attrs:{value:"2"}},[a._v("查询原始语句")]),i("a-radio",{attrs:{value:"3"}},[a._v("导出报文语句")]),i("a-radio",{attrs:{value:"4"}},[a._v("关联表达式")])],1)],1)],1),i("a-col",{attrs:{span:24}},[i("a-form-model",{ref:"customForm",attrs:{model:a.customForm}},[a._l(a.customForm.statementList,function(t,e){return i("a-form-model-item",a._b({key:t.key,attrs:{label:0===e?"SQL代码":"SQL代码"+(e+1),labelCol:{span:3},wrapperCol:{span:21},prop:"statementList."+e+".value",rules:{required:!0,message:"SQL代码必须填写，如果不需要填写内容，请点击“-”号删除这个填写框",trigger:"blur"}}},"a-form-model-item",0===e?a.formItemLayout:a.formItemLayoutWithOutLabel,!1),[i("a-textarea",{staticStyle:{width:"95%","margin-right":"8px"},attrs:{placeholder:"请输入SQL执行代码",rows:6},model:{value:t.value,callback:function(e){a.$set(t,"value",e)},expression:"k.value"}}),a.customForm.statementList.length>1?i("a-icon",{staticClass:"dynamic-delete-button",attrs:{type:"minus-circle-o",disabled:1===a.customForm.statementList.length},on:{click:function(){return a.remove(t)}}}):a._e()],1)}),i("a-form-model-item",a._b({},"a-form-model-item",a.formItemLayoutWithOutLabel,!1),[i("a-button",{staticStyle:{width:"100%"},attrs:{type:"dashed"},on:{click:function(e){return a.add()}}},[i("a-icon",{attrs:{type:"plus"}}),a._v(" 增加SQL填写框 ")],1)],1)],2)],1),i("a-col",{attrs:{span:12}},[i("a-form-model-item",{attrs:{label:"创建者编号",prop:"creatorSid"}},[i("a-input",{attrs:{disabled:""},model:{value:a.addForm.creatorSid,callback:function(e){a.$set(a.addForm,"creatorSid",e)},expression:"addForm.creatorSid"}})],1)],1),i("a-col",{attrs:{span:11}},[i("a-form-model-item",{attrs:{label:"创建时间",prop:"createTime"}},[i("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:{format:"HH:mm:ss"},allowClear:"",valueFormat:"YYYY-MM-DD HH:mm:ss",disabled:""},model:{value:a.addForm.createTime,callback:function(e){a.$set(a.addForm,"createTime",e)},expression:"addForm.createTime"}})],1)],1),i("a-col",{attrs:{span:12}},[i("a-form-model-item",{attrs:{label:"修改者编号",prop:"editorSid"}},[i("a-input",{attrs:{disabled:""},model:{value:a.addForm.editorSid,callback:function(e){a.$set(a.addForm,"editorSid",e)},expression:"addForm.editorSid"}})],1)],1),i("a-col",{attrs:{span:11}},[i("a-form-model-item",{attrs:{label:"修改时间",prop:"updateTime"}},[i("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:{format:"HH:mm:ss"},valueFormat:"YYYY-MM-DD HH:mm:ss",disabled:""},model:{value:a.addForm.updateTime,callback:function(e){a.$set(a.addForm,"updateTime",e)},expression:"addForm.updateTime"}})],1)],1),i("a-col",{attrs:{span:23}},[i("a-form-model-item",{attrs:{label:"备注",prop:"note",labelCol:{span:3},wrapperCol:{span:21}}},[i("a-input",{attrs:{type:"textarea"},model:{value:a.addForm.remark,callback:function(e){a.$set(a.addForm,"remark",e)},expression:"addForm.remark"}})],1)],1)],1)],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:a.handleCancel}},[a._v("取 消")]),i("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:a.saveLoading},on:{click:a.handleSave}},[a._v("保存")])],1)],1)],1)},n=[],s=a("5530"),l=(a("a434"),a("ac1f"),a("1276"),a("d3b7"),a("d81d"),a("25f0"),a("4057"),a("fe40")),o=a("f5ef"),r=0,d={data:function(){return{mode:"insert",spin:!1,saveLoading:!1,addForm:{sid:"",datasetSid:"",sort:"",sqlType:"1",statement:"",creatorSid:"",createTime:"",editorSid:"",updateTime:"",remark:""},addFormRule:{sort:[{required:!0,message:"不允许为空",trigger:"blur"}],datasetSid:[{required:!0,message:"不允许为空",trigger:"blur"}],sqlType:[{required:!0,message:"不允许为空",trigger:"blur"}]},customForm:{statementList:[]},formItemLayout:{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},formItemLayoutWithOutLabel:{wrapperCol:{xs:{span:24,offset:0},sm:{span:20,offset:3}}}}},beforeCreate:function(){var e=this;this.form=this.$form.createForm(this,{name:"dynamic_form_item"}),this.form.getFieldDecorator("keys",{initialValue:[],preserve:!0}),this.$nextTick(function(){e.add()})},methods:{remove:function(e){var t=this.customForm.statementList.indexOf(e);-1!==t&&(this.customForm.statementList.splice(t,1),r--)},add:function(e){var t=this;this.$nextTick(function(){t.customForm.statementList.push({value:e||"",key:"statement_".concat(r++)})})},open:function(e){this.customForm.statementList=[],this.addForm={sid:"",datasetSid:e.datasetSid,sort:"",sqlType:"1",statement:"",creatorSid:"",createTime:"",editorSid:"",updateTime:"",remark:""},this.mode=e.mode,this.$refs.crm.open(),"edit"==this.mode?this.getDictDataBySid(e.sid):this.add()},getDictDataBySid:function(e){var t=this,a=this;this.spin=!0;var i=e.split("#")[0],n=e.split("#")[1];Object(l["d"])(i,n).then(function(e){t.addForm=e.data,e.data.sqlList.map(function(e){a.add(e.statement)})}).finally(function(){t.spin=!1})},handleSave:function(){var t=this,a=Object(s["a"])({},this.addForm);this.$refs.addForm.validate(function(e){e&&(t.$refs.customForm.validate(function(e){}),a.sqlList=[],t.customForm.statementList.map(function(e,t){a.sqlList.push({sort:t.toString(),statement:e.value})}),t.saveLoading=!0,"edit"===t.mode?t.updateRecord(a):t.createRecord(a))})},createRecord:function(e){var t=this,a=this;Object(l["a"])(e).then(function(e){a.$message.success("已创建成功1条数据集语句信息"),o["a"].$emit("reloadDictData"),t.$refs.crm.close()}).catch(function(e){t.$message.error("创建失败。".concat(e.message))}).finally(function(){a.saveLoading=!1})},updateRecord:function(e){var t=this,a=this;Object(l["e"])(e).then(function(e){a.$message.success("已修改成功1条数据集语句信息"),o["a"].$emit("reloadDictData"),t.$refs.crm.close()}).catch(function(e){t.$message.error("修改失败。".concat(e.message))}).finally(function(){a.saveLoading=!1})},handleCancel:function(){var e=this;e.$refs.crm.close()}}},c=d,u=a("2877"),m=Object(u["a"])(c,i,n,!1,null,null,null);t["default"]=m.exports},db99:function(e,t,a){"use strict";a("b77a")},ec67:function(e,t,a){},f1c2:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"menuAccr"}},[a("c-resizable-modal",{ref:"crm",attrs:{title:"补录报表授权"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("h4",[e._v(" 角色名称：****** "),a("a-divider",{attrs:{type:"vertical"}}),e._v(" 角色编号：****** ")],1),a("a-spin",{attrs:{tip:"正在请求数据...",spinning:e.spinning}},[a("c-check-tree",{attrs:{propTreeData:e.propTreeData,checkedKeys:e.checkedKeys},on:{changeCheckedKeys:e.changeCheckedKeys}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:e.handleCancel}},[e._v("取 消")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:e.saveLoading},on:{click:e.handleSave}},[e._v("保存")])],1)])],1)},n=[],s=(a("d3b7"),a("25f0"),a("ed08"),void 0),l={data:function(){return{currentStep:0,isModalVisible:!1,saveLoading:!1,checkedKeys:[],propTreeData:[],leftSourceData:[],rightTargetKeys:[],spinning:!0}},methods:{reset:function(){this.leftSourceData=[],this.rightTargetKeys=[]},open:function(){this.reset(),this.spinning=!0,this.$refs.crm.open(),this.getTestData()},handleSave:function(){var e=this;this.saveLoading=!0,setTimeout(function(){e.saveLoading=!1,s.$refs.crm.close()},2e3),this.$message.success("触发保存事件")},changeCheckedKeys:function(e){this.checkedKeys=e},getTestData:function(){var t=this;new Promise(function(e,t){for(var a=[],i=0;i<5;i++){for(var n={key:i.toString(),title:"补录测试数据项"+(i+1)},s=[],l=0;l<2;l++)s.push({key:i.toString()+"-"+l.toString(),title:"补录测试数据"+(i+1)+"的儿子"+l});n.children=s,a.push(n)}a=[{key:"zero",title:"父亲父亲",children:a}],e(a)}).then(function(e){setTimeout(function(){t.propTreeData=e,t.spinning=!1},1e3)})},handleCancel:function(){var e=this;this.$confirm({title:"表单存在内容",content:"表单上已有输入的信息，关闭后信息会清空，确认关闭吗？",onOk:function(){e.$message.info("触发关闭事件"),e.$refs.crm.close()},onCancel:function(){}})},filterOption:function(e,t){return t.title.indexOf(e)>-1},handleChange:function(e,t,a){this.rightTargetKeys=e},handleSearch:function(e,t){}},mounted:function(){this.$nextTick(function(){})}},o=l,r=a("2877"),d=Object(r["a"])(o,i,n,!1,null,null,null);t["default"]=d.exports},ffed:function(e,t,a){}}]);