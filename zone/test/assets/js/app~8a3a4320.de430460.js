(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app~8a3a4320"],{"0718":function(e,t,a){"use strict";a.r(t);var i=function(){var a=this,e=a.$createElement,i=a._self._c||e;return i("div",{attrs:{id:"userAddBox"}},[i("c-resizable-modal",{ref:"crm",attrs:{title:"模块的版本管理",footer:null}},[i("div",[i("h3",[i("span",[a._v("模块编号："+a._s(a.moduleItem.moduleCode))]),i("a-divider",{attrs:{type:"vertical"}}),i("span",[a._v("模块名称："+a._s(a.moduleItem.moduleName))])],1)]),i("c-query-form-table",{directives:[{name:"show",rawName:"v-show",value:!a.isShowTree,expression:"!isShowTree"}],attrs:{tableData:a.tableData,tableColumns:a.tableColumns,searchParams:a.searchParams,needTableCheckList:!0,selectTableKeys:a.selectTableKeys,loadingFlag:a.loadingFlag},on:{selectTableKeysChangeFromQFT:a.selectTableKeysChangeFromQFT,reloadData:a.reloadData,formQuery:a.formQuery,dbClick:a.dbClick},scopedSlots:a._u([{key:"tableActionBox",fn:function(t){return[i("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:moduleversion:edit"],expression:"['system:moduleversion:edit']"}],attrs:{type:"link"},on:{click:function(e){return a.handleEdit(t.data.sid)}}},[a._v("编辑")]),i("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:moduleversion:delete"],expression:"['system:moduleversion:delete']"}],attrs:{type:"link"},on:{click:function(e){return a.handleDelete([t.data.sid])}}},[a._v("删除")])]}}])},[i("template",{slot:"tableCustomPageButton"},[i("a-tooltip",[i("template",{slot:"title"},[a._v("以树结构查看版本信息")]),i("a-button",{attrs:{icon:"align-left"},on:{click:a.handleClickDataShowWay}})],2)],1),i("div",{attrs:{slot:"functionBtnBox"},slot:"functionBtnBox"},[i("div",[i("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:moduleversion:add"],expression:"['system:moduleversion:add']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"plus"},on:{click:a.handleAdd}},[a._v("新增")]),i("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:moduleversion:edit"],expression:"['system:moduleversion:edit']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"edit",disabled:1!==a.selectTableKeys.length},on:{click:function(e){return a.handleEdit(a.selectTableKeys[0])}}},[a._v("修改")]),i("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:moduleversion:delete"],expression:"['system:moduleversion:delete']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"delete",disabled:a.selectTableKeys.length<1},on:{click:function(e){return a.handleDelete(a.selectTableKeys)}}},[a._v("删除")])],1)])],2)],1),i("modal-version-detail",{ref:"ModalVersionDetail"}),i("ModalModuleVersionPreview",{ref:"ModalModuleVersionPreview"})],1)},s=[],r=(a("d3b7"),a("25f0"),a("cdb6")),n=a("da8d"),o=a("a207"),l=a("f5ef"),d={data:function(){return{moduleItem:{},loadingFlag:!1,selectTableKeys:[],isShowTree:!1,tableColumns:[{key:"sid",dataIndex:"sid",title:"编号"},{key:"moduleSid",dataIndex:"moduleSid",title:"模块编号"},{key:"moduleName",dataIndex:"moduleName",title:"模块名称"},{key:"versionAttributes",dataIndex:"versionAttributes",title:"版本属性"},{key:"defaultVersion",dataIndex:"defaultVersion",title:"版本号"},{key:"versionName",dataIndex:"versionName",title:"版本名称"},{key:"parentSid",dataIndex:"parentSid",title:"父类编号"},{key:"parentName",dataIndex:"parentName",title:"父类名称"},{key:"versionFreq",dataIndex:"versionFreq",title:"频度"},{key:"sort",dataIndex:"sort",title:"排序"},{key:"status",dataIndex:"status",title:"版本状态"},{key:"creatorSid",dataIndex:"creatorSid",title:"创建者编号"},{key:"createTime",dataIndex:"createTime",title:"创建时间"},{key:"editorSid",dataIndex:"editorSid",title:"修改者编号"},{key:"updateTime",dataIndex:"updateTime",title:"修改时间"},{key:"remark",dataIndex:"remark",title:"备注"}],tableData:{pageSize:10,pageNum:1,content:[]},searchParams:[{name:"moduleSid",label:"模块编号",type:"input"},{name:"versionAttributes",label:"版本属性",type:"select",selectList:[{key:"1",value:"版本号"},{key:"2",value:"文件夹"}]},{name:"versionName",label:"版本名称",type:"input"},{name:"parentSid",label:"父类编号",type:"input"},{name:"versionFreq",label:"频度",type:"select",selectList:[{key:"Y",value:"年"},{key:"H",value:"半年"},{key:"S",value:"季"},{key:"M",value:"月"},{key:"T",value:"旬"},{key:"W",value:"周"},{key:"D",value:"日"}]},{name:"sort",label:"排序",type:"input"},{name:"status",label:"版本状态",type:"select",selectList:[{key:"0",value:"正常"},{key:"1",value:"停用"}]},{name:"creatorSid",label:"创建者编号",type:"input"},{name:"createTime",label:"创建时间",type:"input"},{name:"editorSid",label:"修改者编号",type:"datetime"},{name:"updateTime",label:"修改时间",type:"datetime"},{name:"remark",label:"备注",type:"input"}]}},components:{ModalVersionDetail:n["default"],ModalModuleVersionPreview:o["default"]},mounted:function(){var e=this;l["a"].$on("reloadData",function(){e.reloadData({},{})})},methods:{handleClickDataShowWay:function(){var e={sid:this.moduleItem.sid};this.$refs.ModalModuleVersionPreview.open(e)},selectTableKeysChangeFromQFT:function(e){this.selectTableKeys=e},handleAdd:function(){this.$refs.ModalVersionDetail.open({mode:"insert",moduleSid:this.moduleItem.sid})},open:function(e){this.moduleItem=e,this.$refs.crm.open(),this.loadData({},{moduleSid:e.sid})},loadData:function(e,t){var a=this;"{}"===JSON.stringify(e)&&(e.pageNum=this.tableData.pageNum,e.pageSize=this.tableData.pageSize),t.moduleSid||(t.moduleSid=this.moduleItem.sid),this.loadingFlag=!0,Object(r["c"])(e.pageNum,e.pageSize,t).then(function(e){a.$nextTick(function(){a.tableData.content=e.rows,a.tableData.totalSize=e.total,a.tableData.totalPages=Math.ceil(a.tableData.totalSize/a.tableData.pageSize)})}).finally(function(){a.loadingFlag=!1})},reloadData:function(e){if("{}"!==JSON.stringify(e)){var t=e.pageNum,a=e.pageSize;this.tableData.pageNum=t,this.tableData.pageSize=a}this.loadData({pageNum:this.tableData.pageNum,pageSize:this.tableData.pageSize},{})},formQuery:function(e){this.loadData({},e)},dbClick:function(e){this.handleEdit(e.sid)},handleEdit:function(e){this.$refs.ModalVersionDetail.open({mode:"edit",sid:e})},handleDelete:function(t){this.$createElement;var a=this;this.$confirm({title:"删除数据确认",content:function(e){return e("p",["即将",e("span",{class:"textRed"},["物理删除",t.length,"项数据"]),"，确认操作？"])},okType:"danger",closable:!0,onOk:function(){var e={countNum:t.length,ids:t.toString()};Object(r["b"])(e).then(function(e){a.selectTableKeys=[],a.$message.success("数据已删除成功"),a.loadData({},{})})}})}}},c=d,u=a("2877"),m=Object(u["a"])(c,i,s,!1,null,"963ee29e",null);t["default"]=m.exports},"275e":function(e,t,a){"use strict";a.r(t);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"75%",title:("insert"==t.mode?"新增":"编辑")+"模块定义"}},[a("a-spin",{attrs:{spinning:t.spin}},[a("a-form-model",{ref:"addForm",attrs:{model:t.addForm,labelCol:{span:6},wrapperCol:{span:18},rules:t.addFormRule}},[a("a-row",[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"模块编号",prop:"moduleCode"}},[a("a-input",{model:{value:t.addForm.moduleCode,callback:function(e){t.$set(t.addForm,"moduleCode",e)},expression:"addForm.moduleCode"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"模块名称",prop:"moduleName"}},[a("a-input",{model:{value:t.addForm.moduleName,callback:function(e){t.$set(t.addForm,"moduleName",e)},expression:"addForm.moduleName"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"项目SID",prop:"projectSid"}},[a("a-select",{attrs:{allowClear:""},model:{value:t.addForm.projectSid,callback:function(e){t.$set(t.addForm,"projectSid",e)},expression:"addForm.projectSid"}},t._l(t.projectSelectItems,function(e){return a("a-select-option",{key:e.sid,attrs:{value:e.sid}},[t._v(t._s(e.projectName))])}),1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"菜单SID",prop:"menuSid"}},[a("a-tree-select",{staticStyle:{width:"100%"},attrs:{"show-search":"","tree-node-filter-prop":"title","dropdown-style":{maxHeight:"400px",overflow:"auto"},placeholder:"下拉选择上级编号","allow-clear":"","tree-data":t.menuSelectItems},model:{value:t.addForm.menuSid,callback:function(e){t.$set(t.addForm,"menuSid",e)},expression:"addForm.menuSid"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"模块状态",prop:"status"}},[a("a-radio-group",{attrs:{name:"radioGroup","default-value":0},model:{value:t.addForm.status,callback:function(e){t.$set(t.addForm,"status",e)},expression:"addForm.status"}},[a("a-radio",{attrs:{value:"0"}},[t._v(" 正常 ")]),a("a-radio",{attrs:{value:"1"}},[t._v(" 停用 ")])],1)],1)],1),t.isComponentShow("all",[1,2,3,4,5,6])?a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"创建者编号",prop:"creatorSid"}},[a("a-input",{attrs:{disabled:""},model:{value:t.addForm.creatorSid,callback:function(e){t.$set(t.addForm,"creatorSid",e)},expression:"addForm.creatorSid"}})],1)],1):t._e(),t.isComponentShow("all",[1,2,3,4,5,6])?a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"创建时间",prop:"createTime"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:{format:"HH:mm:ss"},disabled:""},model:{value:t.addForm.createTime,callback:function(e){t.$set(t.addForm,"createTime",e)},expression:"addForm.createTime"}})],1)],1):t._e(),t.isComponentShow("all",[1,2,3,4,5,6])?a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"修改者编号",prop:"editorSid"}},[a("a-input",{attrs:{disabled:""},model:{value:t.addForm.editorSid,callback:function(e){t.$set(t.addForm,"editorSid",e)},expression:"addForm.editorSid"}})],1)],1):t._e(),t.isComponentShow("all",[1,2,3,4,5,6])?a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"修改时间",prop:"updateTime"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:{format:"HH:mm:ss"},disabled:""},model:{value:t.addForm.updateTime,callback:function(e){t.$set(t.addForm,"updateTime",e)},expression:"addForm.updateTime"}})],1)],1):t._e(),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"备注",prop:"note",labelCol:{span:3},wrapperCol:{span:21}}},[a("a-input",{attrs:{type:"textarea"},model:{value:t.addForm.remark,callback:function(e){t.$set(t.addForm,"remark",e)},expression:"addForm.remark"}})],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:t.handleCancel}},[t._v("取 消")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:t.saveLoading},on:{click:t.handleSave}},[t._v("保存")])],1)],1)],1)},s=[],r=(a("d3b7"),a("25f0"),a("7bec")),n=a("ed08"),o=(a("bf03"),a("a6dc"),a("d2b6"),a("5028")),l=a("f5ef"),d=r["a"].SHOW_PARENT,c={data:function(){return{mode:"read",spin:!1,treeData:[],SHOW_PARENT:d,isModalVisible:!1,saveLoading:!1,addForm:{sid:"",menuCode:"",menuName:"",menuTitle:"",parentSid:"",menuType:"1",link:"0",routingAddress:"",routingParam:"",componentPath:"",permissions:"",cache:"0",sort:"",visible:"0",status:"",icon:"",creatorSid:"",createTime:"",editorSid:"",updateTime:"",remark:""},addFormRule:{menuCode:[{required:!0,message:"菜单编号不允许为空",trigger:"blur"}],menuName:[{required:!0,message:"菜单名称不允许为空",trigger:"blur"}],link:[{required:!0,message:"必须选择一个菜单外链值",trigger:"blur"}],menuType:[{required:!0,message:"必须选择一个菜单类型",trigger:"blur"}],visible:[{required:!0,message:"必须给定一个可见值",trigger:"blur"}],cache:[{required:!0,message:"必须给定一个缓存值",trigger:"blur"}],status:[{required:!0,message:"必须给定一个状态值",trigger:"blur"}]},projectSelectItems:[],menuSelectItems:[]}},mounted:function(){},methods:{projectSearchFilterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},isComponentShow:function(e,t){if("all"===e){for(var a in t){var i=this.addForm.menuType===t[a].toString();if(i)return!0}return!1}if("edit"===e)return e===this.mode},getDefaultValue:function(){return{sid:"",menuCode:"",menuName:"",menuTitle:"",parentSid:"",menuType:"1",link:"0",menuProperties:"1",routingAddress:"",routingParam:"",componentPath:"",permissions:"",cache:"0",sort:"",visible:"0",status:"0",icon:"",creatorSid:"",createTime:"",editorSid:"",updateTime:"",remark:""}},loadProject:function(){var t=this;Object(o["f"])(null,null,null).then(function(e){t.$nextTick(function(){t.projectSelectItems=e.rows})}),Object(o["d"])("2,4",null).then(function(e){t.$nextTick(function(){t.menuSelectItems=Object(n["c"])(e.data)})})},open:function(e){this.addForm=this.getDefaultValue(),this.mode=e.mode,this.loadProject(),"edit"===this.mode?(this.spin=!0,this.getDataBySid(e.sid)):this.addForm.parentSid=e.sid,this.$refs.crm.open()},getDataBySid:function(e){var t=this;this.spin=!0,Object(o["e"])(e).then(function(e){null===e.data.parentSid&&(e.data.parentSid=void 0),t.addForm=e.data}).finally(function(){t.spin=!1})},handleSave:function(){var t=this;this.$refs.addForm.validate(function(e){e&&(t.saveLoading=!0,"insert"==t.mode?t.createMenu():t.editMenu())})},editMenu:function(){var t=this,e=this;void 0===this.addForm.parentSid&&(this.addForm.parentSid=""),Object(o["g"])(e.addForm).then(function(e){if(!Object(n["l"])(e))throw new Error(e.msg);t.$message.success("数据已更新"),l["a"].$emit("reloadData"),t.$refs.crm.close()}).catch(function(e){t.$message.error("请求异常：",e.message)}).finally(function(){t.saveLoading=!1})},createMenu:function(){var t=this;Object(o["a"])(this.addForm).then(function(e){if(!Object(n["l"])(e))throw new Error(e.msg);t.$message.success("数据已新增"),t.$refs.crm.close(),l["a"].$emit("reloadData")}).catch(function(e){t.$message.error("请求异常："+e.message)}).finally(function(){t.saveLoading=!1})},handleCancel:function(){this.$refs.crm.close()},selectedIcon:function(e){this.addForm.icon=e},loadMenuTreeData:function(e,t){var a=this;Object(o["d"])(e,null).then(function(e){a.treeData=Object(n["c"])(e.data)})}}},u=c,m=a("2877"),p=Object(m["a"])(u,i,s,!1,null,"7e2667b6",null);t["default"]=p.exports},3949:function(e,t,a){},"3def":function(e,t,a){},"43da":function(e,t,a){"use strict";a.r(t);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"50%",title:("insert"==t.mode?"新增":"编辑")+"档期"}},[a("a-spin",{attrs:{spinning:t.spin}},[a("a-form-model",{ref:"addForm",attrs:{model:t.addForm,labelCol:{span:6},wrapperCol:{span:18},rules:t.addFormRule}},[a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"模块编号",prop:"moduleSid"}},[a("a-tree-select",{staticStyle:{width:"100%"},attrs:{"show-search":"","tree-node-filter-prop":"title","dropdown-style":{maxHeight:"400px",overflow:"auto"},placeholder:"下拉选择...","allow-clear":"","tree-data":t.projectTree},model:{value:t.addForm.moduleSid,callback:function(e){t.$set(t.addForm,"moduleSid",e)},expression:"addForm.moduleSid"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"版本编号",prop:"versionSid"}},[a("a-tree-select",{staticStyle:{width:"100%"},attrs:{"show-search":"","tree-node-filter-prop":"title","dropdown-style":{maxHeight:"400px",overflow:"auto"},placeholder:"下拉选择...","allow-clear":"","tree-data":t.moduleTree},model:{value:t.addForm.versionSid,callback:function(e){t.$set(t.addForm,"versionSid",e)},expression:"addForm.versionSid"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"当前业务日期",prop:"currentIssue"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{valueFormat:"YYYYMMDD"},model:{value:t.addForm.currentIssue,callback:function(e){t.$set(t.addForm,"currentIssue",e)},expression:"addForm.currentIssue"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"下一业务日期",prop:"nextIssue"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{valueFormat:"YYYYMMDD"},model:{value:t.addForm.nextIssue,callback:function(e){t.$set(t.addForm,"nextIssue",e)},expression:"addForm.nextIssue"}})],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:t.handleCancel}},[t._v("取 消")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:t.saveLoading},on:{click:t.handleSave}},[t._v("保存")])],1)],1)],1)},s=[],r=(a("d3b7"),a("ed08")),n=a("3b64"),o=a("f5ef"),l={data:function(){return{mode:"insert",saveLoading:!1,spin:!1,addForm:{},addFormRule:{moduleSid:[{required:!0,message:" 不允许为空",trigger:"blur"}],versionSid:[{required:!0,message:" 不允许为空",trigger:"blur"}],currentIssue:[{required:!0,message:"不允许为空",trigger:"blur"}],nextIssue:[{required:!0,message:"不允许为空",trigger:"blur"}]},projectTree:[],moduleTree:[]}},methods:{open:function(e){this.addForm={moduleSid:"",versionSid:"",currentIssue:"",nextIssue:""},this.mode=e.mode,"edit"===e.mode&&this.loadData(e.sid),this.loadParentSidTreeList(),this.$refs.crm.open()},loadParentSidTreeList:function(){var t=this;Object(n["e"])().then(function(e){t.moduleTree=Object(r["c"])(e.data)}).catch(function(e){t.$message.error("模块树数据加载失败。".concat(e.message))}),Object(n["f"])().then(function(e){t.projectTree=Object(r["c"])(e.data)}).catch(function(e){t.$message.error("项目树数据加载失败。".concat(e.message))})},reset:function(){var e=this;this.$nextTick(function(){e.addForm={}})},loadData:function(e){var t=this;this.spin=!0,Object(n["d"])(e).then(function(e){t.addForm=e.data}).finally(function(){t.spin=!1})},handleSave:function(){this.saveLoading=!0,this.$refs.addForm.validate(function(e){}),"edit"===this.mode?this.updateRecord():this.addRecord()},updateRecord:function(){var t=this;Object(n["g"])(this.addForm).then(function(e){t.$message.success("数据已修改成功"),o["a"].$emit("reloadData"),t.$refs.crm.close()}).finally(function(){t.saveLoading=!1})},addRecord:function(){var t=this;Object(n["a"])(this.addForm).then(function(e){t.$message.success("数据已新增成功"),o["a"].$emit("reloadData"),t.$refs.crm.close()}).finally(function(){t.saveLoading=!1})},handleCancel:function(){var e=this;e.$refs.crm.close()}}},d=l,c=a("2877"),u=Object(c["a"])(d,i,s,!1,null,"71fff06e",null);t["default"]=u.exports},"5ff1":function(e,t,a){"use strict";a("3def")},"7e7e":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("c-resizable-modal",{ref:"crm",attrs:{title:"模块的版本预览",footer:null}},[a("a-spin",{attrs:{tip:"正在请求数据...",spinning:e.spinning}},[a("c-check-tree",{attrs:{propTreeData:e.treeData,checkedKeys:e.checkedKeys,checkable:!1},on:{changeCheckedKeys:e.changeCheckedKeys,reloadTreeData:e.reloadTreeData}})],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:e.handleCancel}},[e._v("取 消")]),a("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:role:updateRoleModuleRel"],expression:"['system:role:updateRoleModuleRel']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:e.saveLoading},on:{click:e.handleSave}},[e._v("更 新")])],1)],1)],1)},s=[],r=(a("d3b7"),a("25f0"),a("3528")),n=a("cdb6"),o=a("ed08"),l={data:function(){return{saveLoading:!1,versionInfo:{},spinning:!0,treeData:[],checkedKeys:[]}},methods:{reset:function(){this.leftSourceData=[],this.rightTargetKeys=[],this.checkedKeys=[],this.treeData=[]},open:function(e){this.versionInfo=e,this.reset(),this.loadTreeData(),this.spinning=!0,this.$refs.crm.open()},reloadTreeData:function(){this.loadTreeData()},loadTreeData:function(){var t=this;Object(n["e"])(this.versionInfo.sid).then(function(e){if(!Object(o["l"])(e))throw new Error(e.msg);t.treeData=e.data,t.checkedKeys=t.checkKeys(t.treeData)}).catch(function(e){t.$message.error(e.message)}).finally(function(){t.spinning=!1})},checkKeys:function(e){var t=[],a=[];for(var i in e){var s=e[i];"0"===s.isChecked&&(t.push(s.key),a.push(s.title)),s.children&&s.children.length>0&&t.push.apply(t,this.checkKeys(s.children))}return t},handleSave:function(){this.saveLoading=!0;var t=this,e={roleSid:this.versionInfo.sid,moduleSid:this.checkedKeys.toString(),isRelation:"0"};Object(r["k"])(e).then(function(e){if(!Object(o["l"])(e))throw new Error(e.msg);t.$message.success("角色与项目的信息已更新"),t.$refs.crm.close()}).catch(function(e){t.$message.error("错误："+e.message)}).finally(function(){t.saveLoading=!1})},changeCheckedKeys:function(e){this.checkedKeys=e},handleCancel:function(){this.$refs.crm.close()}}},d=l,c=a("2877"),u=Object(c["a"])(d,i,s,!1,null,"71a8e574",null);t["default"]=u.exports},"940c":function(e,t,a){"use strict";a.r(t);var i=function(){var a=this,e=a.$createElement,i=a._self._c||e;return i("div",[i("c-query-form-table",{directives:[{name:"show",rawName:"v-show",value:!a.isShowTree,expression:"!isShowTree"}],attrs:{tableData:a.tableData,tableColumns:a.tableColumns,searchParams:a.searchParams,needTableCheckList:!0,selectTableKeys:a.selectTableKeys,loadingFlag:a.loadingFlag},on:{selectTableKeysChangeFromQFT:a.selectTableKeysChangeFromQFT,reloadData:a.reloadData,formQuery:a.formQuery,dbClick:a.dbClick},scopedSlots:a._u([{key:"tableActionBox",fn:function(t){return[i("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:moduleversionissue:edit"],expression:"['system:moduleversionissue:edit']"}],attrs:{type:"link"},on:{click:function(e){return a.handleEdit(t.data.sid)}}},[a._v("修改")]),i("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:moduleversionissue:delete"],expression:"['system:moduleversionissue:delete']"}],attrs:{type:"link"},on:{click:function(e){return a.handleDelete([t.data.sid])}}},[a._v("删除")])]}}])},[i("div",{attrs:{slot:"functionBtnBox"},slot:"functionBtnBox"},[i("div",[i("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:moduleversionissue:add"],expression:"['system:moduleversionissue:add']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"plus"},on:{click:a.handleAdd}},[a._v("新增")]),i("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:moduleversionissue:edit"],expression:"['system:moduleversionissue:edit']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"edit",disabled:1!==a.selectTableKeys.length},on:{click:function(e){return a.handleEdit(a.selectTableKeys[0])}}},[a._v("修改")]),i("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:moduleversionissue:delete"],expression:"['system:moduleversionissue:delete']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"delete",disabled:a.selectTableKeys.length<1},on:{click:function(e){return a.handleDelete(a.selectTableKeys)}}},[a._v("删除")])],1)])]),i("ModalVersionDetail",{ref:"ModalVersionDetail"})],1)},s=[],r=(a("d3b7"),a("25f0"),a("3b64")),n=a("43da"),o=(a("7e7e"),a("f5ef")),l={data:function(){return{moduleItem:{},loadingFlag:!1,selectTableKeys:[],isShowTree:!1,tableColumns:[{dataIndex:"sid",key:"sid",title:"编号"},{dataIndex:"moduleSid",key:"moduleSid",title:"模块编号"},{dataIndex:"versionSid",key:"versionSid",title:"版本编号"},{dataIndex:"currentIssue",key:"currentIssue",title:"当前业务日期"},{dataIndex:"nextIssue",key:"nextIssue",title:"下一业务日期"}],tableData:{pageSize:10,pageNum:1,content:[]},searchParams:[{name:"sid",label:"编号",type:"input"},{name:"moduleSid",label:"模块编号",type:"input"},{name:"versionSid",label:"版本编号",type:"input"},{name:"currentIssue",label:"当前业务日期",type:"date",format:"YYYYMMDD"},{name:"nextIssue",label:"下一业务日期",type:"date",format:"YYYYMMDD"}]}},components:{ModalVersionDetail:n["default"]},mounted:function(){var e=this;this.reloadData({}),o["a"].$on("reloadData",function(){e.reloadData({},{})})},methods:{selectTableKeysChangeFromQFT:function(e){this.selectTableKeys=e},handleAdd:function(){this.$refs.ModalVersionDetail.open({mode:"insert",moduleSid:this.moduleItem.sid})},open:function(e){this.moduleItem=e,this.$refs.crm.open(),this.loadData({},{moduleSid:e.sid})},loadData:function(e,t){var a=this;"{}"===JSON.stringify(e)&&(e.pageNum=this.tableData.pageNum,e.pageSize=this.tableData.pageSize),t.moduleSid||(t.moduleSid=this.moduleItem.sid),this.loadingFlag=!0,Object(r["c"])(e.pageNum,e.pageSize,t).then(function(e){a.$nextTick(function(){a.tableData.content=e.rows,a.tableData.totalSize=e.total,a.tableData.totalPages=Math.ceil(a.tableData.totalSize/a.tableData.pageSize)})}).finally(function(){a.loadingFlag=!1})},reloadData:function(e){if("{}"!==JSON.stringify(e)){var t=e.pageNum,a=e.pageSize;this.tableData.pageNum=t,this.tableData.pageSize=a}this.loadData({pageNum:this.tableData.pageNum,pageSize:this.tableData.pageSize},{})},formQuery:function(e){this.loadData({},e)},dbClick:function(e){this.handleEdit(e.sid)},handleEdit:function(e){this.$refs.ModalVersionDetail.open({mode:"edit",sid:e})},handleDelete:function(t){this.$createElement;var a=this;this.$confirm({title:"删除数据确认",content:function(e){return e("p",["即将",e("span",{class:"textRed"},["物理删除",t.length,"项数据"]),"，确认操作？"])},okType:"danger",closable:!0,onOk:function(){var e={countNum:t.length,ids:t.toString()};Object(r["b"])(e).then(function(e){a.selectTableKeys=[],a.$message.success("数据已删除成功"),a.loadData({},{})})}})}}},d=l,c=a("2877"),u=Object(c["a"])(d,i,s,!1,null,"22a00402",null);t["default"]=u.exports},a207:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("c-resizable-modal",{ref:"crm",attrs:{title:"模块的版本预览",footer:null}},[a("a-spin",{attrs:{tip:"正在请求数据...",spinning:e.spinning}},[a("c-check-tree",{attrs:{propTreeData:e.treeData,checkedKeys:e.checkedKeys,checkable:!1},on:{changeCheckedKeys:e.changeCheckedKeys,reloadTreeData:e.reloadTreeData}})],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:e.handleCancel}},[e._v("取 消")]),a("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:role:updateRoleModuleRel"],expression:"['system:role:updateRoleModuleRel']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:e.saveLoading},on:{click:e.handleSave}},[e._v("更 新")])],1)],1)],1)},s=[],r=(a("d3b7"),a("25f0"),a("3528")),n=a("cdb6"),o=a("ed08"),l={data:function(){return{saveLoading:!1,versionInfo:{},spinning:!0,treeData:[],checkedKeys:[]}},methods:{reset:function(){this.leftSourceData=[],this.rightTargetKeys=[],this.checkedKeys=[],this.treeData=[]},open:function(e){this.versionInfo=e,this.reset(),this.loadTreeData(),this.spinning=!0,this.$refs.crm.open()},reloadTreeData:function(){this.loadTreeData()},loadTreeData:function(){var t=this;Object(n["e"])(this.versionInfo.sid).then(function(e){if(!Object(o["l"])(e))throw new Error(e.msg);t.treeData=e.data,t.checkedKeys=t.checkKeys(t.treeData)}).catch(function(e){t.$message.error(e.message)}).finally(function(){t.spinning=!1})},checkKeys:function(e){var t=[],a=[];for(var i in e){var s=e[i];"0"===s.isChecked&&(t.push(s.key),a.push(s.title)),s.children&&s.children.length>0&&t.push.apply(t,this.checkKeys(s.children))}return t},handleSave:function(){this.saveLoading=!0;var t=this,e={roleSid:this.versionInfo.sid,moduleSid:this.checkedKeys.toString(),isRelation:"0"};Object(r["k"])(e).then(function(e){if(!Object(o["l"])(e))throw new Error(e.msg);t.$message.success("角色与项目的信息已更新"),t.$refs.crm.close()}).catch(function(e){t.$message.error("错误："+e.message)}).finally(function(){t.saveLoading=!1})},changeCheckedKeys:function(e){this.checkedKeys=e},handleCancel:function(){this.$refs.crm.close()}}},d=l,c=a("2877"),u=Object(c["a"])(d,i,s,!1,null,"9bda8f1a",null);t["default"]=u.exports},bd49:function(e,t,a){"use strict";a("3949")},bf03:function(e,t,a){"use strict";a.r(t);var i=function(){var a=this,e=a.$createElement,i=a._self._c||e;return i("div",{attrs:{id:"iconSelectCard"}},[i("a-popover",{attrs:{title:"",trigger:"click"},model:{value:a.visible,callback:function(e){a.visible=e},expression:"visible"}},[i("a-input",{attrs:{placeholder:"单击文本框进行选择","allow-clear":"",readOnly:""},model:{value:a.icon,callback:function(e){a.icon=e},expression:"icon"}},[i("a-icon",{attrs:{slot:"prefix",type:a.icon},slot:"prefix"})],1),i("template",{slot:"content"},[i("div",{staticClass:"content-box"},[i("a-input",{attrs:{placeholder:"从下方选择图标或单击搜索","allow-clear":""},on:{change:a.handleChange},model:{value:a.sel,callback:function(e){a.sel=e},expression:"sel"}}),i("div",{staticClass:"icon-list-box",attrs:{id:"iconList"}},[a._l(a.iconShowList,function(t,e){return[i("a-button",{key:e,staticClass:"icon-item",attrs:{type:"link",icon:t,id:"iconItem"},on:{click:function(e){return a.selectThis(t)}}},[a._v(a._s(t))])]})],2)],1)])],2)],1)},s=[],r=(a("4de4"),{data:function(){return{iconList:["step-backward","step-forward","fast-backward","fast-forward","shrink","arrows-alt","down","up","left","right","caret-up","caret-down","caret-left","caret-right","up-circle","down-circle","left-circle","right-circle","double-right","double-left","vertical-left","vertical-right","vertical-align-top","vertical-align-middle","vertical-align-bottom","forward","backward","rollback","enter","retweet","swap","swap-left","swap-right","arrow-up","arrow-down","arrow-left","arrow-right","play-circle","up-square","down-square","left-square","right-square","login","logout","menu-fold","menu-unfold","border-bottom","border-horizontal","border-inner","border-outer","border-left","border-right","border-top","border-verticle","pic-center","pic-left","pic-right","radius-bottomleft","radius-bottomright","radius-upleft","radius-upright","fullscreen","fullscreen-exit","question","question-circle","plus","plus-circle","pause","pause-circle","minus","minus-circle","plus-square","minus-square","info","info-circle","exclamation","exclamation-circle","close","close-circle","close-square","check","check-circle","check-square","clock-circle","warning","issues-close","stop","edit","form","copy","scissor","delete","snippets","diff","highlight","align-center","align-left","align-right","bg-colors","bold","italic","underline","strikethrough","redo","undo","zoom-in","zoom-out","font-colors","font-size","line-height","dash","small-dash","sort-ascending","sort-descending","drag","ordered-list","unordered-list","radius-setting","column-width","column-height","area-chart","pie-chart","bar-chart","dot-chart","line-chart","radar-chart","heat-map","fall","rise","stock","box-plot","fund","sliders","android","apple","windows","ie","chrome","github","aliwangwang","dingding","weibo-square","weibo-circle","taobao-circle","html5","weibo","twitter","wechat","youtube","alipay-circle","taobao","skype","qq","medium-workmark","gitlab","medium","linkedin","google-plus","dropbox","facebook","codepen","code-sandbox","amazon","google","codepen-circle","alipay","ant-design","ant-cloud","aliyun","zhihu","slack","slack-square","behance","behance-square","dribbble","dribbble-square","instagram","yuque","alibaba","yahoo","reddit","sketch","account-book","alert","api","appstore","audio","bank","bell","book","bug","bulb","calculator","build","calendar","camera","car","carry-out","cloud","code","compass","contacts","container","control","credit-card","crown","customer-service","dashboard","database","dislike","environment","experiment","eye-invisible","eye","file-add","file-excel","file-exclamation","file-image","file-markdown","file-pdf","file-ppt","file-text","file-unknown","file-word","file-zip","file","filter","fire","flag","folder-add","folder","folder-open","frown","funnel-plot","gift","hdd","heart","home","hourglass","idcard","insurance","interaction","layout","like","lock","mail","medicine-box","meh","message","mobile","money-collect","pay-circle","notification","phone","picture","play-square","printer","profile","project","pushpin","property-safety","read","reconciliation","red-envelope","rest","rocket","safety-certificate","save","schedule","security-scan","setting","shop","shopping","skin","smile","sound","star","switcher","tablet","tag","tags","tool","thunderbolt","trophy","unlock","usb","video-camera","wallet","apartment","audit","barcode","bars","block","border","branches","ci","cloud-download","cloud-server","cloud-sync","cloud-upload","cluster","coffee","copyright","deployment-unit","desktop","disconnect","dollar","download","ellipsis","euro","exception","export","file-done","file-jpg","file-protect","file-sync","file-search","fork","gateway","global","gold","history","import","inbox","key","laptop","link","line","loading-3-quarters","loading","man","menu","monitor","more","number","percentage","paper-clip","pound","poweroff","pull-request","qrcode","reload","safety","robot","scan","search","select","shake","share-alt","shopping-cart","solution","sync","table","team","to-top","trademark","transaction","upload","user-add","user-delete","usergroup-add","user","usergroup-delete","wifi","woman"],iconShowList:[],sel:"",visible:!1}},model:{prop:"icon",event:"returnBack"},props:{icon:{type:String,default:function(){return""}}},mounted:function(){this.handleChange()},methods:{selectThis:function(e){this.sel="",this.handleChange(),this.$emit("selectedIcon",e),this.visible=!1},handleChange:function(){var t=this,e=[];""==this.sel?(this.$emit("selectedIcon",""),e=this.iconList):e=this.iconList.filter(function(e){return-1!==e.indexOf(t.sel)}),this.iconShowList=e}}}),n=r,o=(a("bd49"),a("2877")),l=Object(o["a"])(n,i,s,!1,null,"5b39ccd3",null);t["default"]=l.exports},da8d:function(e,t,a){"use strict";a.r(t);var i=function(){var a=this,e=a.$createElement,i=a._self._c||e;return i("div",[i("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"55%",title:("insert"==a.mode?"新增":"编辑")+"版本"}},[i("a-spin",{attrs:{spinning:a.spin}},[i("a-form-model",{ref:"addForm",attrs:{model:a.addForm,labelCol:{span:6},wrapperCol:{span:18},rules:a.addFormRule}},[i("a-row",{attrs:{gutter:15}},[i("a-col",{attrs:{span:12}},[i("a-form-model-item",{attrs:{label:"版本属性",prop:"versionAttributes"}},[i("a-select",{model:{value:a.addForm.versionAttributes,callback:function(e){a.$set(a.addForm,"versionAttributes",e)},expression:"addForm.versionAttributes"}},a._l(a.versionAttributesList,function(e,t){return i("a-select-option",{key:t,attrs:{value:e.key}},[a._v(a._s(e.value))])}),1)],1)],1),i("a-col",{attrs:{span:12}},[i("a-form-model-item",{attrs:{label:"版本名称",prop:"versionName"}},[i("a-input",{model:{value:a.addForm.versionName,callback:function(e){a.$set(a.addForm,"versionName",e)},expression:"addForm.versionName"}})],1)],1),"2"===a.addForm.versionAttributes?i("a-col",{attrs:{span:12}},[i("a-form-model-item",{attrs:{label:"父类编号",prop:"parentSid"}},[i("a-tree-select",{staticStyle:{width:"100%"},attrs:{"show-search":"","tree-node-filter-prop":"title","dropdown-style":{maxHeight:"400px",overflow:"auto"},placeholder:"下拉选择上级编号","allow-clear":"","tree-data":a.parentSidSelectItems},model:{value:a.addForm.parentSid,callback:function(e){a.$set(a.addForm,"parentSid",e)},expression:"addForm.parentSid"}})],1)],1):a._e(),i("a-col",{attrs:{span:12}},[i("a-form-model-item",{attrs:{label:"频度",prop:"versionFreq"}},[i("a-select",{model:{value:a.addForm.versionFreq,callback:function(e){a.$set(a.addForm,"versionFreq",e)},expression:"addForm.versionFreq"}},a._l(a.versionFreqList,function(e,t){return i("a-select-option",{key:t,attrs:{value:e.key}},[a._v(a._s(e.value))])}),1)],1)],1),"1"==a.addForm.versionAttributes?i("a-col",{attrs:{span:12}},[i("a-form-model-item",{attrs:{label:"默认版本",prop:"defaultVersion"}},[i("a-select",{model:{value:a.addForm.defaultVersion,callback:function(e){a.$set(a.addForm,"defaultVersion",e)},expression:"addForm.defaultVersion"}},a._l(a.defaultVersionList,function(e,t){return i("a-select-option",{key:t,attrs:{value:e.key}},[a._v(a._s(e.value))])}),1)],1)],1):a._e(),i("a-col",{attrs:{span:12}},[i("a-form-model-item",{attrs:{label:"排序",prop:"sort"}},[i("a-input-number",{staticStyle:{width:"100%"},model:{value:a.addForm.sort,callback:function(e){a.$set(a.addForm,"sort",e)},expression:"addForm.sort"}})],1)],1),i("a-col",{attrs:{span:12}},[i("a-form-model-item",{attrs:{label:"版本状态",prop:"status"}},[i("a-select",{model:{value:a.addForm.status,callback:function(e){a.$set(a.addForm,"status",e)},expression:"addForm.status"}},a._l(a.statusList,function(e,t){return i("a-select-option",{key:t,attrs:{value:e.key}},[a._v(a._s(e.value))])}),1)],1)],1),i("a-col",{attrs:{span:12}},[i("a-form-model-item",{attrs:{label:"创建者编号",prop:"creatorSid"}},[i("a-input",{attrs:{disabled:""},model:{value:a.addForm.creatorSid,callback:function(e){a.$set(a.addForm,"creatorSid",e)},expression:"addForm.creatorSid"}})],1)],1),i("a-col",{attrs:{span:12}},[i("a-form-model-item",{attrs:{label:"创建时间",prop:"createTime"}},[i("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:{format:"HH:mm:ss"},disabled:""},model:{value:a.addForm.createTime,callback:function(e){a.$set(a.addForm,"createTime",e)},expression:"addForm.createTime"}})],1)],1),i("a-col",{attrs:{span:12}},[i("a-form-model-item",{attrs:{label:"修改者编号",prop:"editorSid"}},[i("a-input",{attrs:{disabled:""},model:{value:a.addForm.editorSid,callback:function(e){a.$set(a.addForm,"editorSid",e)},expression:"addForm.editorSid"}})],1)],1),i("a-col",{attrs:{span:12}},[i("a-form-model-item",{attrs:{label:"修改时间",prop:"updateTime"}},[i("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:{format:"HH:mm:ss"},disabled:""},model:{value:a.addForm.updateTime,callback:function(e){a.$set(a.addForm,"updateTime",e)},expression:"addForm.updateTime"}})],1)],1),i("a-col",{attrs:{span:24}},[i("a-form-model-item",{attrs:{label:"备注",prop:"note",labelCol:{span:3},wrapperCol:{span:21}}},[i("a-input",{attrs:{type:"textarea"},model:{value:a.addForm.remark,callback:function(e){a.$set(a.addForm,"remark",e)},expression:"addForm.remark"}})],1)],1)],1)],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:a.handleCancel}},[a._v("取 消")]),i("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:a.saveLoading},on:{click:a.handleSave}},[a._v("保 存")])],1)],1)],1)},s=[],r=(a("d3b7"),a("ed08")),n=a("cdb6"),o=a("f5ef"),l={data:function(){return{mode:"insert",saveLoading:!1,spin:!1,addForm:{},parentSidSelectItems:[],addFormRule:{moduleSid:[{required:!0,message:"模块编号不允许为空",trigger:"blur"}],moduleName:[{required:!0,message:"模块名称不允许为空",trigger:"blur"}],versionAttributes:[{required:!0,message:"必须选择一个版本属性",trigger:"blur"}],versionName:[{required:!0,message:"不允许为空",trigger:"blur"}],parentSid:[{required:!0,message:"不允许为空",trigger:"blur"}],versionFreq:[{required:!0,message:"必须给定一个值",trigger:"blur"}],status:[{required:!0,message:"必须给定一个值",trigger:"blur"}]},versionAttributesList:[{key:"1",value:"版本号"},{key:"2",value:"文件夹"}],versionFreqList:[{key:"Y",value:"年"},{key:"H",value:"半年"},{key:"S",value:"季"},{key:"M",value:"月"},{key:"T",value:"旬"},{key:"W",value:"周"},{key:"D",value:"日"}],statusList:[{key:"0",value:"正常"},{key:"1",value:"停用"}],defaultVersionList:[{key:"0",value:"否"},{key:"1",value:"是"}]}},methods:{open:function(e){this.addForm={sid:"",moduleSid:"",versionAttributes:"1",versionName:"",parentSid:"",versionFreq:"Y",defaultVersion:"1",sort:"",status:"0",creatorSid:"",createTime:"",editorSid:"",updateTime:"",remark:""},this.mode=e.mode,this.addForm.moduleSid=e.moduleSid,this.addForm.moduleCode=e.moduleCode,this.addForm.moduleName=e.moduleName,"edit"===e.mode&&this.loadData(e.sid),this.loadParentSidTreeList(),this.$refs.crm.open()},loadParentSidTreeList:function(){var t=this;Object(n["e"])(null).then(function(e){t.parentSidSelectItems=Object(r["c"])(e.data)}).catch(function(e){t.$message.error("树数据加载失败。".concat(e.message))})},reset:function(){var e=this;this.$nextTick(function(){e.addForm={}})},loadData:function(e){var t=this;this.spin=!0,Object(n["d"])(e).then(function(e){t.addForm=e.data}).finally(function(){t.spin=!1})},handleSave:function(){var t=this;this.$refs.addForm.validate(function(e){e&&(t.saveLoading=!0,"edit"===t.mode?t.updateRecord():t.addRecord())})},updateRecord:function(){var t=this;Object(n["f"])(this.addForm).then(function(e){t.$message.success("数据已修改成功"),o["a"].$emit("reloadData"),t.$refs.crm.close()}).finally(function(){t.saveLoading=!1})},addRecord:function(){var t=this;Object(n["a"])(this.addForm).then(function(e){t.$message.success("数据已新增成功"),o["a"].$emit("reloadData"),t.$refs.crm.close()}).finally(function(){t.saveLoading=!1})},handleCancel:function(){var e=this;e.$refs.crm.close()}}},d=l,c=a("2877"),u=Object(c["a"])(d,i,s,!1,null,"0cc3295c",null);t["default"]=u.exports},fbc4:function(e,t,a){"use strict";a.r(t);var i,s=function(){var a=this,e=a.$createElement,i=a._self._c||e;return i("div",{staticClass:"menu-config white-back-box",attrs:{id:"menuConfig"}},[i("c-tree-with-self",{attrs:{treeData:a.treeData,selectedKeys:a.selectedKeys,treeMenuList:a.treeMenuList},on:{rightClickMenuItem:a.rightClickMenuItem,onTreeSelect:a.onTreeSelect}},[i("div",{staticStyle:{width:"100%"},attrs:{slot:"selfContent"},slot:"selfContent"},[i("c-query-form-table",{attrs:{tableEmptyText:a.tableEmptyText,searchParams:a.par,tableData:a.tableData,tableColumns:a.tableColumns,needTableCheckList:!0,selectTableKeys:a.selectTableKeys,loadingFlag:a.loadingFlag},on:{selectTableKeysChangeFromQFT:a.selectTableKeysChangeFromQFT,reloadData:a.reloadData,formQuery:a.formQuery,dbClick:a.dbClick},scopedSlots:a._u([{key:"status",fn:function(e){return[i("span",{class:0==e.data.status?"text-green":"textRed"},[a._v("● "+a._s(0==e.data.status?"正常":"禁用"))])]}},{key:"tableActionBox",fn:function(t){return[i("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:moduledef:edit"],expression:"['system:moduledef:edit']"}],attrs:{type:"link",icon:"edit"},on:{click:function(e){return a.handleEdit(t.data.sid)}}},[a._v("修改")]),i("c-more-btn-collect",[i("span",{attrs:{slot:"content"},slot:"content"},[i("a-button",{attrs:{type:"link",icon:"edit"},on:{click:function(e){return a.handleOpenVersionManage(t.data.sid)}}},[a._v("版本管理")]),i("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:moduledef:delete"],expression:"['system:moduledef:delete']"}],attrs:{type:"link",icon:"delete"},on:{click:function(e){return a.handleDelete([t.data.sid])}}},[a._v("删除")])],1)])]}}])},[i("template",{staticClass:"btn-box",slot:"functionBtnBox"},[i("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:moduledef:add"],expression:"['system:moduledef:add']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"plus"},on:{click:function(e){return a.handleAdd(null)}}},[a._v("新增")]),i("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:moduledef:edit"],expression:"['system:moduledef:edit']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"edit",disabled:1!==a.selectTableKeys.length},on:{click:function(e){return a.handleEdit(a.selectTableKeys[0])}}},[a._v("修改")]),i("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:moduledef:delete"],expression:"['system:moduledef:delete']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"delete",disabled:a.selectTableKeys.length<1},on:{click:function(e){return a.handleDelete(a.selectTableKeys)}}},[a._v("删除")]),i("a-button",{attrs:{type:"primary",icon:"edit",disabled:1!==a.selectTableKeys.length},on:{click:function(e){return a.handleOpenVersionManage(a.selectTableKeys[0])}}},[a._v("版本管理")])],1)],2)],1)]),i("module-detail-modal",{ref:"moduleDetailModal"}),i("ModalVersionManage",{ref:"ModalVersionManage"})],1)},r=[],n=a("ade3"),o=(a("7db0"),a("d3b7"),a("25f0"),a("0718")),l=a("275e"),d=a("5028"),c=a("ed08"),u=a("f5ef"),m={data:function(){return{tableEmptyText:"",par:[{name:"sid",label:"编号",type:"input"},{name:"moduleCode",label:"模块编号",type:"input"},{name:"moduleName",label:"模块名称",type:"input"},{name:"projectSid",label:"项目SID",type:"input"},{name:"menuSid",label:"菜单SID",type:"input"},{name:"status",label:"模块状态",type:"input"},{name:"creatorSid",label:"创建者编号",type:"input"},{name:"createTime",label:"创建时间",type:"datetime"},{name:"editorSid",label:"修改者编号",type:"input"},{name:"updateTime",label:"修改时间",type:"datetime"},{name:"remark",label:"备注",type:"input"}],tableData:{pageSize:10,pageNum:1,totalPages:1,totalSize:1,content:[]},loadingFlag:!1,treeData:[],defaultExpandedKeys:[],selectedKeys:[],selectTableKeys:[],tableColumns:[{key:"sid",dataIndex:"sid",title:"编号"},{key:"moduleCode",dataIndex:"moduleCode",title:"模块编号"},{key:"moduleName",dataIndex:"moduleName",title:"模块名称"},{key:"projectSid",dataIndex:"projectSid",title:"项目SID"},{key:"menuSid",dataIndex:"menuSid",title:"菜单SID"},{key:"status",dataIndex:"status",title:"模块状态"},{key:"creatorSid",dataIndex:"creatorSid",title:"创建者编号"},{key:"createTime",dataIndex:"createTime",title:"创建时间"},{key:"editorSid",dataIndex:"editorSid",title:"修改者编号"},{key:"updateTime",dataIndex:"updateTime",title:"修改时间"},{key:"remark",dataIndex:"remark",title:"备注"}],treeMenuList:[{menuKey:"insert",menuName:"新增",icon:"plus"},{menuKey:"edit",menuName:"修改",icon:"edit"},{menuKey:"delete",menuName:"删除",icon:"delete"}]}},mounted:function(){var e=this,t=this.tableData,a=t.pageNum,i=t.pageSize;this.handleLoadData({pageNum:a,pageSize:i},{delFlag:"0"}),u["a"].$on("reloadData",function(){e.reloadData({},{delFlag:"0"})})},methods:(i={rightClickMenuItem:function(e,t){switch(t){case"insert":this.handleAdd(e);break;case"edit":this.handleEdit(e);break;case"delete":this.handleDelete([e]);break}},loadTreeData:function(){var t=this,e="all",a=null;getMenuTree(e,a).then(function(e){t.treeData=e.data})},onTreeSelect:function(e,t){this.formQuery({sid:e[0]})},handleOpenVersionManage:function(t){var e=this.tableData.content.find(function(e){return e.sid===t});this.$refs.ModalVersionManage.open(e)}},Object(n["a"])(i,"rightClickMenuItem",function(e,t){switch(t){case"insert":this.handleAdd(e);break;case"edit":this.handleEdit(e);break;case"delete":this.handleDelete([e]);break}}),Object(n["a"])(i,"onTreeSelect",function(e,t){this.formQuery({sid:e[0]})}),Object(n["a"])(i,"loadTreeData",function(){var t=this,e="all",a=null;getMenuTree(e,a).then(function(e){t.treeData=e.data})}),Object(n["a"])(i,"handleLoadData",function(e,t){var a=this;this.selectTableKeys=[],"{}"===JSON.stringify(e)&&(e.pageNum=this.tableData.pageNum,e.pageSize=this.tableData.pageSize),this.loadingFlag=!0,Object(d["c"])(e.pageNum,e.pageSize,t).then(function(e){a.$nextTick(function(){a.tableData.content=e.rows,a.tableData.totalSize=e.total,a.tableData.totalPages=Math.ceil(a.tableData.totalSize/a.tableData.pageSize)})}).catch(function(e){var t="表格数据获取失败，".concat(e.message);a.$message.error(t),a.tableEmptyText=t}).finally(function(){setTimeout(function(){a.loadingFlag=!1},500)})}),Object(n["a"])(i,"handleDelete",function(t){this.$createElement;var e=this;this.$confirm({title:"删除数据确认",content:function(e){return e("p",["即将以",e("span",{class:"textRed"},["物理方式删除",t.length,"项数据"]),"，是否继续操作？"])},okType:"danger",closable:!0,onOk:function(){e.confirmOkToDelete(t)}})}),Object(n["a"])(i,"confirmOkToDelete",function(t){var a=this,i=this;Object(d["b"])({id:t.toString(),countNum:t.length}).then(function(e){if(!Object(c["l"])(e))throw new Error(e.msg);i.reloadData({}),i.selectedKeys=[],i.$message.success("已删除".concat(t.length,"项数据"))}).catch(function(e){a.$message.error("请求错误："+e.message)})}),Object(n["a"])(i,"reloadData",function(e){if("{}"!==JSON.stringify(e)){var t=e.pageNum,a=e.pageSize;this.tableData.pageNum=t,this.tableData.pageSize=a}this.handleLoadData({},null)}),Object(n["a"])(i,"formQuery",function(e){this.handleLoadData({},e)}),Object(n["a"])(i,"dbClick",function(e){this.handleEdit(e.sid)}),Object(n["a"])(i,"handleAdd",function(e){var t={mode:"insert"};t["sid"]=null!==e?e:null,this.$refs.moduleDetailModal.open(t)}),Object(n["a"])(i,"handleEdit",function(e){this.$refs.moduleDetailModal.open({mode:"edit",sid:e})}),Object(n["a"])(i,"selectTableKeysChangeFromQFT",function(e){this.selectTableKeys=e}),i),components:{moduleDetailModal:l["default"],ModalVersionManage:o["default"]}},p=m,h=(a("5ff1"),a("2877")),f=Object(h["a"])(p,s,r,!1,null,"9b20a990",null);t["default"]=f.exports}}]);