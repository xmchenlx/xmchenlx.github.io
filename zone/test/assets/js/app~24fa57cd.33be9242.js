(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app~24fa57cd"],{"00aa":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"white-back-box",attrs:{id:"mocCbrc"}},[a("h3",[e._v("中国银保监会")]),a("menu-preview-box",{attrs:{menuData:e.menuDataList}})],1)},o=[],i=a("1fc4"),n=a("ed08"),l={data:function(){return{menuDataList:[]}},components:{MenuPreviewBox:i["default"]},methods:{getMenuList:function(){var e=this.$router.options.routes[2].children,t=this.$route.matched;e=Object(n["i"])(e,t)[0].children,this.menuDataList=e},openPage:function(e){this.$router.push({path:e})}},mounted:function(){this.getMenuList()}},s=l,d=(a("8817"),a("2877")),c=Object(d["a"])(s,r,o,!1,null,"150867e8",null);t["default"]=c.exports},"040c":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("c-resizable-modal",{ref:"crm",attrs:{title:"文件内容预览",modalWidth:"60%",footer:null}},[a("a-button",{directives:[{name:"print",rawName:"v-print",value:"#ptx",expression:"'#ptx'"}],attrs:{type:"primary"}},[e._v("测试打印")]),a("div",{attrs:{id:"ptx"},domProps:{innerHTML:e._s(e.previewContent)}})],1)],1)},o=[],i=a("7b1d"),n=a.n(i),l={directives:{print:n.a},data:function(){return{previewContent:""}},methods:{testPrint:function(){},open:function(e){this.previewContent=e,this.$refs.crm.open()},close:function(){this.$refs.crm.close()}}},s=l,d=a("2877"),c=Object(d["a"])(s,r,o,!1,null,null,null);t["default"]=c.exports},"10fd":function(e,t,a){},1900:function(e,t,a){},"4ada":function(e,t,a){"use strict";a("10fd")},5471:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"menuAccr"}},[a("c-resizable-modal",{ref:"crm",attrs:{title:"报表与模块版本关系授权"}},[a("h4",[e._v(" 已选报表："+e._s(e.pInfos.names)+" ")]),a("a-spin",{attrs:{tip:"正在请求数据...",spinning:e.spinning}},[a("c-check-tree",{attrs:{propTreeData:e.treeData,checkedKeys:e.checkedKeys},on:{changeCheckedKeys:e.changeCheckedKeys}})],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:e.handleCancel}},[e._v("取 消")]),e.treeData.length>0?a("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:reportdef:updateReportModuleVersionRel"],expression:"['content:reportdef:updateReportModuleVersionRel']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:e.saveLoading},on:{click:e.handleSave}},[e._v("更 新")]):e._e()],1)],1)],1)},o=[],i=(a("d3b7"),a("25f0"),a("c713")),n=a("ed08"),l={data:function(){return{saveLoading:!1,pInfos:{},spinning:!0,treeData:[],checkedKeys:[]}},methods:{reset:function(){this.leftSourceData=[],this.rightTargetKeys=[],this.saveLoading=!1,this.checkedKeys=[],this.treeData=[]},open:function(e){this.pInfos.sids=e.itemsSid,this.pInfos.names=e.itemsName,this.reset(),this.loadTreeData(),this.spinning=!0,this.$refs.crm.open()},loadTreeData:function(){var t=this,e=this.pInfos.sids;Object(i["k"])(e.length,e).then(function(e){if(!Object(n["l"])(e))throw new Error(e.msg);t.treeData=e.data,t.checkedKeys=t.checkKeys(t.treeData)}).catch(function(e){t.$message.error(e.message)}).finally(function(){t.spinning=!1})},checkKeys:function(e){var t=[],a=[];for(var r in e){var o=e[r];"0"===o.isChecked&&(t.push(o.key),a.push(o.title)),o.children&&o.children.length>0&&t.push.apply(t,this.checkKeys(o.children))}return t},handleSave:function(){var t=this;this.saveLoading=!0;var a=this,e={reportSid:this.pInfos.sids.toString(),versionSid:this.checkedKeys.toString(),isRelation:"0"};Object(i["o"])(e).then(function(e){if(!n["l"])throw new Error(e.msg);t.$message.success("报表与模块版本关系授权已更新"),a.$refs.crm.close()}).catch(function(e){t.$message.error("错误："+e.message)}).finally(function(){t.saveLoading=!1})},changeCheckedKeys:function(e){this.checkedKeys=e},handleCancel:function(){var e=this;e.$refs.crm.close()}}},s=l,d=a("2877"),c=Object(d["a"])(s,r,o,!1,null,"4afc4310",null);t["default"]=c.exports},"596c":function(e,t,a){"use strict";a("1900")},"5ece":function(e,t,a){"use strict";a("b3f7")},"748a":function(e,t,a){},7797:function(e,t,a){"use strict";a.r(t);var r=function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{attrs:{id:"userAddBox"}},[r("c-resizable-modal",{ref:"crm",attrs:{title:a.title,footer:null}},[r("c-query-form-table",{attrs:{tableData:a.tableData,tableColumns:a.tableColumns,searchParams:a.searchParams,needTableCheckList:!0,selectTableKeys:a.selectTableKeys,loadingFlag:a.loadingFlag},on:{selectTableKeysChangeFromQFT:a.selectTableKeysChangeFromQFT,reloadData:a.reloadData,formQuery:a.formQuery,dbClick:a.dbClick},scopedSlots:a._u([{key:"tableActionBox",fn:function(t){return[r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:checkRule:edit"],expression:"['content:checkRule:edit']"}],attrs:{type:"link"},on:{click:function(e){return a.handleEdit(t.data.sid)}}},[a._v("编辑")]),r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:checkRule:delete"],expression:"['content:checkRule:delete']"}],attrs:{type:"link"},on:{click:function(e){return a.handleDelete([t.data.sid])}}},[a._v("删除")])]}}])},[r("div",{attrs:{slot:"functionBtnBox"},slot:"functionBtnBox"},[r("div",[r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:checkRule:add"],expression:"['content:checkRule:add']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"plus"},on:{click:a.handleAddCheckRule}},[a._v("新增")]),r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:checkRule:edit"],expression:"['content:checkRule:edit']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"edit",disabled:1!==a.selectTableKeys.length},on:{click:function(e){return a.handleEdit(a.selectTableKeys[0])}}},[a._v("修改")]),r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:checkRule:delete"],expression:"['content:checkRule:delete']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"delete",disabled:a.selectTableKeys.length<1},on:{click:function(e){return a.handleDelete(a.selectTableKeys)}}},[a._v("删除")]),r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:checkRule:import"],expression:"['content:checkRule:import']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"import"},on:{click:a.handleOpenImportBox}},[a._v("导入")]),r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:checkRule:export"],expression:"['content:checkRule:export']"}],staticClass:"margin-btn",attrs:{type:"primary",loading:a.isExportBtnLoad,icon:"export"},on:{click:a.handleExportData}},[a._v("导出")]),r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:checkRule:exportTemplate"],expression:"['content:checkRule:exportTemplate']"}],staticClass:"margin-btn",attrs:{type:"primary",loading:a.isExportTplBtnLoad,icon:"export"},on:{click:a.handleExportTemplate}},[a._v("导出模板")])],1)])])],1),r("modal-rule-detail",{ref:"modalRuleDetail",on:{reloadData:a.reloadData}}),r("file-import-modal",{ref:"FileImportModal",attrs:{accept:".xlsx"},on:{readToPostFile:a.readToPostFile}})],1)},o=[],i=(a("99af"),a("d3b7"),a("25f0"),a("273b")),n=a("c28a"),l=a("c1a3"),s=a("ed08"),d=(a("f5ef"),{data:function(){return{reportItem:{},loadingFlag:!1,isExportTplBtnLoad:!1,isExportBtnLoad:!1,selectTableKeys:[],tableColumns:[{key:"sid",dataIndex:"sid",title:"编号"},{key:"ruleSource",dataIndex:"ruleSource",title:"校验规则来源"},{key:"ruleNo",dataIndex:"ruleNo",title:"规则编号"},{key:"ruleName",dataIndex:"ruleName",title:"规则名称"},{key:"ruleStrongCheck",dataIndex:"ruleStrongCheck",title:"是否强校验"},{key:"checkType",dataIndex:"checkType",title:"校验类别"},{key:"checkSort",dataIndex:"checkSort",title:"校验分类"},{key:"expressionType",dataIndex:"expressionType",title:"表达式类型"},{key:"expression",dataIndex:"expression",title:"表达式"},{key:"dtlExpression",dataIndex:"dtlExpression",title:"明细表达式"},{key:"effectfield",dataIndex:"effectfield",title:"影响单元格"},{key:"result",dataIndex:"result",title:"结果描述"},{key:"freq",dataIndex:"freq",title:"分频度校验时使用，默认为空"},{key:"checkOrgLev",dataIndex:"checkOrgLev",title:"校验层级，默认为空。例如仅一级机构校验，填写1，如果一级二级机构校验，填写1,2"},{key:"beginDate",dataIndex:"beginDate",title:"生效日期"},{key:"endDate",dataIndex:"endDate",title:"失效日期"},{key:"creatorSid",dataIndex:"creatorSid",title:"创建者编号"},{key:"createTime",dataIndex:"createTime",title:"创建时间"},{key:"editorSid",dataIndex:"editorSid",title:"修改者编号"},{key:"updateTime",dataIndex:"updateTime",title:"修改时间"},{key:"remark",dataIndex:"remark",title:"备注"}],tableData:{pageSize:10,pageNum:1,content:[]},searchParams:[{name:"ruleSource",label:"校验规则来源",type:"select",selectList:[{key:"0",value:"自定义校验"},{key:"1",value:"全国性校验"}]},{name:"ruleNo",label:"规则编号",type:"input"},{name:"ruleName",label:"规则名称",type:"input"},{name:"ruleStrongCheck",label:"是否强校验",type:"select",selectList:[{key:"0",value:"否"},{key:"1",value:"是"}]},{name:"checkType",label:"校验类别",type:"select",selectList:[{key:"0",value:"表内校验"},{key:"1",value:"表间校验"},{key:"2",value:"全表校验"}]},{name:"checkSort",label:"校验分类",type:"input"},{name:"expressionType",label:"表达式类型",type:"select",selectList:[{key:"0",value:"SQL查询语句"},{key:"1",value:"存储过程"},{key:"2",value:"公式表达式"}]},{name:"expression",label:"表达式",type:"input"},{name:"dtlExpression",label:"明细表达式",type:"input"},{name:"effectField",label:"影响单元格",type:"input"},{name:"result",label:"结果描述",type:"input"},{name:"freq",label:"分频度校验时使用，默认为空",type:"input"},{name:"checkOrgLev",label:"校验层级，默认为空。例如仅一级机构校验，填写1，如果一级二级机构校验，填写1,2",type:"input"},{name:"beginDate",label:"生效日期",type:"date",format:"YYYYMMDD"},{name:"endDate",label:"失效日期",type:"date",format:"YYYYMMDD"},{name:"remark",label:"备注",type:"input"}]}},components:{modalRuleDetail:l["default"],FileImportModal:n["default"]},computed:{title:function(){return"报表 ".concat(this.reportItem.reportName,"（").concat(this.reportItem.reportNo,"） 的校验定义")}},mounted:function(){},methods:{handleExportTemplate:function(){var e=this;this.isExportTplBtnLoad=!0,Object(i["d"])({}).then(function(e){Object(s["f"])(e)}).catch(function(e){_this.$message.warning(e.message)}).finally(function(){e.isExportTplBtnLoad=!1})},selectTableKeysChangeFromQFT:function(e){this.selectTableKeys=e},handleAddCheckRule:function(){this.$refs.modalRuleDetail.open({mode:"insert",reportSid:this.reportItem.sid})},open:function(e){this.reportItem=e,this.$refs.crm.open(),this.loadData({},{reportSid:e.sid})},loadData:function(e,t){var a=this;"{}"===JSON.stringify(e)&&(e.pageNum=this.tableData.pageNum,e.pageSize=this.tableData.pageSize),t.menuSid||(t.reportSid=this.reportItem.sid),this.loadingFlag=!0,Object(i["e"])(e.pageNum,e.pageSize,t).then(function(e){a.$nextTick(function(){a.tableData.content=e.rows,a.tableData.totalSize=e.total,a.tableData.totalPages=Math.ceil(a.tableData.totalSize/a.tableData.pageSize)})}).finally(function(){a.loadingFlag=!1})},reloadData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null!==e&&"{}"!==JSON.stringify(e)){var t=e.pageNum,a=e.pageSize;this.tableData.pageNum=t,this.tableData.pageSize=a}this.loadData({pageNum:this.tableData.pageNum,pageSize:this.tableData.pageSize},{})},formQuery:function(e){this.loadData({},e)},dbClick:function(e){this.handleEdit(e.sid)},handleEdit:function(e){this.$refs.modalRuleDetail.open({mode:"edit",reportSid:e},{reportSid:this.reportItem.sid})},handleDelete:function(t){var a=this;this.$confirm({title:"删除数据确认",content:"即将删除".concat(t.length,"项数据，确认删除？"),okType:"danger",closable:!0,onOk:function(){var e={countNum:t.length,sids:t.toString()};Object(i["b"])(e).then(function(e){a.selectTableKeys=[],a.$message.success("删除结果：".concat(e.msg)),a.loadData({},{})})}})},handleExportData:function(){var t=this;this.isExportBtnLoad=!0,Object(i["c"])(this.queryParam).then(function(e){if(e.data.msg)throw new Error(e.msg);Object(s["f"])(e)}).catch(function(e){t.$message.warning(e.message)}).finally(function(){t.isExportBtnLoad=!1})},handleOpenImportBox:function(){this.$refs.FileImportModal.open()},readToPostFile:function(e){var a=this,t=this.reportItem.sid;Object(i["g"])(t,e).then(function(e){var t=validRequestStatus(e);a.$refs.FileImportModal.showImportResult(e,t)}).catch(function(e){a.$refs.FileImportModal.showImportResult(e.message,!1)})},uploadSuccess:function(){this.handleLoadData({},this.queryParam)}}}),c=d,m=a("2877"),u=Object(m["a"])(c,r,o,!1,null,"567e493a",null);t["default"]=u.exports},7848:function(e,t,a){"use strict";a.r(t);var r=function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",[r("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"55%",title:("insert"==a.mode?"新增":"编辑")+"版本"}},[r("a-spin",{attrs:{spinning:a.spin}},[r("a-form-model",{ref:"addForm",attrs:{model:a.addForm,labelCol:{span:6},wrapperCol:{span:18},rules:a.addFormRule}},[r("a-row",{attrs:{gutter:15}},[r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"模块编号",prop:"moduleSid"}},[r("a-input",{model:{value:a.addForm.moduleSid,callback:function(e){a.$set(a.addForm,"moduleSid",e)},expression:"addForm.moduleSid"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"版本属性",prop:"versionAttributes"}},[r("a-select",{model:{value:a.addForm.versionAttributes,callback:function(e){a.$set(a.addForm,"versionAttributes",e)},expression:"addForm.versionAttributes"}},a._l(a.versionAttributesList,function(e,t){return r("a-select-option",{key:t,attrs:{value:e.key}},[a._v(a._s(e.value))])}),1)],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"版本名称",prop:"versionName"}},[r("a-input",{model:{value:a.addForm.versionName,callback:function(e){a.$set(a.addForm,"versionName",e)},expression:"addForm.versionName"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"模块名称",prop:"moduleName"}},[r("a-input",{model:{value:a.addForm.moduleName,callback:function(e){a.$set(a.addForm,"moduleName",e)},expression:"addForm.moduleName"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"父类编号",prop:"parentSid"}},[r("a-input",{model:{value:a.addForm.parentSid,callback:function(e){a.$set(a.addForm,"parentSid",e)},expression:"addForm.parentSid"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"频度",prop:"versionFreq"}},[r("a-select",{model:{value:a.addForm.versionFreq,callback:function(e){a.$set(a.addForm,"versionFreq",e)},expression:"addForm.versionFreq"}},a._l(a.versionFreqList,function(e,t){return r("a-select-option",{key:t,attrs:{value:e.key}},[a._v(a._s(e.value))])}),1)],1)],1),"1"==a.addForm.versionAttributes?r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"默认版本",prop:"defaultVersion"}},[r("a-select",{model:{value:a.addForm.defaultVersion,callback:function(e){a.$set(a.addForm,"defaultVersion",e)},expression:"addForm.defaultVersion"}},a._l(a.defaultVersionList,function(e,t){return r("a-select-option",{key:t,attrs:{value:e.key}},[a._v(a._s(e.value))])}),1)],1)],1):a._e(),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"排序",prop:"sort"}},[r("a-input-number",{staticStyle:{width:"100%"},model:{value:a.addForm.sort,callback:function(e){a.$set(a.addForm,"sort",e)},expression:"addForm.sort"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"版本状态",prop:"status"}},[r("a-select",{model:{value:a.addForm.status,callback:function(e){a.$set(a.addForm,"status",e)},expression:"addForm.status"}},a._l(a.statusList,function(e,t){return r("a-select-option",{key:t,attrs:{value:e.key}},[a._v(a._s(e.value))])}),1)],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"创建者编号",prop:"creatorSid"}},[r("a-input",{attrs:{disabled:""},model:{value:a.addForm.creatorSid,callback:function(e){a.$set(a.addForm,"creatorSid",e)},expression:"addForm.creatorSid"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"创建时间",prop:"createTime"}},[r("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:{format:"HH:mm:ss"},disabled:""},model:{value:a.addForm.createTime,callback:function(e){a.$set(a.addForm,"createTime",e)},expression:"addForm.createTime"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"修改者编号",prop:"editorSid"}},[r("a-input",{attrs:{disabled:""},model:{value:a.addForm.editorSid,callback:function(e){a.$set(a.addForm,"editorSid",e)},expression:"addForm.editorSid"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-model-item",{attrs:{label:"修改时间",prop:"updateTime"}},[r("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:{format:"HH:mm:ss"},disabled:""},model:{value:a.addForm.updateTime,callback:function(e){a.$set(a.addForm,"updateTime",e)},expression:"addForm.updateTime"}})],1)],1),r("a-col",{attrs:{span:24}},[r("a-form-model-item",{attrs:{label:"备注",prop:"note",labelCol:{span:3},wrapperCol:{span:21}}},[r("a-input",{attrs:{type:"textarea"},model:{value:a.addForm.remark,callback:function(e){a.$set(a.addForm,"remark",e)},expression:"addForm.remark"}})],1)],1)],1)],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:a.handleCancel}},[a._v("取 消")]),r("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:a.saveLoading},on:{click:a.handleSave}},[a._v("保存")])],1)],1)],1)},o=[],i=(a("d3b7"),a("8325")),n=a("f5ef"),l={data:function(){return{mode:"insert",saveLoading:!1,spin:!1,addForm:{},addFormRule:{moduleSid:[{required:!0,message:"模块编号不允许为空",trigger:"blur"}],moduleName:[{required:!0,message:"模块名称不允许为空",trigger:"blur"}],versionAttributes:[{required:!0,message:"必须选择一个版本属性",trigger:"blur"}],versionName:[{required:!0,message:"不允许为空",trigger:"blur"}],parentSid:[{required:!0,message:"不允许为空",trigger:"blur"}],versionFreq:[{required:!0,message:"必须给定一个值",trigger:"blur"}],status:[{required:!0,message:"必须给定一个值",trigger:"blur"}]},versionAttributesList:[{key:"1",value:"版本号"},{key:"2",value:"文件夹"}],versionFreqList:[{key:"Y",value:"年"},{key:"H",value:"半年"},{key:"S",value:"季"},{key:"M",value:"月"},{key:"T",value:"旬"},{key:"W",value:"周"},{key:"D",value:"日"}],statusList:[{key:"0",value:"正常"},{key:"1",value:"停用"}],defaultVersionList:[{key:"0",value:"否"},{key:"1",value:"是"}]}},methods:{open:function(e){this.addForm={sid:"",moduleSid:"",versionAttributes:"1",versionName:"",parentSid:"",versionFreq:"Y",defaultVersion:"1",sort:"",status:"0",creatorSid:"",createTime:"",editorSid:"",updateTime:"",remark:""},this.mode=e.mode,"edit"===e.mode&&this.loadData(e.sid),this.$refs.crm.open()},reset:function(){var e=this;this.$nextTick(function(){e.addForm={}})},loadData:function(e){var t=this;this.spin=!0,Object(i["d"])(e).then(function(e){t.addForm=e.data}).finally(function(){t.spin=!1})},handleSave:function(){this.saveLoading=!0,this.$refs.addForm.validate(function(e){}),"edit"===this.mode?this.updateRecord():this.addRecord()},updateRecord:function(){var t=this;Object(i["e"])(this.addForm).then(function(e){t.$message.success("数据已修改成功"),n["a"].$emit("reloadData"),t.$refs.crm.close()}).finally(function(){t.saveLoading=!1})},addRecord:function(){var t=this;Object(i["a"])(this.addForm).then(function(e){t.$message.success("数据已新增成功"),n["a"].$emit("reloadData"),t.$refs.crm.close()}).finally(function(){t.saveLoading=!1})},handleCancel:function(){var e=this;e.$refs.crm.close()}}},s=l,d=a("2877"),c=Object(d["a"])(s,r,o,!1,null,"266be7c6",null);t["default"]=c.exports},8817:function(e,t,a){"use strict";a("a497")},"977c":function(e,t,a){"use strict";a.r(t);var r=function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{staticClass:"report-page white-back-box",attrs:{id:"report"}},[r("c-tree-with-self",{attrs:{treeData:a.treeData,keyName:"specialKey",selectedKeys:a.selectedKeys,treeMenuList:a.treeMenuList},on:{rightClickMenuItem:a.rightClickMenuItem,onTreeSelect:a.onTreeSelect}},[r("div",{staticStyle:{width:"100%"},attrs:{slot:"selfContent"},slot:"selfContent"},[r("c-query-form-table",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:reportdef:list"],expression:"['content:reportdef:list']"}],attrs:{tableEmptyText:a.tableEmptyText,searchParams:a.par,tableData:a.tableData,tableColumns:a.tableColumns,needTableCheckList:!0,selectTableKeys:a.selectTableKeys,loadingFlag:a.loadingFlag},on:{selectTableKeysChangeFromQFT:a.selectTableKeysChangeFromQFT,reloadData:a.reloadData,formQuery:a.formQuery,dbClick:a.dbClick},scopedSlots:a._u([{key:"tableActionBox",fn:function(t){return[r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:reportdef:edit"],expression:"['content:reportdef:edit']"}],attrs:{type:"link",icon:"edit"},on:{click:function(e){return a.handleEdit(t.data.sid)}}},[a._v("修改")]),r("c-more-btn-collect",[r("span",{attrs:{slot:"content"},slot:"content"},[r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:reportdef:getReportModuleVersion"],expression:"['content:reportdef:getReportModuleVersion']"}],attrs:{type:"link",icon:"edit"},on:{click:function(e){return a.handleOpenVersionAccredit([t.data.sid])}}},[a._v("模块版本授权")]),r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:reportdef:deleteReportModuleVersion"],expression:"['content:reportdef:deleteReportModuleVersion']"}],staticClass:"margin-btn",attrs:{type:"link",icon:"edit"},on:{click:function(e){return a.handleDeleteModuleVersionAccredit(a.selectTableKeys)}}},[a._v("批量删除模块版本关系")]),r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:reportdef:delete"],expression:"['content:reportdef:delete']"}],attrs:{type:"link",icon:"delete"},on:{click:function(e){return a.handleDelete([t.data.sid])}}},[a._v("删除")])],1)])]}}])},[r("template",{staticClass:"btn-box",slot:"functionBtnBox"},[r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:reportdef:add"],expression:"['content:reportdef:add']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"plus"},on:{click:function(e){return a.handleAdd(null)}}},[a._v("新增")]),r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:reportdef:edit"],expression:"['content:reportdef:edit']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"edit",disabled:1!==a.selectTableKeys.length},on:{click:function(e){return a.handleEdit(a.selectTableKeys[0])}}},[a._v("修改")]),r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:reportdef:delete"],expression:"['content:reportdef:delete']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"delete",disabled:a.selectTableKeys.length<1},on:{click:function(e){return a.handleDelete(a.selectTableKeys)}}},[a._v("删除")]),r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:reportdef:getReportModuleVersion"],expression:"['content:reportdef:getReportModuleVersion']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"edit",disabled:0===a.selectTableKeys.length},on:{click:function(e){return a.handleOpenVersionAccredit(a.selectTableKeys)}}},[a._v("模块版本授权")]),r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:reportdef:deleteReportModuleVersion"],expression:"['content:reportdef:deleteReportModuleVersion']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"edit",disabled:0===a.selectTableKeys.length},on:{click:function(e){return a.handleDeleteModuleVersionAccredit(a.selectTableKeys)}}},[a._v("批量删除模块版本关系")]),r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:reportdef:import"],expression:"['content:reportdef:import']"}],staticClass:"margin-btn",attrs:{type:"primary",disabled:1!==a.selectTableKeys.length,icon:"safety-certificate"},on:{click:function(e){return a.handleOpenCheckDef(a.selectTableKeys[0])}}},[a._v("校验定义")]),r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:reportdef:import"],expression:"['content:reportdef:import']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"import"},on:{click:a.handleOpenImportBox}},[a._v("导入")]),r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:reportdef:export"],expression:"['content:reportdef:export']"}],staticClass:"margin-btn",attrs:{type:"primary",loading:a.isExportBtnLoad,icon:"export"},on:{click:a.handleExportData}},[a._v("导出")]),r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:reportdef:exportTemplate"],expression:"['content:reportdef:exportTemplate']"}],staticClass:"margin-btn",attrs:{type:"primary",loading:a.isExportTplBtnLoad,icon:"file-excel"},on:{click:a.handleExportTemplate}},[a._v("导出模板")])],1)],2)],1)]),r("module-detail-modal",{ref:"moduleDetailModal"}),r("modal-version-accredit",{ref:"ModalVersionAccredit"}),r("file-import-modal",{ref:"fileImportModal",on:{readToPostFile:a.readToPostFile,uploadSuccess:a.uploadSuccess}}),r("modalCheckDef",{ref:"modalCheckDef"})],1)},o=[],i=(a("7db0"),a("d3b7"),a("d81d"),a("25f0"),a("fbd7")),n=a("5471"),l=a("7797"),s=a("c713"),d=a("c28a"),c=a("ed08"),m=a("f5ef"),u={data:function(){return{queryParam:{},tableEmptyText:"",treeMenuList:[{menuKey:"insert",menuName:"新增",icon:"plus"},{menuKey:"edit",menuName:"修改",icon:"edit"},{menuKey:"delete",menuName:"删除",icon:"delete"}],par:[{name:"sid",label:"编号",type:"input"},{name:"reportNo",label:"报表编号",type:"input"},{name:"reportName",label:"报表名称",type:"input"},{name:"reportType",label:"报表类型",type:"select",selectList:[{key:"0",value:"明细表"},{key:"1",value:"统计表"}]},{name:"orgLevel",label:"报送结构层级",type:"select",selectList:[{key:"1",value:"总行"},{key:"2",value:"分行"},{key:"3",value:"支行"},{key:"4",value:"网点"}]},{name:"isAggregate",label:"是否汇总",type:"select",selectList:[{key:"0",value:"否"},{key:"1",value:"是"}]},{name:"reportFreq",label:"报表频度",type:"select",selectList:[{key:"Y",value:"年"},{key:"H",value:"半年"},{key:"S",value:"季"},{key:"M",value:"月"},{key:"T",value:"旬"},{key:"W",value:"周"},{key:"D",value:"日"}]},{name:"parentSid",label:"父报表编号",type:"input"},{name:"sort",label:"顺序号",type:"input"},{name:"forcibleFlag",label:"是否强制提交",type:"select",selectList:[{key:"0",value:"否"},{key:"1",value:"是"}]},{name:"deleteType",label:"删除类型",type:"select",selectList:[{key:"0",value:"物理删除"},{key:"1",value:"逻辑删除"}]},{name:"beginDate",label:"生效日期",type:"date"},{name:"endDate",label:"失效日期",type:"date"},{name:"issueField",label:"日期",type:"input"},{name:"orgField",label:"机构",type:"input"},{name:"creatorSid",label:"创建者编号",type:"input"},{name:"createTime",label:"创建时间",type:"datetime"},{name:"editorSid",label:"修改者编号",type:"input"},{name:"updateTime",label:"修改时间",type:"datetime"},{name:"remark",label:"备注",type:"input"}],tableData:{pageSize:10,pageNum:1,totalPages:1,totalSize:1,content:[]},loadingFlag:!1,treeData:[],defaultExpandedKeys:[],selectedKeys:[],selectTableKeys:[],tableColumns:[{key:"reportNo",dataIndex:"reportNo",title:"报表编号"},{key:"reportName",dataIndex:"reportName",title:"报表名称"},{key:"reportType",dataIndex:"reportType",title:"报表类型"},{key:"orgLevel",dataIndex:"orgLevel",title:"报送结构层级"},{key:"isAggregate",dataIndex:"isAggregate",title:"是否汇总"},{key:"reportFreq",dataIndex:"reportFreq",title:"报表频度"},{key:"parentSid",dataIndex:"parentSid",title:"父报表编号"},{key:"sort",dataIndex:"sort",title:"顺序号"},{key:"forcibleFlag",dataIndex:"forcibleFlag",title:"是否强制提交"},{key:"deleteType",dataIndex:"deleteType",title:"删除类型"},{key:"beginDate",dataIndex:"beginDate",title:"生效日期"},{key:"endDate",dataIndex:"endDate",title:"失效日期"},{dataIndex:"issueField",key:"issueField",title:"日期"},{dataIndex:"orgField",key:"orgField",title:"机构"},{key:"creatorSid",dataIndex:"creatorSid",title:"创建者编号"},{key:"createTime",dataIndex:"createTime",title:"创建时间"},{key:"editorSid",dataIndex:"editorSid",title:"修改者编号"},{key:"updateTime",dataIndex:"updateTime",title:"修改时间"},{key:"remark",dataIndex:"remark",title:"备注"}],isExportBtnLoad:!1,isExportTplBtnLoad:!1,deleteType:!1}},mounted:function(){var e=this,t=this.tableData,a=t.pageNum,r=t.pageSize;this.handleLoadData({pageNum:a,pageSize:r},{delFlag:"0"}),this.loadTreeData(),m["a"].$on("reloadData",function(){e.reloadData({},{delFlag:"0"})})},methods:{handleOpenCheckDef:function(t){var e=this.tableData.content.find(function(e){return t==e.sid});this.$refs.modalCheckDef.open(e)},handleOpenImportBox:function(){this.$refs.fileImportModal.open()},readToPostFile:function(e){var a=this;Object(s["l"])(e).then(function(e){var t=Object(c["l"])(e);a.$refs.fileImportModal.showImportResult(e,t)}).catch(function(e){a.$refs.fileImportModal.showImportResult(e.message,!1)})},uploadSuccess:function(){this.handleLoadData({},this.queryParam)},handleExportData:function(){var t=this;this.isExportBtnLoad=!0,Object(s["e"])(this.queryParam).then(function(e){if(e.data.msg)throw new Error(e.msg);Object(c["f"])(e)}).catch(function(e){t.$message.warning(e.message)}).finally(function(){t.isExportBtnLoad=!1})},testPrint:function(e){var t=document.getElementById(e).contentWindow;setTimeout(function(){t.print()},100)},handleExportTemplate:function(){var t=this;this.isExportTplBtnLoad=!0,Object(s["f"])(this.queryParam).then(function(e){if(e.data.msg)throw new Error(e.msg);Object(c["f"])(e)}).catch(function(e){t.$message.warning(e.message)}).finally(function(){t.isExportTplBtnLoad=!1})},findRowsInfo:function(e){var a=this,r=[],o=[];return e.map(function(t){var e=a.tableData.content.find(function(e){return e.sid===t});r.push(e.reportName),o.push(e.sid)}),{itemsName:r,itemsSid:o}},handleDeleteModuleVersionAccredit:function(t){this.$createElement;var a=this,r=this.findRowsInfo(t);this.$confirm({title:"".concat(t.length>1?"批量":"","删除模块版本关系确认"),content:function(e){return e("p",["即将清空名为【",r.itemsName.toString().replaceAll(",","、"),"】,这",t.length,"张报表与其模块版本关系信息，是否继续操作？"])},okType:"danger",closable:!0,onOk:function(){Object(s["c"])(t.length,t).then(function(e){a.$message.success("操作结果：".concat(e.msg)),a.reloadData({})}).catch(function(e){a.$message.error(e.message)})}})},handleOpenVersionAccredit:function(e){var t=this.findRowsInfo(e);this.$refs.ModalVersionAccredit.open(t)},rightClickMenuItem:function(e,t){switch(t){case"insert":this.handleAdd(e);break;case"edit":this.handleEdit(e);break;case"delete":this.handleDelete([e]);break}},onTreeSelect:function(e,t){var a=t.node.dataRef.param,r={sidType:a};"report"==a?r.reportNumber=t.node._props.dataRef.code:r["sid"]=e[0],this.formQuery(r)},loadTreeData:function(){var t=this;Object(s["j"])().then(function(e){t.treeData=e.data})},handleLoadData:function(e,t){var a=this;this.selectTableKeys=[],"{}"===JSON.stringify(e)&&(e.pageNum=this.tableData.pageNum,e.pageSize=this.tableData.pageSize),t&&t.sidType||(t["sidType"]="report"),this.loadingFlag=!0,Object(s["g"])(e.pageNum,e.pageSize,t).then(function(e){a.$nextTick(function(){a.tableData.content=e.rows,a.tableData.totalSize=e.total,a.tableData.totalPages=Math.ceil(a.tableData.totalSize/a.tableData.pageSize)})}).catch(function(e){var t="表格数据获取失败，".concat(e.message);a.$message.error(t),a.tableEmptyText=t}).finally(function(){setTimeout(function(){a.loadingFlag=!1},500)})},handleDelete:function(t){this.$createElement;var e=this;this.$confirm({title:"删除数据确认",content:function(e){return e("p",["即将以",e("span",{class:"textRed"},["物理方式删除",t.length,"项数据"]),"，是否继续操作？"])},okType:"danger",closable:!0,onOk:function(){e.confirmOkToDelete(t)}})},confirmOkToDelete:function(t){var a=this,r=this;Object(s["b"])({id:t.toString(),countNum:t.length}).then(function(e){if(!Object(c["l"])(e))throw new Error(e.msg);r.reloadData({}),r.selectedKeys=[],r.$message.success("已删除".concat(t.length,"项数据"))}).catch(function(e){a.$message.error("请求错误："+e.message)})},reloadData:function(e){if("{}"!==JSON.stringify(e)){var t=e.pageNum,a=e.pageSize;this.tableData.pageNum=t,this.tableData.pageSize=a}this.loadTreeData(),this.handleLoadData({},{})},formQuery:function(e){this.queryParam=e,this.handleLoadData({},e)},dbClick:function(e){this.handleEdit(e.sid)},handleAdd:function(e){var t={mode:"insert"};t["sid"]=null!==e?e:null,this.$refs.moduleDetailModal.open(t)},handleEdit:function(e){this.$refs.moduleDetailModal.open({mode:"edit",sid:e})},selectTableKeysChangeFromQFT:function(e){this.selectTableKeys=e}},components:{moduleDetailModal:i["default"],ModalVersionAccredit:n["default"],fileImportModal:d["default"],modalCheckDef:l["default"]}},p=u,f=(a("da2e"),a("4ada"),a("2877")),h=Object(f["a"])(p,r,o,!1,null,"8a13fa0c",null);t["default"]=h.exports},a497:function(e,t,a){},ac1b:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"moc"}},[a("c-router-info-with-tree",{attrs:{parentRoutePath:"manageOfContent",pageRoutes:e.pageRoutesList,pageRoutePathList:e.pageRouteMatched}},[a("div",{attrs:{slot:"routerContent"},slot:"routerContent"},[a("menu-preview-box",{attrs:{menuData:e.cardBoxData}})],1)])],1)},o=[],i=a("1fc4"),n=a("ed08"),l={data:function(){return{pageRoutesList:this.$router.options.routes[2].children,pageRouteMatched:this.$route.matched,cardBoxData:[{path:"/ManagementOfContent/cbrc",meta:{title:"中国银保监会"}},{path:"xx",meta:{title:"中国人民银行"}},{path:"xx",meta:{title:"外汇管理局"}},{path:"xx",meta:{title:"地方/特色监管"}},{path:"xx",meta:{title:"行内报表"}}]}},mounted:function(){this.cardBoxData=this.getData()},methods:{openRefsModel:function(e){this.$refs[e].isModalVisible=!0},getData:function(){return Object(n["i"])(this.pageRoutesList,this.pageRouteMatched)[0].children}},components:{MenuPreviewBox:i["default"]}},s=l,d=(a("f8d8"),a("2877")),c=Object(d["a"])(s,r,o,!1,null,"af8a7426",null);t["default"]=c.exports},b3f7:function(e,t,a){},bf45:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"white-back-box",attrs:{id:"mocCbrcList"}},[a("menu-preview-box",{attrs:{menuData:e.menuDataList}})],1)},o=[],i=a("1fc4"),n=a("ed08"),l={data:function(){return{menuDataList:[]}},components:{MenuPreviewBox:i["default"]},methods:{getMenuList:function(){var e=this.$router.options.routes[2].children,t=this.$route.matched;e=Object(n["i"])(e,t)[0].children,this.menuDataList=e},openPage:function(e){this.$router.push({path:e})}},mounted:function(){this.getMenuList()}},s=l,d=a("2877"),c=Object(d["a"])(s,r,o,!1,null,"f0eec338",null);t["default"]=c.exports},c1a3:function(e,t,a){"use strict";a.r(t);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"55%",title:("insert"==t.mode?"新增":"编辑")+"校验规则定义"}},[a("a-spin",{attrs:{spinning:t.spin}},[a("a-form-model",{ref:"addForm",attrs:{model:t.addForm,labelCol:{span:6},wrapperCol:{span:18},rules:t.addFormRule}},[a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"校验规则来源",prop:"ruleSource"}},[a("a-select",{model:{value:t.addForm.ruleSource,callback:function(e){t.$set(t.addForm,"ruleSource",e)},expression:"addForm.ruleSource"}},[a("a-select-option",{attrs:{value:"0"}},[t._v("自定义校验")]),a("a-select-option",{attrs:{value:"1"}},[t._v("全国性校验")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"规则编号",prop:"ruleNo"}},[a("a-input",{model:{value:t.addForm.ruleNo,callback:function(e){t.$set(t.addForm,"ruleNo",e)},expression:"addForm.ruleNo"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"规则名称",prop:"ruleName"}},[a("a-input",{model:{value:t.addForm.ruleName,callback:function(e){t.$set(t.addForm,"ruleName",e)},expression:"addForm.ruleName"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"是否强校验",prop:"ruleStrongCheck"}},[a("a-select",{model:{value:t.addForm.ruleStrongCheck,callback:function(e){t.$set(t.addForm,"ruleStrongCheck",e)},expression:"addForm.ruleStrongCheck"}},[a("a-select-option",{attrs:{value:"0"}},[t._v("否")]),a("a-select-option",{attrs:{value:"1"}},[t._v("是")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"校验类别",prop:"checkType"}},[a("a-select",{model:{value:t.addForm.checkType,callback:function(e){t.$set(t.addForm,"checkType",e)},expression:"addForm.checkType"}},[a("a-select-option",{attrs:{value:"0"}},[t._v("表内校验")]),a("a-select-option",{attrs:{value:"1"}},[t._v("表间校验")]),a("a-select-option",{attrs:{value:"2"}},[t._v("全表校验")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"校验分类",prop:"checkSort"}},[a("a-input",{model:{value:t.addForm.checkSort,callback:function(e){t.$set(t.addForm,"checkSort",e)},expression:"addForm.checkSort"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"表达式类型",prop:"expressionType"}},[a("a-select",{model:{value:t.addForm.expressionType,callback:function(e){t.$set(t.addForm,"expressionType",e)},expression:"addForm.expressionType"}},[a("a-select-option",{attrs:{value:"0"}},[t._v("SQL查询语句")]),a("a-select-option",{attrs:{value:"1"}},[t._v("存储过程")]),a("a-select-option",{attrs:{value:"2"}},[t._v("公式表达式")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"影响单元格",prop:"effectField"}},[a("a-input",{model:{value:t.addForm.effectField,callback:function(e){t.$set(t.addForm,"effectField",e)},expression:"addForm.effectField"}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"表达式",labelCol:{span:3},wrapperCol:{span:21},prop:"expression"}},[a("a-textarea",{model:{value:t.addForm.expression,callback:function(e){t.$set(t.addForm,"expression",e)},expression:"addForm.expression"}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"明细表达式",span:24,labelCol:{span:3},wrapperCol:{span:21},prop:"dtlExpression"}},[a("a-textarea",{model:{value:t.addForm.dtlExpression,callback:function(e){t.$set(t.addForm,"dtlExpression",e)},expression:"addForm.dtlExpression"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"分频度校验时使用，默认为空",prop:"freq"}},[a("a-input",{staticStyle:{width:"100%"},model:{value:t.addForm.freq,callback:function(e){t.$set(t.addForm,"freq",e)},expression:"addForm.freq"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"校验层级",prop:"checkOrgLev"}},[a("a-input",{staticStyle:{width:"100%"},model:{value:t.addForm.checkOrgLev,callback:function(e){t.$set(t.addForm,"checkOrgLev",e)},expression:"addForm.checkOrgLev"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"生效日期",prop:"beginDate"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{allowClear:"",valueFormat:"YYYYMMDD"},model:{value:t.addForm.beginDate,callback:function(e){t.$set(t.addForm,"beginDate",e)},expression:"addForm.beginDate"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"失效日期",prop:"endDate"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{allowClear:"",valueFormat:"YYYYMMDD"},model:{value:t.addForm.endDate,callback:function(e){t.$set(t.addForm,"endDate",e)},expression:"addForm.endDate"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"创建者编号",prop:"creatorSid"}},[a("a-input",{attrs:{disabled:""},model:{value:t.addForm.creatorSid,callback:function(e){t.$set(t.addForm,"creatorSid",e)},expression:"addForm.creatorSid"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"创建时间",prop:"createTime"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:{format:"HH:mm:ss"},disabled:""},model:{value:t.addForm.createTime,callback:function(e){t.$set(t.addForm,"createTime",e)},expression:"addForm.createTime"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"修改者编号",prop:"editorSid"}},[a("a-input",{attrs:{disabled:""},model:{value:t.addForm.editorSid,callback:function(e){t.$set(t.addForm,"editorSid",e)},expression:"addForm.editorSid"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"修改时间",prop:"updateTime"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:{format:"HH:mm:ss"},disabled:""},model:{value:t.addForm.updateTime,callback:function(e){t.$set(t.addForm,"updateTime",e)},expression:"addForm.updateTime"}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"备注",prop:"note",labelCol:{span:3},wrapperCol:{span:21}}},[a("a-input",{attrs:{type:"textarea"},model:{value:t.addForm.remark,callback:function(e){t.$set(t.addForm,"remark",e)},expression:"addForm.remark"}})],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:t.handleCancel}},[t._v("取 消")]),a("a-button",{staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:t.saveLoading},on:{click:t.handleSave}},[t._v("保存")])],1)],1)],1)},o=[],i=a("5530"),n=(a("d3b7"),a("273b")),l=(a("f5ef"),{data:function(){return{mode:"insert",reportSid:"",saveLoading:!1,spin:!1,addForm:{},addFormRule:{ruleSource:[{required:!0,message:"校验规则来源不允许为空",trigger:"blur"}],ruleNo:[{required:!0,message:"规则编号不允许为空",trigger:"blur"}],ruleName:[{required:!0,message:"规则名称不允许为空",trigger:"blur"}],checkType:[{required:!0,message:"校验类别不允许为空",trigger:"blur"}],ruleStrongCheck:[{required:!0,message:"是否强校验不允许为空",trigger:"blur"}],beginDate:[{required:!0,message:"生效日期不允许为空",trigger:"change"}],endDate:[{required:!0,message:"失效日期不允许为空",trigger:"change"}]}}},methods:{open:function(e){this.addForm={sid:"",ruleSource:"0",ruleNo:"",ruleName:"",ruleStrongCheck:"0",checkType:"0",checkSort:"",expressionType:"0",expression:"",dtlExpression:"",effectField:"",result:"",freq:"",checkOrgLev:"",beginDate:"",endDate:"99991231",creatorSid:"",createTime:"",editorSid:"",updateTime:"",remark:""},this.reportSid=e.reportSid,this.mode=e.mode,"edit"===e.mode&&this.loadData(e.reportSid),this.$refs.crm.open()},reset:function(){var e=this;this.$nextTick(function(){e.addForm={}})},loadData:function(e){var t=this;this.spin=!0,Object(n["f"])(e).then(function(e){t.addForm=e.data}).finally(function(){t.spin=!1})},handleSave:function(){var t=this;this.saveLoading=!0,this.$refs.addForm.validate(function(e){e?"edit"===t.mode?t.updateRecord():t.addRecord():t.saveLoading=!1})},updateRecord:function(){var t=this;Object(n["h"])(this.addForm).then(function(e){t.$message.success("修改结果：".concat(e.msg)),t.$emit("reloadData"),t.$refs.crm.close()}).finally(function(){t.saveLoading=!1})},addRecord:function(){var t=this,e=this.addForm,a=this.reportSid,r=Object(i["a"])(Object(i["a"])({},e),{},{reportSid:a});Object(n["a"])(r).then(function(e){t.$message.success("新增结果：".concat(e.msg)),t.$emit("reloadData"),t.$refs.crm.close()}).finally(function(){t.saveLoading=!1})},handleCancel:function(){var e=this;e.$refs.crm.close()}}}),s=l,d=a("2877"),c=Object(d["a"])(s,r,o,!1,null,"da58a68c",null);t["default"]=c.exports},da2e:function(e,t,a){"use strict";a("ee82")},db72:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"pbc"}},[e._v(" 爱爱爱爱爱22222 ")])},o=[],i=(a("7db0"),a("b0c0"),{data:function(){return{cardBoxData:[],pageTitle:""}},components:{},mounted:function(){this.cardBoxData=this.getData()},computed:{routes:function(){for(var e={children:this.$router.options.routes},t=this.$route.matched,a=0;a<t.length-1;a++)e=e.children.find(function(e){return e.name==t[a].name});return e}},methods:{getData:function(){for(var e in this.routes.children)if(this.routes.children[e].path===this.$route.path)return this.$route.meta.title=this.routes.children[e].meta.title,this.routes.children[e].children?this.routes.children[e].children:[];return[]}}}),n=i,l=(a("5ece"),a("2877")),s=Object(l["a"])(n,r,o,!1,null,"23ecffbe",null);t["default"]=s.exports},e48c:function(e,t,a){"use strict";a.r(t);var r=function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{attrs:{id:"userAddBox"}},[r("c-resizable-modal",{ref:"crm",attrs:{title:"版本管理",footer:null}},[r("div",[r("h3",[r("span",[a._v("模块编号："+a._s(a.moduleItem.moduleCode))]),r("a-divider",{attrs:{type:"vertical"}}),r("span",[a._v("模块名称："+a._s(a.moduleItem.moduleName))])],1)]),r("c-query-form-table",{attrs:{tableData:a.tableData,tableColumns:a.tableColumns,searchParams:a.searchParams,needTableCheckList:!0,selectTableKeys:a.selectTableKeys,loadingFlag:a.loadingFlag},on:{selectTableKeysChangeFromQFT:a.selectTableKeysChangeFromQFT,reloadData:a.reloadData,formQuery:a.formQuery,dbClick:a.dbClick},scopedSlots:a._u([{key:"tableActionBox",fn:function(t){return[r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:i18n:edit"],expression:"['system:i18n:edit']"}],attrs:{type:"link"},on:{click:function(e){return a.handleEdit(t.data.sid)}}},[a._v("编辑")]),r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:i18n:delete"],expression:"['system:i18n:delete']"}],attrs:{type:"link"},on:{click:function(e){return a.handleDelete([t.data.sid])}}},[a._v("删除")])]}}])},[r("div",{attrs:{slot:"functionBtnBox"},slot:"functionBtnBox"},[r("div",[r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:i18n:add"],expression:"['system:i18n:add']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"plus"},on:{click:a.handleAddI18N}},[a._v("新增")]),r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:i18n:edit"],expression:"['system:i18n:edit']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"edit",disabled:1!==a.selectTableKeys.length},on:{click:function(e){return a.handleEdit(a.selectTableKeys[0])}}},[a._v("修改")]),r("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:i18n:delete"],expression:"['system:i18n:delete']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"delete",disabled:a.selectTableKeys.length<1},on:{click:function(e){return a.handleDelete(a.selectTableKeys)}}},[a._v("删除")])],1)])])],1),r("modal-module-detail",{ref:"modalModuleDetail"})],1)},o=[],i=(a("d3b7"),a("25f0"),a("8325")),n=a("7848"),l=a("f5ef"),s={data:function(){return{moduleItem:{},loadingFlag:!1,selectTableKeys:[],tableColumns:[{key:"sid",dataIndex:"sid",title:"编号"},{key:"moduleSid",dataIndex:"moduleSid",title:"模块编号"},{key:"versionAttributes",dataIndex:"versionAttributes",title:"版本属性"},{key:"versionName",dataIndex:"versionName",title:"版本名称"},{key:"versionSid",dataIndex:"versionSid",title:"父类编号"},{key:"versionFreq",dataIndex:"versionFreq",title:"频度"},{key:"sort",dataIndex:"sort",title:"排序"},{key:"status",dataIndex:"status",title:"版本状态"},{key:"creatorSid",dataIndex:"creatorSid",title:"创建者编号"},{key:"createTime",dataIndex:"createTime",title:"创建时间"},{key:"editorSid",dataIndex:"editorSid",title:"修改者编号"},{key:"updateTime",dataIndex:"updateTime",title:"修改时间"},{key:"remark",dataIndex:"remark",title:"备注"}],tableData:{pageSize:10,pageNum:1,content:[]},searchParams:[{name:"moduleSid",label:"模块编号",type:"input"},{name:"versionAttributes",label:"版本属性",type:"select",selectList:[{key:"1",value:"版本号"},{key:"2",value:"文件夹"}]},{name:"versionName",label:"版本名称",type:"input"},{name:"parentSid",label:"父类编号",type:"input"},{name:"versionFreq",label:"频度",type:"select",selectList:[{key:"Y",value:"年"},{key:"H",value:"半年"},{key:"S",value:"季"},{key:"M",value:"月"},{key:"T",value:"旬"},{key:"W",value:"周"},{key:"D",value:"日"}]},{name:"sort",label:"排序",type:"input"},{name:"status",label:"版本状态",type:"select",selectList:[{key:"0",value:"正常"},{key:"1",value:"停用"}]},{name:"creatorSid",label:"创建者编号",type:"input"},{name:"createTime",label:"创建时间",type:"input"},{name:"editorSid",label:"修改者编号",type:"datetime"},{name:"updateTime",label:"修改时间",type:"datetime"},{name:"remark",label:"备注",type:"input"}]}},components:{modalModuleDetail:n["default"]},mounted:function(){var e=this,t=this.tableData,a=t.pageNum,r=t.pageSize;this.loadData({pageNum:a,pageSize:r},{}),l["a"].$on("reloadData",function(){e.reloadData({},{})})},methods:{selectTableKeysChangeFromQFT:function(e){this.selectTableKeys=e},handleAddI18N:function(){this.$refs.modalModuleDetail.open({mode:"insert",menuSid:this.moduleItem.sid})},open:function(e){this.moduleItem=e,this.$refs.crm.open()},loadData:function(e,t){var a=this;"{}"===JSON.stringify(e)&&(e.pageNum=this.tableData.pageNum,e.pageSize=this.tableData.pageSize),t.menuSid||(t.menuSid=this.moduleItem.sid),this.loadingFlag=!0,Object(i["c"])(e.pageNum,e.pageSize,t).then(function(e){a.$nextTick(function(){a.tableData.content=e.rows,a.tableData.totalSize=e.total,a.tableData.totalPages=Math.ceil(a.tableData.totalSize/a.tableData.pageSize)})}).finally(function(){a.loadingFlag=!1})},reloadData:function(e){if("{}"!==JSON.stringify(e)){var t=e.pageNum,a=e.pageSize;this.tableData.pageNum=t,this.tableData.pageSize=a}this.loadData({pageNum:this.tableData.pageNum,pageSize:this.tableData.pageSize},{})},formQuery:function(e){this.loadData({},e)},dbClick:function(e){this.handleEdit(e.sid)},handleEdit:function(e){this.$refs.modalModuleDetail.open({mode:"edit",sid:e})},handleDelete:function(t){var a=this;this.$confirm({title:"删除数据确认",content:"即将删除".concat(t.length,"项数据，确认删除？"),okType:"danger",closable:!0,onOk:function(){var e={countNum:t.length,ids:t.toString()};Object(i["b"])(e).then(function(e){a.selectTableKeys=[],a.$message.success("数据已删除成功"),a.loadData({},{})})}})}}},d=s,c=a("2877"),m=Object(c["a"])(d,r,o,!1,null,"722eee9d",null);t["default"]=m.exports},ee82:function(e,t,a){},f8d8:function(e,t,a){"use strict";a("748a")},fbd7:function(e,t,a){"use strict";a.r(t);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("c-resizable-modal",{ref:"crm",attrs:{modalWidth:"55%",title:("insert"==t.mode?"新增":"编辑")+"报表"}},[a("a-spin",{attrs:{spinning:t.spin}},[a("a-steps",{staticClass:"step-box",attrs:{current:t.currentStep,size:"small"}},[a("a-step",{attrs:{title:"报表基本信息"}}),a("a-step",{attrs:{title:"报表相关文件"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.currentStep,expression:"currentStep === 0"}]},[a("a-form-model",{ref:"addForm1",attrs:{model:t.addForm,labelCol:{span:6},wrapperCol:{span:18},rules:t.addFormRule}},[a("a-row",[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"报表编号",prop:"reportNo"}},[a("a-input",{model:{value:t.addForm.reportNo,callback:function(e){t.$set(t.addForm,"reportNo",e)},expression:"addForm.reportNo"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"报表名称",prop:"reportName"}},[a("a-input",{model:{value:t.addForm.reportName,callback:function(e){t.$set(t.addForm,"reportName",e)},expression:"addForm.reportName"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"报表类型",prop:"reportType"}},[a("a-select",{attrs:{allowClear:""},model:{value:t.addForm.reportType,callback:function(e){t.$set(t.addForm,"reportType",e)},expression:"addForm.reportType"}},t._l(t.reportTypeSelectItems,function(e){return a("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(t._s(e.value))])}),1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"报送结构层级",prop:"orgLevel"}},[a("a-select",{attrs:{allowClear:""},model:{value:t.addForm.orgLevel,callback:function(e){t.$set(t.addForm,"orgLevel",e)},expression:"addForm.orgLevel"}},t._l(t.orgLevelSelectItems,function(e){return a("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(t._s(e.value))])}),1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"是否汇总",prop:"isAggregate"}},[a("a-select",{attrs:{allowClear:""},model:{value:t.addForm.isAggregate,callback:function(e){t.$set(t.addForm,"isAggregate",e)},expression:"addForm.isAggregate"}},t._l(t.isAggregateSelectItems,function(e){return a("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(t._s(e.value))])}),1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"报表频度",prop:"reportFreq"}},[a("a-select",{attrs:{allowClear:""},model:{value:t.addForm.reportFreq,callback:function(e){t.$set(t.addForm,"reportFreq",e)},expression:"addForm.reportFreq"}},t._l(t.reportFreqSelectItems,function(e){return a("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(t._s(e.value))])}),1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"父报表编号",prop:"parentSid"}},[a("c-more-func-list-select",{staticStyle:{width:"100%"},attrs:{placeholder:"单击选择父报表或输入关键字搜索...",valueModel:t.addForm.parentSid,listData:t.parentSidList,showKey:!1},on:{valueChange:t.parentSidSelectValueChange,research:t.parentSidSelectResearch}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"选择数据集",prop:"datasetSid"}},[a("c-more-func-list-select",{staticStyle:{width:"100%"},attrs:{placeholder:"单击选择数据集或输入关键字搜索...",valueModel:t.addForm.datasetSid,listData:t.datasetSidList,showKey:!1},on:{valueChange:t.treeSelectValueChange,research:t.listSelectResearch}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"顺序号",prop:"sort"}},[a("a-input-number",{staticStyle:{width:"100%"},model:{value:t.addForm.sort,callback:function(e){t.$set(t.addForm,"sort",e)},expression:"addForm.sort"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"是否强制提交",prop:"forcibleFlag"}},[a("a-select",{attrs:{allowClear:""},model:{value:t.addForm.forcibleFlag,callback:function(e){t.$set(t.addForm,"forcibleFlag",e)},expression:"addForm.forcibleFlag"}},t._l(t.forcibleFlagSelectItems,function(e){return a("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(t._s(e.value))])}),1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"删除类型",prop:"deleteType"}},[a("a-select",{attrs:{allowClear:""},model:{value:t.addForm.deleteType,callback:function(e){t.$set(t.addForm,"deleteType",e)},expression:"addForm.deleteType"}},t._l(t.deleteTypeSelectItems,function(e){return a("a-select-option",{key:e.key,attrs:{value:e.key}},[t._v(t._s(e.value))])}),1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"生效日期",prop:"beginDate"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{valueFormat:"YYYYMMDD"},model:{value:t.addForm.beginDate,callback:function(e){t.$set(t.addForm,"beginDate",e)},expression:"addForm.beginDate"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"失效日期",prop:"endDate"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{valueFormat:"YYYYMMDD"},model:{value:t.addForm.endDate,callback:function(e){t.$set(t.addForm,"endDate",e)},expression:"addForm.endDate"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"日期字段",prop:"issueField"}},[a("a-select",{attrs:{allowClear:""},model:{value:t.addForm.issueField,callback:function(e){t.$set(t.addForm,"issueField",e)},expression:"addForm.issueField"}},t._l(t.orgIssueSelectItems,function(e){return a("a-select-option",{key:e.key,attrs:{value:e.nameEn}},[t._v(t._s(e.nameCn))])}),1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"机构字段",prop:"orgField"}},[a("a-select",{attrs:{allowClear:""},model:{value:t.addForm.orgField,callback:function(e){t.$set(t.addForm,"orgField",e)},expression:"addForm.orgField"}},t._l(t.orgIssueSelectItems,function(e){return a("a-select-option",{key:e.key,attrs:{value:e.nameEn}},[t._v(t._s(e.nameCn))])}),1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"创建者编号",prop:"creatorSid"}},[a("a-input",{attrs:{disabled:""},model:{value:t.addForm.creatorSid,callback:function(e){t.$set(t.addForm,"creatorSid",e)},expression:"addForm.creatorSid"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"创建时间",prop:"createTime"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:{format:"HH:mm:ss"},disabled:""},model:{value:t.addForm.createTime,callback:function(e){t.$set(t.addForm,"createTime",e)},expression:"addForm.createTime"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"修改者编号",prop:"editorSid"}},[a("a-input",{attrs:{disabled:""},model:{value:t.addForm.editorSid,callback:function(e){t.$set(t.addForm,"editorSid",e)},expression:"addForm.editorSid"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"修改时间",prop:"updateTime"}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{showTime:{format:"HH:mm:ss"},disabled:""},model:{value:t.addForm.updateTime,callback:function(e){t.$set(t.addForm,"updateTime",e)},expression:"addForm.updateTime"}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-model-item",{attrs:{label:"备注",prop:"note",labelCol:{span:3},wrapperCol:{span:21}}},[a("a-input",{attrs:{type:"textarea"},model:{value:t.addForm.remark,callback:function(e){t.$set(t.addForm,"remark",e)},expression:"addForm.remark"}})],1)],1)],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.currentStep,expression:"currentStep === 1"}]},[a("a-form-model",{ref:"addForm",attrs:{model:t.addForm,labelCol:{span:6},wrapperCol:{span:18},rules:t.addFormRule}},[a("a-row",[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{style:{minHeight:"200px"},attrs:{label:"表头文件",prop:"excelHeader"}},[a("fileImportButton",{ref:"fileImportButton_excelHeader",attrs:{accept:".xls,.xlsx",fileCount:1},on:{readToPostFile:t.readExcelHeader}}),t.addForm.excelHeaderDir&&t.addForm.excelHeaderDir.length?a("div",{staticClass:"file-dir-box"},[t._v(" "+t._s(t.addForm.excelHeaderDir)+" "),a("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:reportdef:downloadReportFile"],expression:"['content:reportdef:downloadReportFile']"}],attrs:{icon:"download",type:"link"},on:{click:function(e){return t.handleDownloadFile(t.addForm.sid,"excelHeader",t.addForm.excelHeaderDir)}}},[t._v("下载")]),a("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:reportdef:previewReportFile"],expression:"['content:reportdef:previewReportFile']"}],attrs:{icon:"eye",type:"link"},on:{click:function(e){return t.handlePreviewFile(t.addForm.sid,"excelHeader",t.addForm.excelHeaderDir)}}},[t._v("预览")])],1):t._e()],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{style:{minHeight:"200px"},attrs:{label:"表尾文件",prop:"excelFooter"}},[a("fileImportButton",{ref:"fileImportButton_excelFooter",attrs:{accept:".xls,.xlsx",fileCount:1},on:{readToPostFile:t.readExcelFooter}}),t.addForm.excelFooterDir&&t.addForm.excelFooterDir.length?a("div",{staticClass:"file-dir-box"},[t._v(" "+t._s(t.addForm.excelFooterDir)+" "),a("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:reportdef:downloadReportFile"],expression:"['content:reportdef:downloadReportFile']"}],attrs:{icon:"download",type:"link"},on:{click:function(e){return t.handleDownloadFile(t.addForm.sid,"excelFooter",t.addForm.excelFooterDir)}}},[t._v("下载")]),a("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:reportdef:previewReportFile"],expression:"['content:reportdef:previewReportFile']"}],attrs:{icon:"eye",type:"link"},on:{click:function(e){return t.handlePreviewFile(t.addForm.sid,"excelFooter",t.addForm.excelFooterDir)}}},[t._v("预览")])],1):t._e()],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"表样文件",prop:"excelSample"}},[a("fileImportButton",{ref:"fileImportButton_excelSample",attrs:{accept:".xls,.xlsx",fileCount:1},on:{readToPostFile:t.readExcelSample}}),t.addForm.excelSampleDir&&t.addForm.excelSampleDir.length?a("div",{staticClass:"file-dir-box"},[t._v(" "+t._s(t.addForm.excelSampleDir)+" "),a("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:reportdef:downloadReportFile"],expression:"['content:reportdef:downloadReportFile']"}],attrs:{icon:"download",type:"link"},on:{click:function(e){return t.handleDownloadFile(t.addForm.sid,"excelSample",t.addForm.excelSampleDir)}}},[t._v("下载")]),a("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:reportdef:previewReportFile"],expression:"['content:reportdef:previewReportFile']"}],attrs:{icon:"eye",type:"link"},on:{click:function(e){return t.handlePreviewFile(t.addForm.sid,"excelSample",t.addForm.excelSampleDir)}}},[t._v("预览")])],1):t._e()],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"填报说明文件",prop:"docFile"}},[a("fileImportButton",{ref:"fileImportButton_docFile",attrs:{accept:".doc,.docx",fileCount:1},on:{readToPostFile:t.readDocFile}}),t.addForm.docFileDir&&t.addForm.docFileDir.length?a("div",{staticClass:"file-dir-box"},[t._v(" "+t._s(t.addForm.docFileDir)+" "),a("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:reportdef:downloadReportFile"],expression:"['content:reportdef:downloadReportFile']"}],attrs:{icon:"download",type:"link"},on:{click:function(e){return t.handleDownloadFile(t.addForm.sid,"docFile",t.addForm.docFileDir)}}},[t._v("下载")]),a("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:reportdef:previewReportFile"],expression:"['content:reportdef:previewReportFile']"}],attrs:{icon:"eye",type:"link"},on:{click:function(e){return t.handlePreviewFile(t.addForm.sid,"docFileDir",t.addForm.docFileDir)}}},[t._v("预览|Beta")])],1):t._e()],1)],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("a-button",{staticClass:"margin-btn",attrs:{type:"info",icon:"close"},on:{click:t.handleCancel}},[t._v("取 消")]),0!==t.currentStep?a("a-button",{attrs:{type:"primary",icon:"left"},on:{click:function(e){t.currentStep--}}},[t._v("上一部分")]):t._e(),1!==t.currentStep?a("a-button",{attrs:{type:"primary",icon:"right"},on:{click:function(e){t.currentStep++}}},[t._v("下一部分")]):t._e(),1===t.currentStep&&"insert"==t.mode?a("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:reportdef:edit"],expression:"['content:reportdef:edit']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:t.saveLoading},on:{click:t.handleSave}},[t._v("新 建")]):t._e(),1===t.currentStep&&"edit"==t.mode?a("a-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["content:reportdef:edit"],expression:"['content:reportdef:edit']"}],staticClass:"margin-btn",attrs:{type:"primary",icon:"check",loading:t.saveLoading},on:{click:t.handleSave}},[t._v("更 新")]):t._e()],1)],1),a("filePreviewBox",{ref:"filePreviewBox"})],1)},o=[],i=(a("b0c0"),a("d3b7"),a("25f0"),a("ac1f"),a("1276"),a("4e82"),a("ed08")),n=a("040c"),l=a("c713"),s=a("9158"),d=a("da15"),c=a("c41f"),m=a("f5ef"),u={data:function(){return{mode:"read",spin:!1,currentStep:0,parentSidList:{},datasetSidList:{},isModalVisible:!1,saveLoading:!1,addForm:{},addFormRule:{reportNo:[{required:!0,message:"不允许为空",trigger:"blur"}],reportName:[{required:!0,message:"不允许为空",trigger:"blur"}],reportType:[{required:!0,message:"不允许为空",trigger:"blur"}],orgLevel:[{required:!0,message:"不允许为空",trigger:"blur"}],isAggregate:[{required:!0,message:"不允许为空",trigger:"blur"}],reportFreq:[{required:!0,message:"不允许为空",trigger:"blur"}],forcibleFlag:[{required:!0,message:"不允许为空",trigger:"blur"}],deleteType:[{required:!0,message:"不允许为空",trigger:"blur"}],datasetSid:[{required:!0,message:"不允许为空",trigger:"blur"}],beginDate:[{required:!0,message:"不允许为空",trigger:"blur"}],endDate:[{required:!0,message:"不允许为空",trigger:"blur"}]},reportTypeSelectItems:[{key:"0",value:"明细表"},{key:"1",value:"统计表"}],orgLevelSelectItems:[{key:"1",value:"总行"},{key:"2",value:"分行"},{key:"3",value:"支行"},{key:"4",value:"网点"}],isAggregateSelectItems:[{key:"0",value:"否"},{key:"1",value:"是"}],deleteTypeSelectItems:[{key:"0",value:"物理删除"},{key:"1",value:"逻辑删除"}],reportFreqSelectItems:[{key:"Y",value:"年"},{key:"H",value:"半年"},{key:"S",value:"季"},{key:"M",value:"月"},{key:"T",value:"旬"},{key:"W",value:"周"},{key:"D",value:"日"}],forcibleFlagSelectItems:[{key:"0",value:"否"},{key:"1",value:"是"}],tableData:{},orgIssueSelectItems:[],issueFieldSelectItems:[]}},components:{fileImportButton:d["default"],filePreviewBox:n["default"]},mounted:function(){},methods:{getDataParamInfo:function(e){var t=this,a={datasetSid:e};Object(l["h"])(a).then(function(e){t.orgIssueSelectItems=Object(i["b"])(e.rows,["fieldNameCn"],"fieldNameEn")})},handleDownloadFile:function(e,t,a){var r=this;Object(l["d"])(e,t).then(function(e){Object(i["f"])(e),r.$message.success("文件".concat(a,"的下载请求已执行，正在唤起默认下载工具。"))}).catch(function(e){r.$message.error("下载失败。原因：".concat(e.message))})},handlePreviewFile:function(e,t,a){var r=this;this.$message.info("正在打开..."),Object(l["m"])(e,t).then(function(e){r.$refs.filePreviewBox.open(e.data)}).catch(function(e){r.$message.error("下载失败。原因：".concat(e.message))})},calcDisabledDate:s["a"],readExcelHeader:function(e){this.addForm.excelHeader=e},readExcelFooter:function(e){this.addForm.excelFooter=e},readExcelSample:function(e){this.addForm.excelSample=e},readDocFile:function(e){this.addForm.docFile=e},listSelectResearch:function(e,t){t&&t.name&&(t.datasetName=t.name,delete t.name),this.loadDatasetData(e,t)},parentSidSelectResearch:function(e,t){t&&t.name&&(t.reportNoName=t.name,delete t.name),this.loadReportTreeData(e,t)},loadDatasetData:function(e,t){var a=this,r=this;"{}"===JSON.stringify(e)&&(e.pageNum=1,e.pageSize=5),Object(c["c"])(e.pageNum,e.pageSize,t).then(function(t){r.$nextTick(function(){var e={};e.data=Object(i["b"])(t.rows,["datasetNameCn","datasetNameEn"],"sid"),e.total=t.total,r.datasetSidList=e})}).catch(function(e){r.$message.error("数据加载错误："+e)}).finally(function(){a.$forceUpdate()})},treeSelectValueChange:function(e){this.addForm.datasetSid=e,this.$forceUpdate()},parentSidSelectValueChange:function(e){this.addForm.parentSid=e,this.$forceUpdate()},projectSearchFilterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},isComponentShow:function(e,t){if("all"===e){for(var a in t){var r=this.addForm.menuType===t[a].toString();if(r)return!0}return!1}if("edit"===e)return e===this.mode},getDefaultValue:function(){return{sid:"",reportNo:"",reportName:"",reportType:"0",orgLevel:"1",isAggregate:"0",reportFreq:"Y",parentSid:"",sort:"0",forcibleFlag:"0",deleteType:"0",beginDate:"",endDate:"99991231",creatorSid:"",createTime:"",editorSid:"",updateTime:"",remark:"",excelHeader:void 0,excelFooter:void 0,excelSample:void 0,docFile:void 0}},open:function(e){this.currentStep=0,this.addForm=this.getDefaultValue(),this.mode=e.mode,"insert"===this.mode&&(this.loadDatasetData({},{}),this.loadReportTreeData({},{})),"edit"===this.mode&&(this.spin=!0,this.getDataBySid(e.sid)),this.$refs.crm.open()},getDataBySid:function(e){var a=this;this.spin=!0,Object(l["i"])(e).then(function(e){var t={};null!==e.data.datasetSid&&e.data.datasetSid.length>0&&(t.sid=e.data.datasetSid),a.getDataParamInfo(e.data.datasetSid),a.loadDatasetData({},t),null!==e.data.parentSid&&(t.sid=e.data.parentSid,t.sidType="report"),a.loadReportTreeData({},t),a.$nextTick(function(){a.addForm=e.data,a.$forceUpdate()})}).finally(function(){a.spin=!1,a.$forceUpdate()})},handleSave:function(){var t=this;this.addForm.parentSid&&this.addForm.parentSid.length&&-1!==this.addForm.parentSid.indexOf("_")&&(this.addForm.parentSid=this.addForm.parentSid.split("_")[1]),void 0!==this.addForm.docFile&&null!==this.addForm.docFile||delete this.addForm.docFile,void 0!==this.addForm.excelHeader&&null!==this.addForm.excelHeader||delete this.addForm.excelHeader,void 0!==this.addForm.excelFooter&&null!==this.addForm.excelFooter||delete this.addForm.excelFooter,void 0!==this.addForm.excelSample&&null!==this.addForm.excelSample||delete this.addForm.excelSample,null===this.addForm.sort&&(this.addForm.sort=0),delete this.addForm.params,this.$refs.addForm1.validate(function(e){if(!e)return t.$message.warning("表单中存在必填字段没有输入，请检查后再提交。"),!1;t.saveLoading=!0,"insert"==t.mode?t.createMenu():t.editMenu()})},editMenu:function(){var t=this,e=new FormData;for(var a in this.addForm)e.append(a,this.addForm[a]);Object(l["n"])(e).then(function(e){if(!Object(i["l"])(e))throw new Error(e.msg);t.$message.success("数据已更新"),m["a"].$emit("reloadData"),t.$refs.crm.close()}).catch(function(e){t.$message.error("请求异常：",e.message)}).finally(function(){t.saveLoading=!1})},createMenu:function(){var t=this,e=new FormData;for(var a in this.addForm)e.append(a,this.addForm[a]);Object(l["a"])(e).then(function(e){if(!Object(i["l"])(e))throw new Error(e.msg);t.$message.success("数据已新增"),t.$refs.crm.close(),m["a"].$emit("reloadData")}).catch(function(e){t.$message.error("请求异常："+e.message)}).finally(function(){t.saveLoading=!1})},handleCancel:function(){this.$refs.crm.close()},selectedIcon:function(e){this.addForm.icon=e},loadReportTreeData:function(e,t){var a=this,r=this;"{}"===JSON.stringify(e)&&(e.pageNum=1,e.pageSize=5),Object(l["g"])(e.pageNum,e.pageSize,t).then(function(t){r.$nextTick(function(){var e={};e.data=Object(i["b"])(t.rows,["reportName","reportNo"],"sid"),e.total=t.total,r.parentSidList=e})}).catch(function(e){r.$message.error("数据加载错误："+e)}).finally(function(){a.$forceUpdate()})}}},p=u,f=(a("596c"),a("2877")),h=Object(f["a"])(p,r,o,!1,null,"20327598",null);t["default"]=h.exports}}]);